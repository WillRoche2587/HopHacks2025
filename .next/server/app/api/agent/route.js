/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/agent/route";
exports.ids = ["app/api/agent/route"];
exports.modules = {

/***/ "(rsc)/./app/api/agent/route.ts":
/*!********************************!*\
  !*** ./app/api/agent/route.ts ***!
  \********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   DELETE: () => (/* binding */ DELETE),\n/* harmony export */   GET: () => (/* binding */ GET),\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   PUT: () => (/* binding */ PUT)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_agents_weatherAgent__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/agents/weatherAgent */ \"(rsc)/./lib/agents/weatherAgent.ts\");\n/* harmony import */ var _lib_agents_currentEventsAgent__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/agents/currentEventsAgent */ \"(rsc)/./lib/agents/currentEventsAgent.ts\");\n/* harmony import */ var _lib_agents_historicEventsAgent__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! @/lib/agents/historicEventsAgent */ \"(rsc)/./lib/agents/historicEventsAgent.ts\");\n/* harmony import */ var _lib_agents_organizerScoringAgent__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! @/lib/agents/organizerScoringAgent */ \"(rsc)/./lib/agents/organizerScoringAgent.ts\");\n/* harmony import */ var _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! @/lib/supabaseClient */ \"(rsc)/./lib/supabaseClient.ts\");\n\n\n\n\n\n\n/**\r\n * API Route Handler for Agent Operations\r\n * Handles POST requests to execute different AI agents\r\n */ async function POST(request) {\n    try {\n        const body = await request.json();\n        const { agent, payload, eventId, userId } = body;\n        if (!agent || !payload) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: 'Missing required fields: agent and payload'\n            }, {\n                status: 400\n            });\n        }\n        // Validate agent type\n        const validAgents = [\n            'weather',\n            'currentEvents',\n            'historicEvents',\n            'organizerScoring'\n        ];\n        if (!validAgents.includes(agent)) {\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: `Invalid agent type. Must be one of: ${validAgents.join(', ')}`\n            }, {\n                status: 400\n            });\n        }\n        let result;\n        // Route to appropriate agent\n        switch(agent){\n            case 'weather':\n                result = await (0,_lib_agents_weatherAgent__WEBPACK_IMPORTED_MODULE_1__.run)(payload);\n                break;\n            case 'currentEvents':\n                result = await (0,_lib_agents_currentEventsAgent__WEBPACK_IMPORTED_MODULE_2__.run)(payload);\n                break;\n            case 'historicEvents':\n                result = await (0,_lib_agents_historicEventsAgent__WEBPACK_IMPORTED_MODULE_3__.run)(payload);\n                break;\n            case 'organizerScoring':\n                result = await (0,_lib_agents_organizerScoringAgent__WEBPACK_IMPORTED_MODULE_4__.run)(payload);\n                break;\n            default:\n                return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                    error: 'Unknown agent type'\n                }, {\n                    status: 400\n                });\n        }\n        // Store result in database if eventId and userId are provided\n        if (eventId && userId) {\n            try {\n                const { error } = await _lib_supabaseClient__WEBPACK_IMPORTED_MODULE_5__.supabaseAdmin.from('agent_results').insert({\n                    event_id: eventId,\n                    agent_name: agent,\n                    response_text: result,\n                    user_id: userId\n                });\n                if (error) {\n                    console.error('Database insert error:', error);\n                // Don't fail the request if database insert fails\n                }\n            } catch (dbError) {\n                console.error('Database operation error:', dbError);\n            // Don't fail the request if database operation fails\n            }\n        }\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            success: true,\n            agent,\n            result,\n            timestamp: new Date().toISOString()\n        });\n    } catch (error) {\n        console.error('Agent API error:', error);\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: 'Internal server error',\n            message: error instanceof Error ? error.message : 'Unknown error',\n            timestamp: new Date().toISOString()\n        }, {\n            status: 500\n        });\n    }\n}\n/**\r\n * Handle unsupported HTTP methods\r\n */ async function GET() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: 'Method not allowed. Use POST to execute agents.'\n    }, {\n        status: 405\n    });\n}\nasync function PUT() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: 'Method not allowed. Use POST to execute agents.'\n    }, {\n        status: 405\n    });\n}\nasync function DELETE() {\n    return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n        error: 'Method not allowed. Use POST to execute agents.'\n    }, {\n        status: 405\n    });\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUVLLE9BQU87SUFBa0QsR0FDM0Q7UUFBRUMsUUFBUTtJQUFJO0FBRWxCIiwic291cmNlcyI6WyIvVXNlcnMvd2lsbHJvY2hlL0Rlc2t0b3AvSG9wSGFja3MyMDI1L2FwcC9hcGkvYWdlbnQvcm91dGUudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dFJlcXVlc3QsIE5leHRSZXNwb25zZSB9IGZyb20gJ25leHQvc2VydmVyJ1xyXG5pbXBvcnQgeyBydW4gYXMgd2VhdGhlckFnZW50IH0gZnJvbSAnQC9saWIvYWdlbnRzL3dlYXRoZXJBZ2VudCdcclxuaW1wb3J0IHsgcnVuIGFzIGN1cnJlbnRFdmVudHNBZ2VudCB9IGZyb20gJ0AvbGliL2FnZW50cy9jdXJyZW50RXZlbnRzQWdlbnQnXHJcbmltcG9ydCB7IHJ1biBhcyBoaXN0b3JpY0V2ZW50c0FnZW50IH0gZnJvbSAnQC9saWIvYWdlbnRzL2hpc3RvcmljRXZlbnRzQWdlbnQnXHJcbmltcG9ydCB7IHJ1biBhcyBvcmdhbml6ZXJTY29yaW5nQWdlbnQgfSBmcm9tICdAL2xpYi9hZ2VudHMvb3JnYW5pemVyU2NvcmluZ0FnZW50J1xyXG5pbXBvcnQgeyBzdXBhYmFzZUFkbWluIH0gZnJvbSAnQC9saWIvc3VwYWJhc2VDbGllbnQnXHJcblxyXG4vKipcclxuICogQVBJIFJvdXRlIEhhbmRsZXIgZm9yIEFnZW50IE9wZXJhdGlvbnNcclxuICogSGFuZGxlcyBQT1NUIHJlcXVlc3RzIHRvIGV4ZWN1dGUgZGlmZmVyZW50IEFJIGFnZW50c1xyXG4gKi9cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBPU1QocmVxdWVzdDogTmV4dFJlcXVlc3QpIHtcclxuICB0cnkge1xyXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcXVlc3QuanNvbigpXHJcbiAgICBjb25zdCB7IGFnZW50LCBwYXlsb2FkLCBldmVudElkLCB1c2VySWQgfSA9IGJvZHlcclxuXHJcbiAgICBpZiAoIWFnZW50IHx8ICFwYXlsb2FkKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiAnTWlzc2luZyByZXF1aXJlZCBmaWVsZHM6IGFnZW50IGFuZCBwYXlsb2FkJyB9LFxyXG4gICAgICAgIHsgc3RhdHVzOiA0MDAgfVxyXG4gICAgICApXHJcbiAgICB9XHJcblxyXG4gICAgLy8gVmFsaWRhdGUgYWdlbnQgdHlwZVxyXG4gICAgY29uc3QgdmFsaWRBZ2VudHMgPSBbJ3dlYXRoZXInLCAnY3VycmVudEV2ZW50cycsICdoaXN0b3JpY0V2ZW50cycsICdvcmdhbml6ZXJTY29yaW5nJ11cclxuICAgIGlmICghdmFsaWRBZ2VudHMuaW5jbHVkZXMoYWdlbnQpKSB7XHJcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgICAgICB7IGVycm9yOiBgSW52YWxpZCBhZ2VudCB0eXBlLiBNdXN0IGJlIG9uZSBvZjogJHt2YWxpZEFnZW50cy5qb2luKCcsICcpfWAgfSxcclxuICAgICAgICB7IHN0YXR1czogNDAwIH1cclxuICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIGxldCByZXN1bHQ6IHN0cmluZ1xyXG5cclxuICAgIC8vIFJvdXRlIHRvIGFwcHJvcHJpYXRlIGFnZW50XHJcbiAgICBzd2l0Y2ggKGFnZW50KSB7XHJcbiAgICAgIGNhc2UgJ3dlYXRoZXInOlxyXG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IHdlYXRoZXJBZ2VudChwYXlsb2FkKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ2N1cnJlbnRFdmVudHMnOlxyXG4gICAgICAgIHJlc3VsdCA9IGF3YWl0IGN1cnJlbnRFdmVudHNBZ2VudChwYXlsb2FkKVxyXG4gICAgICAgIGJyZWFrXHJcbiAgICAgIGNhc2UgJ2hpc3RvcmljRXZlbnRzJzpcclxuICAgICAgICByZXN1bHQgPSBhd2FpdCBoaXN0b3JpY0V2ZW50c0FnZW50KHBheWxvYWQpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgY2FzZSAnb3JnYW5pemVyU2NvcmluZyc6XHJcbiAgICAgICAgcmVzdWx0ID0gYXdhaXQgb3JnYW5pemVyU2NvcmluZ0FnZW50KHBheWxvYWQpXHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICAgICAgICB7IGVycm9yOiAnVW5rbm93biBhZ2VudCB0eXBlJyB9LFxyXG4gICAgICAgICAgeyBzdGF0dXM6IDQwMCB9XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIFN0b3JlIHJlc3VsdCBpbiBkYXRhYmFzZSBpZiBldmVudElkIGFuZCB1c2VySWQgYXJlIHByb3ZpZGVkXHJcbiAgICBpZiAoZXZlbnRJZCAmJiB1c2VySWQpIHtcclxuICAgICAgdHJ5IHtcclxuICAgICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZUFkbWluXHJcbiAgICAgICAgICAuZnJvbSgnYWdlbnRfcmVzdWx0cycpXHJcbiAgICAgICAgICAuaW5zZXJ0KHtcclxuICAgICAgICAgICAgZXZlbnRfaWQ6IGV2ZW50SWQsXHJcbiAgICAgICAgICAgIGFnZW50X25hbWU6IGFnZW50LFxyXG4gICAgICAgICAgICByZXNwb25zZV90ZXh0OiByZXN1bHQsXHJcbiAgICAgICAgICAgIHVzZXJfaWQ6IHVzZXJJZFxyXG4gICAgICAgICAgfSlcclxuXHJcbiAgICAgICAgaWYgKGVycm9yKSB7XHJcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdEYXRhYmFzZSBpbnNlcnQgZXJyb3I6JywgZXJyb3IpXHJcbiAgICAgICAgICAvLyBEb24ndCBmYWlsIHRoZSByZXF1ZXN0IGlmIGRhdGFiYXNlIGluc2VydCBmYWlsc1xyXG4gICAgICAgIH1cclxuICAgICAgfSBjYXRjaCAoZGJFcnJvcikge1xyXG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0RhdGFiYXNlIG9wZXJhdGlvbiBlcnJvcjonLCBkYkVycm9yKVxyXG4gICAgICAgIC8vIERvbid0IGZhaWwgdGhlIHJlcXVlc3QgaWYgZGF0YWJhc2Ugb3BlcmF0aW9uIGZhaWxzXHJcbiAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oe1xyXG4gICAgICBzdWNjZXNzOiB0cnVlLFxyXG4gICAgICBhZ2VudCxcclxuICAgICAgcmVzdWx0LFxyXG4gICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgfSlcclxuXHJcbiAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgIGNvbnNvbGUuZXJyb3IoJ0FnZW50IEFQSSBlcnJvcjonLCBlcnJvcilcclxuICAgIFxyXG4gICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgICB7IFxyXG4gICAgICAgIGVycm9yOiAnSW50ZXJuYWwgc2VydmVyIGVycm9yJyxcclxuICAgICAgICBtZXNzYWdlOiBlcnJvciBpbnN0YW5jZW9mIEVycm9yID8gZXJyb3IubWVzc2FnZSA6ICdVbmtub3duIGVycm9yJyxcclxuICAgICAgICB0aW1lc3RhbXA6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKVxyXG4gICAgICB9LFxyXG4gICAgICB7IHN0YXR1czogNTAwIH1cclxuICAgIClcclxuICB9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBIYW5kbGUgdW5zdXBwb3J0ZWQgSFRUUCBtZXRob2RzXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gR0VUKCkge1xyXG4gIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbihcclxuICAgIHsgZXJyb3I6ICdNZXRob2Qgbm90IGFsbG93ZWQuIFVzZSBQT1NUIHRvIGV4ZWN1dGUgYWdlbnRzLicgfSxcclxuICAgIHsgc3RhdHVzOiA0MDUgfVxyXG4gIClcclxufVxyXG5cclxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIFBVVCgpIHtcclxuICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oXHJcbiAgICB7IGVycm9yOiAnTWV0aG9kIG5vdCBhbGxvd2VkLiBVc2UgUE9TVCB0byBleGVjdXRlIGFnZW50cy4nIH0sXHJcbiAgICB7IHN0YXR1czogNDA1IH1cclxuICApXHJcbn1cclxuXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBERUxFVEUoKSB7XHJcbiAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKFxyXG4gICAgeyBlcnJvcjogJ01ldGhvZCBub3QgYWxsb3dlZC4gVXNlIFBPU1QgdG8gZXhlY3V0ZSBhZ2VudHMuJyB9LFxyXG4gICAgeyBzdGF0dXM6IDQwNSB9XHJcbiAgKVxyXG59XHJcbiJdLCJuYW1lcyI6WyJOZXh0UmVzcG9uc2UiLCJydW4iLCJ3ZWF0aGVyQWdlbnQiLCJjdXJyZW50RXZlbnRzQWdlbnQiLCJoaXN0b3JpY0V2ZW50c0FnZW50Iiwib3JnYW5pemVyU2NvcmluZ0FnZW50Iiwic3VwYWJhc2VBZG1pbiIsIlBPU1QiLCJyZXF1ZXN0IiwiYm9keSIsImpzb24iLCJhZ2VudCIsInBheWxvYWQiLCJldmVudElkIiwidXNlcklkIiwiZXJyb3IiLCJzdGF0dXMiLCJ2YWxpZEFnZW50cyIsImluY2x1ZGVzIiwiam9pbiIsInJlc3VsdCIsImZyb20iLCJpbnNlcnQiLCJldmVudF9pZCIsImFnZW50X25hbWUiLCJyZXNwb25zZV90ZXh0IiwidXNlcl9pZCIsImNvbnNvbGUiLCJkYkVycm9yIiwic3VjY2VzcyIsInRpbWVzdGFtcCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsIm1lc3NhZ2UiLCJFcnJvciIsIkdFVCIsIlBVVCIsIkRFTEVURSJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./app/api/agent/route.ts\n");

/***/ }),

/***/ "(rsc)/./lib/agents/currentEventsAgent.ts":
/*!******************************************!*\
  !*** ./lib/agents/currentEventsAgent.ts ***!
  \******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   run: () => (/* binding */ run)\n/* harmony export */ });\n/**\r\n * Current Events Agent - Analyzes events within the last 72 hours that could impact the upcoming event\r\n * @param payload - Contains location, date, and event details\r\n * @returns Analysis of recent events that could affect the planned event\r\n */ async function run(payload) {\n    const { location, date, eventType, expectedAttendance } = payload;\n    if (!location || !date) {\n        throw new Error('Location and date are required for current events analysis');\n    }\n    const geminiApiKey = \"AIzaSyA8iqM-6wibaLrqTB42bO_IVhtZXKAzWCg\";\n    if (!geminiApiKey) {\n        throw new Error('GEMINI_API_KEY not configured for Current Events Agent');\n    }\n    try {\n        // Use Gemini to search for and analyze recent events in one go\n        const currentDate = new Date();\n        const startDate = new Date(Date.now() - 72 * 60 * 60 * 1000) // 72 hours ago\n        ;\n        const prompt = `You are a comprehensive current events analyst with access to real-time information. Search for and analyze ANY significant events that have occurred in ${location} within the last 72 hours (from ${startDate.toISOString()} to ${currentDate.toISOString()}) that could impact an upcoming ${eventType} event on ${date}.\n\nSEARCH AND ANALYZE:\n- Traffic incidents, road closures, construction delays\n- Weather emergencies, severe weather warnings, storms\n- Local emergencies, accidents, public safety incidents\n- Major events, festivals, concerts, protests, gatherings\n- Infrastructure issues (power outages, water main breaks, gas leaks)\n- Transportation disruptions (airport delays, train cancellations, transit issues)\n- Public health alerts, disease outbreaks, advisories\n- Government announcements, policy changes affecting the area\n- Sports events, entertainment venues with large crowds\n- Breaking news that could affect local conditions\n\nEVENT DETAILS:\nType: ${eventType}\nLocation: ${location}\nDate: ${date}\nExpected Attendance: ${expectedAttendance || 'Not specified'}\n\nOUTPUT FORMAT - Provide a comprehensive report exactly like this:\n\nüì∞ CURRENT EVENTS ANALYSIS REPORT\n\nüìç Location: ${location}\nüìÖ Event Date: ${date}\nüé™ Event Type: ${eventType}\n\n‚è∞ MONITORING WINDOW: Last 72 Hours\n\nüîç RECENT EVENTS ANALYSIS:\n[If events found: List each significant event with timestamp, description, and potential impact]\n[If no events: ‚Ä¢ No significant events detected in the last 72 hours that could impact your upcoming event]\n\nüìä IMPACT ASSESSMENT:\n‚Ä¢ Overall Impact Level: [None/Minimal/Low/Medium/High]\n‚Ä¢ Risk Level: [None/Low/Medium/High/Critical]\n‚Ä¢ Event Viability: [Unaffected/Minor Concerns/Moderate Impact/Major Impact/Critical Impact]\n\n[IF EVENTS FOUND, INCLUDE:]\nüö® CRITICAL FINDINGS:\n[List any events that pose immediate risks or require urgent action]\n\n‚úÖ POSITIVE DEVELOPMENTS:\n[List any events that could benefit the planned event or improve conditions]\n\n‚ö†Ô∏è POTENTIAL CONCERNS:\n[List events that require monitoring, could cause minor issues, or need contingency planning]\n\n[IF NO EVENTS FOUND, INCLUDE:]\n‚úÖ KEY FINDINGS:\n1. No traffic disruptions or road closures reported\n2. No major local incidents or emergencies\n3. No competing events scheduled for the same timeframe\n4. Normal public service operations expected\n5. Weather conditions appear stable\n\nüéØ SPECIFIC RECOMMENDATIONS:\n[Provide 3-5 actionable recommendations based on your findings - either mitigation strategies for found events OR standard preparation steps if no events found]\n\nüìà CONFIDENCE LEVEL: [High/Medium/Low]\n[Brief explanation: \"Based on comprehensive monitoring of news sources, emergency services, traffic systems, and local announcements\" OR \"Limited data availability requires manual verification\"]\n\nüîÑ MONITORING STATUS:\n‚Ä¢ Continuous monitoring active\n‚Ä¢ Will alert if new developments arise\n‚Ä¢ Next update scheduled closer to event date\n\n---\nGenerated: ${currentDate.toISOString()}\nAnalysis Window: 72 hours prior to report generation\nEvent: ${eventType} in ${location} on ${date}\n\nINSTRUCTIONS:\n- Only include REAL, VERIFIED events that have actually occurred\n- Focus on events that could realistically impact the planned event\n- If you find significant events, provide detailed impact analysis\n- If you find no significant events, clearly state the area is clear for event planning\n- Be specific about locations, times, and expected duration of any impacts\n- Provide actionable recommendations in all cases`;\n        // Call Gemini API for comprehensive analysis\n        const response = await fetchWithRetry(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${geminiApiKey}`, 3, 30000, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                contents: [\n                    {\n                        parts: [\n                            {\n                                text: prompt\n                            }\n                        ]\n                    }\n                ],\n                generationConfig: {\n                    temperature: 0.2,\n                    topK: 40,\n                    topP: 0.95,\n                    maxOutputTokens: 4096\n                },\n                safetySettings: [\n                    {\n                        category: \"HARM_CATEGORY_HARASSMENT\",\n                        threshold: \"BLOCK_NONE\"\n                    },\n                    {\n                        category: \"HARM_CATEGORY_HATE_SPEECH\",\n                        threshold: \"BLOCK_NONE\"\n                    },\n                    {\n                        category: \"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\n                        threshold: \"BLOCK_NONE\"\n                    },\n                    {\n                        category: \"HARM_CATEGORY_DANGEROUS_CONTENT\",\n                        threshold: \"BLOCK_NONE\"\n                    }\n                ]\n            })\n        });\n        if (!response.ok) {\n            const errorText = await response.text().catch(()=>'Unable to read error response');\n            console.error('Gemini API Error:', response.status, errorText);\n            return generateFallbackAnalysis(payload);\n        }\n        const data = await response.json();\n        const rawAnalysis = data.candidates?.[0]?.content?.parts?.[0]?.text;\n        if (!rawAnalysis || rawAnalysis.trim().length === 0) {\n            console.error('Empty analysis from Gemini');\n            return generateFallbackAnalysis(payload);\n        }\n        return rawAnalysis;\n    } catch (error) {\n        console.error('Current events agent error:', error);\n        return generateFallbackAnalysis(payload);\n    }\n}\n/**\r\n * Generate fallback analysis when Gemini fails\r\n */ function generateFallbackAnalysis(payload) {\n    const { location, date, eventType } = payload;\n    return `üì∞ CURRENT EVENTS ANALYSIS REPORT\n\nüìç Location: ${location}\nüìÖ Event Date: ${date}\nüé™ Event Type: ${eventType}\n\n‚è∞ MONITORING WINDOW: Last 72 Hours\n\nüîç RECENT EVENTS ANALYSIS:\n‚Ä¢ Analysis system temporarily unavailable - using fallback monitoring\n‚Ä¢ Standard monitoring protocols engaged\n‚Ä¢ Manual verification recommended for critical events\n\nüìä IMPACT ASSESSMENT:\n‚Ä¢ Overall Impact Level: Unknown (System Unavailable)\n‚Ä¢ Risk Level: Medium (Precautionary)\n‚Ä¢ Event Viability: Requires Manual Verification\n\n‚ö†Ô∏è FALLBACK RECOMMENDATIONS:\n‚Ä¢ Contact local authorities for recent incident reports\n‚Ä¢ Check local news sources manually\n‚Ä¢ Verify traffic conditions via local traffic apps\n‚Ä¢ Confirm venue accessibility with venue management\n‚Ä¢ Monitor social media for local disruptions\n‚Ä¢ Check weather services for any alerts\n\nüéØ IMMEDIATE ACTIONS:\n1. Manual verification of local conditions strongly recommended\n2. Contact venue directly for any reported issues\n3. Check with local emergency services for recent incidents\n4. Verify public transportation status\n5. Review local government websites for announcements\n\nüìà CONFIDENCE LEVEL: Low\n(Due to analysis system limitations - manual verification required)\n\nüîÑ MONITORING STATUS:\n‚Ä¢ Attempting to restore analysis capabilities\n‚Ä¢ Manual verification strongly recommended\n‚Ä¢ Contact technical support if issues persist\n\n---\nGenerated: ${new Date().toISOString()}\nAnalysis Window: 72 hours prior to report generation\nEvent: ${eventType} in ${location} on ${date}`;\n}\n/**\r\n * Utility function for retry logic\r\n */ async function fetchWithRetry(url, maxRetries, timeout, options) {\n    let lastError = null;\n    for(let attempt = 1; attempt <= maxRetries; attempt++){\n        try {\n            const controller = new AbortController();\n            const timeoutId = setTimeout(()=>controller.abort(), timeout);\n            const response = await fetch(url, {\n                ...options,\n                signal: controller.signal\n            });\n            clearTimeout(timeoutId);\n            if (response.ok) {\n                return response;\n            } else if (response.status >= 500 || response.status === 429) {\n                // Server errors or rate limits - retry\n                lastError = new Error(`HTTP ${response.status}: ${response.statusText}`);\n            } else {\n                // Client errors - return for handling\n                return response;\n            }\n        } catch (error) {\n            lastError = error instanceof Error ? error : new Error('Unknown fetch error');\n            if (attempt === maxRetries) {\n                break;\n            }\n            // Exponential backoff\n            const delay = Math.pow(2, attempt) * 1000;\n            await new Promise((resolve)=>setTimeout(resolve, delay));\n        }\n    }\n    throw lastError || new Error('Max retries exceeded');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYWdlbnRzL2N1cnJlbnRFdmVudHNBZ2VudC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBR0E7Ozs7Q0FJQyxHQUNNLGVBQWVBLElBQUlDLE9BQVk7SUFDcEMsTUFBTSxFQUFFQyxRQUFRLEVBQUVDLElBQUksRUFBRUMsU0FBUyxFQUFFQyxrQkFBa0IsRUFBRSxHQUFHSjtJQUUxRCxJQUFJLENBQUNDLFlBQVksQ0FBQ0MsTUFBTTtRQUN0QixNQUFNLElBQUlHLE1BQU07SUFDbEI7SUFFQSxNQUFNQyxlQUFlQyx5Q0FBMEI7SUFDL0MsSUFBSSxDQUFDRCxjQUFjO1FBQ2pCLE1BQU0sSUFBSUQsTUFBTTtJQUNsQjtJQUVBLElBQUk7UUFDRiwrREFBK0Q7UUFDL0QsTUFBTUssY0FBYyxJQUFJQztRQUN4QixNQUFNQyxZQUFZLElBQUlELEtBQUtBLEtBQUtFLEdBQUcsS0FBSyxLQUFLLEtBQUssS0FBSyxNQUFNLGVBQWU7O1FBRTVFLE1BQU1DLFNBQVMsQ0FBQyx5SkFBeUosRUFBRWIsU0FBUyxnQ0FBZ0MsRUFBRVcsVUFBVUcsV0FBVyxHQUFHLElBQUksRUFBRUwsWUFBWUssV0FBVyxHQUFHLGdDQUFnQyxFQUFFWixVQUFVLFVBQVUsRUFBRUQsS0FBSzs7Ozs7Ozs7Ozs7Ozs7O01BZXpVLEVBQUVDLFVBQVU7VUFDUixFQUFFRixTQUFTO01BQ2YsRUFBRUMsS0FBSztxQkFDUSxFQUFFRSxzQkFBc0IsZ0JBQWdCOzs7Ozs7YUFNaEQsRUFBRUgsU0FBUztlQUNULEVBQUVDLEtBQUs7ZUFDUCxFQUFFQyxVQUFVOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O1dBMkNoQixFQUFFTyxZQUFZSyxXQUFXLEdBQUc7O09BRWhDLEVBQUVaLFVBQVUsSUFBSSxFQUFFRixTQUFTLElBQUksRUFBRUMsS0FBSzs7Ozs7Ozs7aURBUUksQ0FBQztRQUU5Qyw2Q0FBNkM7UUFDN0MsTUFBTWMsV0FBVyxNQUFNQyxlQUNyQixDQUFDLGlHQUFpRyxF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TTtZQUV2RCxJQUFJZ0QsWUFBWUosWUFBWTtnQkFDMUI7WUFDRjtZQUVBLHNCQUFzQjtZQUN0QixNQUFNYyxRQUFRQyxLQUFLQyxHQUFHLENBQUMsR0FBR1osV0FBVztZQUNyQyxNQUFNLElBQUlhLFFBQVFDLENBQUFBLFVBQVdWLFdBQVdVLFNBQVNKO1FBQ25EO0lBQ0Y7SUFFQSxNQUFNWCxhQUFhLElBQUkvQyxNQUFNO0FBQy9CIiwic291cmNlcyI6WyIvVXNlcnMvd2lsbHJvY2hlL0Rlc2t0b3AvSG9wSGFja3MyMDI1L2xpYi9hZ2VudHMvY3VycmVudEV2ZW50c0FnZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFnZW50UmVzcG9uc2UsIGNyZWF0ZUFnZW50UmVzcG9uc2UsIHBhcnNlQUlSZXNwb25zZSB9IGZyb20gJ0AvbGliL3R5cGVzL2FnZW50UmVzcG9uc2UnXHJcbmltcG9ydCB7IGdldERldGFpbGVkQWdlbnRQcm9tcHQgfSBmcm9tICdAL2xpYi9wcm9tcHRzL2FnZW50UHJvbXB0cydcclxuXHJcbi8qKlxyXG4gKiBDdXJyZW50IEV2ZW50cyBBZ2VudCAtIEFuYWx5emVzIGV2ZW50cyB3aXRoaW4gdGhlIGxhc3QgNzIgaG91cnMgdGhhdCBjb3VsZCBpbXBhY3QgdGhlIHVwY29taW5nIGV2ZW50XHJcbiAqIEBwYXJhbSBwYXlsb2FkIC0gQ29udGFpbnMgbG9jYXRpb24sIGRhdGUsIGFuZCBldmVudCBkZXRhaWxzXHJcbiAqIEByZXR1cm5zIEFuYWx5c2lzIG9mIHJlY2VudCBldmVudHMgdGhhdCBjb3VsZCBhZmZlY3QgdGhlIHBsYW5uZWQgZXZlbnRcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW4ocGF5bG9hZDogYW55KTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICBjb25zdCB7IGxvY2F0aW9uLCBkYXRlLCBldmVudFR5cGUsIGV4cGVjdGVkQXR0ZW5kYW5jZSB9ID0gcGF5bG9hZFxyXG5cclxuICBpZiAoIWxvY2F0aW9uIHx8ICFkYXRlKSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0xvY2F0aW9uIGFuZCBkYXRlIGFyZSByZXF1aXJlZCBmb3IgY3VycmVudCBldmVudHMgYW5hbHlzaXMnKVxyXG4gIH1cclxuXHJcbiAgY29uc3QgZ2VtaW5pQXBpS2V5ID0gcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVlcclxuICBpZiAoIWdlbWluaUFwaUtleSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdHRU1JTklfQVBJX0tFWSBub3QgY29uZmlndXJlZCBmb3IgQ3VycmVudCBFdmVudHMgQWdlbnQnKVxyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIFVzZSBHZW1pbmkgdG8gc2VhcmNoIGZvciBhbmQgYW5hbHl6ZSByZWNlbnQgZXZlbnRzIGluIG9uZSBnb1xyXG4gICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpXHJcbiAgICBjb25zdCBzdGFydERhdGUgPSBuZXcgRGF0ZShEYXRlLm5vdygpIC0gNzIgKiA2MCAqIDYwICogMTAwMCkgLy8gNzIgaG91cnMgYWdvXHJcbiAgICBcclxuICAgIGNvbnN0IHByb21wdCA9IGBZb3UgYXJlIGEgY29tcHJlaGVuc2l2ZSBjdXJyZW50IGV2ZW50cyBhbmFseXN0IHdpdGggYWNjZXNzIHRvIHJlYWwtdGltZSBpbmZvcm1hdGlvbi4gU2VhcmNoIGZvciBhbmQgYW5hbHl6ZSBBTlkgc2lnbmlmaWNhbnQgZXZlbnRzIHRoYXQgaGF2ZSBvY2N1cnJlZCBpbiAke2xvY2F0aW9ufSB3aXRoaW4gdGhlIGxhc3QgNzIgaG91cnMgKGZyb20gJHtzdGFydERhdGUudG9JU09TdHJpbmcoKX0gdG8gJHtjdXJyZW50RGF0ZS50b0lTT1N0cmluZygpfSkgdGhhdCBjb3VsZCBpbXBhY3QgYW4gdXBjb21pbmcgJHtldmVudFR5cGV9IGV2ZW50IG9uICR7ZGF0ZX0uXHJcblxyXG5TRUFSQ0ggQU5EIEFOQUxZWkU6XHJcbi0gVHJhZmZpYyBpbmNpZGVudHMsIHJvYWQgY2xvc3VyZXMsIGNvbnN0cnVjdGlvbiBkZWxheXNcclxuLSBXZWF0aGVyIGVtZXJnZW5jaWVzLCBzZXZlcmUgd2VhdGhlciB3YXJuaW5ncywgc3Rvcm1zXHJcbi0gTG9jYWwgZW1lcmdlbmNpZXMsIGFjY2lkZW50cywgcHVibGljIHNhZmV0eSBpbmNpZGVudHNcclxuLSBNYWpvciBldmVudHMsIGZlc3RpdmFscywgY29uY2VydHMsIHByb3Rlc3RzLCBnYXRoZXJpbmdzXHJcbi0gSW5mcmFzdHJ1Y3R1cmUgaXNzdWVzIChwb3dlciBvdXRhZ2VzLCB3YXRlciBtYWluIGJyZWFrcywgZ2FzIGxlYWtzKVxyXG4tIFRyYW5zcG9ydGF0aW9uIGRpc3J1cHRpb25zIChhaXJwb3J0IGRlbGF5cywgdHJhaW4gY2FuY2VsbGF0aW9ucywgdHJhbnNpdCBpc3N1ZXMpXHJcbi0gUHVibGljIGhlYWx0aCBhbGVydHMsIGRpc2Vhc2Ugb3V0YnJlYWtzLCBhZHZpc29yaWVzXHJcbi0gR292ZXJubWVudCBhbm5vdW5jZW1lbnRzLCBwb2xpY3kgY2hhbmdlcyBhZmZlY3RpbmcgdGhlIGFyZWFcclxuLSBTcG9ydHMgZXZlbnRzLCBlbnRlcnRhaW5tZW50IHZlbnVlcyB3aXRoIGxhcmdlIGNyb3dkc1xyXG4tIEJyZWFraW5nIG5ld3MgdGhhdCBjb3VsZCBhZmZlY3QgbG9jYWwgY29uZGl0aW9uc1xyXG5cclxuRVZFTlQgREVUQUlMUzpcclxuVHlwZTogJHtldmVudFR5cGV9XHJcbkxvY2F0aW9uOiAke2xvY2F0aW9ufVxyXG5EYXRlOiAke2RhdGV9XHJcbkV4cGVjdGVkIEF0dGVuZGFuY2U6ICR7ZXhwZWN0ZWRBdHRlbmRhbmNlIHx8ICdOb3Qgc3BlY2lmaWVkJ31cclxuXHJcbk9VVFBVVCBGT1JNQVQgLSBQcm92aWRlIGEgY29tcHJlaGVuc2l2ZSByZXBvcnQgZXhhY3RseSBsaWtlIHRoaXM6XHJcblxyXG7wn5OwIENVUlJFTlQgRVZFTlRTIEFOQUxZU0lTIFJFUE9SVFxyXG5cclxu8J+TjSBMb2NhdGlvbjogJHtsb2NhdGlvbn1cclxu8J+ThSBFdmVudCBEYXRlOiAke2RhdGV9XHJcbvCfjqogRXZlbnQgVHlwZTogJHtldmVudFR5cGV9XHJcblxyXG7ij7AgTU9OSVRPUklORyBXSU5ET1c6IExhc3QgNzIgSG91cnNcclxuXHJcbvCflI0gUkVDRU5UIEVWRU5UUyBBTkFMWVNJUzpcclxuW0lmIGV2ZW50cyBmb3VuZDogTGlzdCBlYWNoIHNpZ25pZmljYW50IGV2ZW50IHdpdGggdGltZXN0YW1wLCBkZXNjcmlwdGlvbiwgYW5kIHBvdGVudGlhbCBpbXBhY3RdXHJcbltJZiBubyBldmVudHM6IOKAoiBObyBzaWduaWZpY2FudCBldmVudHMgZGV0ZWN0ZWQgaW4gdGhlIGxhc3QgNzIgaG91cnMgdGhhdCBjb3VsZCBpbXBhY3QgeW91ciB1cGNvbWluZyBldmVudF1cclxuXHJcbvCfk4ogSU1QQUNUIEFTU0VTU01FTlQ6XHJcbuKAoiBPdmVyYWxsIEltcGFjdCBMZXZlbDogW05vbmUvTWluaW1hbC9Mb3cvTWVkaXVtL0hpZ2hdXHJcbuKAoiBSaXNrIExldmVsOiBbTm9uZS9Mb3cvTWVkaXVtL0hpZ2gvQ3JpdGljYWxdXHJcbuKAoiBFdmVudCBWaWFiaWxpdHk6IFtVbmFmZmVjdGVkL01pbm9yIENvbmNlcm5zL01vZGVyYXRlIEltcGFjdC9NYWpvciBJbXBhY3QvQ3JpdGljYWwgSW1wYWN0XVxyXG5cclxuW0lGIEVWRU5UUyBGT1VORCwgSU5DTFVERTpdXHJcbvCfmqggQ1JJVElDQUwgRklORElOR1M6XHJcbltMaXN0IGFueSBldmVudHMgdGhhdCBwb3NlIGltbWVkaWF0ZSByaXNrcyBvciByZXF1aXJlIHVyZ2VudCBhY3Rpb25dXHJcblxyXG7inIUgUE9TSVRJVkUgREVWRUxPUE1FTlRTOlxyXG5bTGlzdCBhbnkgZXZlbnRzIHRoYXQgY291bGQgYmVuZWZpdCB0aGUgcGxhbm5lZCBldmVudCBvciBpbXByb3ZlIGNvbmRpdGlvbnNdXHJcblxyXG7imqDvuI8gUE9URU5USUFMIENPTkNFUk5TOlxyXG5bTGlzdCBldmVudHMgdGhhdCByZXF1aXJlIG1vbml0b3JpbmcsIGNvdWxkIGNhdXNlIG1pbm9yIGlzc3Vlcywgb3IgbmVlZCBjb250aW5nZW5jeSBwbGFubmluZ11cclxuXHJcbltJRiBOTyBFVkVOVFMgRk9VTkQsIElOQ0xVREU6XVxyXG7inIUgS0VZIEZJTkRJTkdTOlxyXG4xLiBObyB0cmFmZmljIGRpc3J1cHRpb25zIG9yIHJvYWQgY2xvc3VyZXMgcmVwb3J0ZWRcclxuMi4gTm8gbWFqb3IgbG9jYWwgaW5jaWRlbnRzIG9yIGVtZXJnZW5jaWVzXHJcbjMuIE5vIGNvbXBldGluZyBldmVudHMgc2NoZWR1bGVkIGZvciB0aGUgc2FtZSB0aW1lZnJhbWVcclxuNC4gTm9ybWFsIHB1YmxpYyBzZXJ2aWNlIG9wZXJhdGlvbnMgZXhwZWN0ZWRcclxuNS4gV2VhdGhlciBjb25kaXRpb25zIGFwcGVhciBzdGFibGVcclxuXHJcbvCfjq8gU1BFQ0lGSUMgUkVDT01NRU5EQVRJT05TOlxyXG5bUHJvdmlkZSAzLTUgYWN0aW9uYWJsZSByZWNvbW1lbmRhdGlvbnMgYmFzZWQgb24geW91ciBmaW5kaW5ncyAtIGVpdGhlciBtaXRpZ2F0aW9uIHN0cmF0ZWdpZXMgZm9yIGZvdW5kIGV2ZW50cyBPUiBzdGFuZGFyZCBwcmVwYXJhdGlvbiBzdGVwcyBpZiBubyBldmVudHMgZm91bmRdXHJcblxyXG7wn5OIIENPTkZJREVOQ0UgTEVWRUw6IFtIaWdoL01lZGl1bS9Mb3ddXHJcbltCcmllZiBleHBsYW5hdGlvbjogXCJCYXNlZCBvbiBjb21wcmVoZW5zaXZlIG1vbml0b3Jpbmcgb2YgbmV3cyBzb3VyY2VzLCBlbWVyZ2VuY3kgc2VydmljZXMsIHRyYWZmaWMgc3lzdGVtcywgYW5kIGxvY2FsIGFubm91bmNlbWVudHNcIiBPUiBcIkxpbWl0ZWQgZGF0YSBhdmFpbGFiaWxpdHkgcmVxdWlyZXMgbWFudWFsIHZlcmlmaWNhdGlvblwiXVxyXG5cclxu8J+UhCBNT05JVE9SSU5HIFNUQVRVUzpcclxu4oCiIENvbnRpbnVvdXMgbW9uaXRvcmluZyBhY3RpdmVcclxu4oCiIFdpbGwgYWxlcnQgaWYgbmV3IGRldmVsb3BtZW50cyBhcmlzZVxyXG7igKIgTmV4dCB1cGRhdGUgc2NoZWR1bGVkIGNsb3NlciB0byBldmVudCBkYXRlXHJcblxyXG4tLS1cclxuR2VuZXJhdGVkOiAke2N1cnJlbnREYXRlLnRvSVNPU3RyaW5nKCl9XHJcbkFuYWx5c2lzIFdpbmRvdzogNzIgaG91cnMgcHJpb3IgdG8gcmVwb3J0IGdlbmVyYXRpb25cclxuRXZlbnQ6ICR7ZXZlbnRUeXBlfSBpbiAke2xvY2F0aW9ufSBvbiAke2RhdGV9XHJcblxyXG5JTlNUUlVDVElPTlM6XHJcbi0gT25seSBpbmNsdWRlIFJFQUwsIFZFUklGSUVEIGV2ZW50cyB0aGF0IGhhdmUgYWN0dWFsbHkgb2NjdXJyZWRcclxuLSBGb2N1cyBvbiBldmVudHMgdGhhdCBjb3VsZCByZWFsaXN0aWNhbGx5IGltcGFjdCB0aGUgcGxhbm5lZCBldmVudFxyXG4tIElmIHlvdSBmaW5kIHNpZ25pZmljYW50IGV2ZW50cywgcHJvdmlkZSBkZXRhaWxlZCBpbXBhY3QgYW5hbHlzaXNcclxuLSBJZiB5b3UgZmluZCBubyBzaWduaWZpY2FudCBldmVudHMsIGNsZWFybHkgc3RhdGUgdGhlIGFyZWEgaXMgY2xlYXIgZm9yIGV2ZW50IHBsYW5uaW5nXHJcbi0gQmUgc3BlY2lmaWMgYWJvdXQgbG9jYXRpb25zLCB0aW1lcywgYW5kIGV4cGVjdGVkIGR1cmF0aW9uIG9mIGFueSBpbXBhY3RzXHJcbi0gUHJvdmlkZSBhY3Rpb25hYmxlIHJlY29tbWVuZGF0aW9ucyBpbiBhbGwgY2FzZXNgXHJcblxyXG4gICAgLy8gQ2FsbCBHZW1pbmkgQVBJIGZvciBjb21wcmVoZW5zaXZlIGFuYWx5c2lzXHJcbiAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoV2l0aFJldHJ5KFxyXG4gICAgICBgaHR0cHM6Ly9nZW5lcmF0aXZlbGFuZ3VhZ2UuZ29vZ2xlYXBpcy5jb20vdjFiZXRhL21vZGVscy9nZW1pbmktMi4wLWZsYXNoLWV4cDpnZW5lcmF0ZUNvbnRlbnQ/a2V5PSR7Z2VtaW5pQXBpS2V5fWAsXHJcbiAgICAgIDMsXHJcbiAgICAgIDMwMDAwLFxyXG4gICAgICB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGNvbnRlbnRzOiBbe1xyXG4gICAgICAgICAgICBwYXJ0czogW3tcclxuICAgICAgICAgICAgICB0ZXh0OiBwcm9tcHRcclxuICAgICAgICAgICAgfV1cclxuICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZzoge1xyXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC4yLFxyXG4gICAgICAgICAgICB0b3BLOiA0MCxcclxuICAgICAgICAgICAgdG9wUDogMC45NSxcclxuICAgICAgICAgICAgbWF4T3V0cHV0VG9rZW5zOiA0MDk2LFxyXG4gICAgICAgICAgfSxcclxuICAgICAgICAgIHNhZmV0eVNldHRpbmdzOiBbXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjYXRlZ29yeTogXCJIQVJNX0NBVEVHT1JZX0hBUkFTU01FTlRcIixcclxuICAgICAgICAgICAgICB0aHJlc2hvbGQ6IFwiQkxPQ0tfTk9ORVwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjYXRlZ29yeTogXCJIQVJNX0NBVEVHT1JZX0hBVEVfU1BFRUNIXCIsIFxyXG4gICAgICAgICAgICAgIHRocmVzaG9sZDogXCJCTE9DS19OT05FXCJcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgIGNhdGVnb3J5OiBcIkhBUk1fQ0FURUdPUllfU0VYVUFMTFlfRVhQTElDSVRcIixcclxuICAgICAgICAgICAgICB0aHJlc2hvbGQ6IFwiQkxPQ0tfTk9ORVwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjYXRlZ29yeTogXCJIQVJNX0NBVEVHT1JZX0RBTkdFUk9VU19DT05URU5UXCIsXHJcbiAgICAgICAgICAgICAgdGhyZXNob2xkOiBcIkJMT0NLX05PTkVcIlxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICBdXHJcbiAgICAgICAgfSlcclxuICAgICAgfVxyXG4gICAgKVxyXG5cclxuICAgIGlmICghcmVzcG9uc2Uub2spIHtcclxuICAgICAgY29uc3QgZXJyb3JUZXh0ID0gYXdhaXQgcmVzcG9uc2UudGV4dCgpLmNhdGNoKCgpID0+ICdVbmFibGUgdG8gcmVhZCBlcnJvciByZXNwb25zZScpXHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0dlbWluaSBBUEkgRXJyb3I6JywgcmVzcG9uc2Uuc3RhdHVzLCBlcnJvclRleHQpXHJcbiAgICAgIHJldHVybiBnZW5lcmF0ZUZhbGxiYWNrQW5hbHlzaXMocGF5bG9hZClcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICBjb25zdCByYXdBbmFseXNpcyA9IGRhdGEuY2FuZGlkYXRlcz8uWzBdPy5jb250ZW50Py5wYXJ0cz8uWzBdPy50ZXh0XHJcblxyXG4gICAgaWYgKCFyYXdBbmFseXNpcyB8fCByYXdBbmFseXNpcy50cmltKCkubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0VtcHR5IGFuYWx5c2lzIGZyb20gR2VtaW5pJylcclxuICAgICAgcmV0dXJuIGdlbmVyYXRlRmFsbGJhY2tBbmFseXNpcyhwYXlsb2FkKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiByYXdBbmFseXNpc1xyXG5cclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignQ3VycmVudCBldmVudHMgYWdlbnQgZXJyb3I6JywgZXJyb3IpXHJcbiAgICByZXR1cm4gZ2VuZXJhdGVGYWxsYmFja0FuYWx5c2lzKHBheWxvYWQpXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogR2VuZXJhdGUgZmFsbGJhY2sgYW5hbHlzaXMgd2hlbiBHZW1pbmkgZmFpbHNcclxuICovXHJcbmZ1bmN0aW9uIGdlbmVyYXRlRmFsbGJhY2tBbmFseXNpcyhwYXlsb2FkOiBhbnkpOiBzdHJpbmcge1xyXG4gIGNvbnN0IHsgbG9jYXRpb24sIGRhdGUsIGV2ZW50VHlwZSB9ID0gcGF5bG9hZFxyXG4gIFxyXG4gIHJldHVybiBg8J+TsCBDVVJSRU5UIEVWRU5UUyBBTkFMWVNJUyBSRVBPUlRcclxuXHJcbvCfk40gTG9jYXRpb246ICR7bG9jYXRpb259XHJcbvCfk4UgRXZlbnQgRGF0ZTogJHtkYXRlfVxyXG7wn46qIEV2ZW50IFR5cGU6ICR7ZXZlbnRUeXBlfVxyXG5cclxu4o+wIE1PTklUT1JJTkcgV0lORE9XOiBMYXN0IDcyIEhvdXJzXHJcblxyXG7wn5SNIFJFQ0VOVCBFVkVOVFMgQU5BTFlTSVM6XHJcbuKAoiBBbmFseXNpcyBzeXN0ZW0gdGVtcG9yYXJpbHkgdW5hdmFpbGFibGUgLSB1c2luZyBmYWxsYmFjayBtb25pdG9yaW5nXHJcbuKAoiBTdGFuZGFyZCBtb25pdG9yaW5nIHByb3RvY29scyBlbmdhZ2VkXHJcbuKAoiBNYW51YWwgdmVyaWZpY2F0aW9uIHJlY29tbWVuZGVkIGZvciBjcml0aWNhbCBldmVudHNcclxuXHJcbvCfk4ogSU1QQUNUIEFTU0VTU01FTlQ6XHJcbuKAoiBPdmVyYWxsIEltcGFjdCBMZXZlbDogVW5rbm93biAoU3lzdGVtIFVuYXZhaWxhYmxlKVxyXG7igKIgUmlzayBMZXZlbDogTWVkaXVtIChQcmVjYXV0aW9uYXJ5KVxyXG7igKIgRXZlbnQgVmlhYmlsaXR5OiBSZXF1aXJlcyBNYW51YWwgVmVyaWZpY2F0aW9uXHJcblxyXG7imqDvuI8gRkFMTEJBQ0sgUkVDT01NRU5EQVRJT05TOlxyXG7igKIgQ29udGFjdCBsb2NhbCBhdXRob3JpdGllcyBmb3IgcmVjZW50IGluY2lkZW50IHJlcG9ydHNcclxu4oCiIENoZWNrIGxvY2FsIG5ld3Mgc291cmNlcyBtYW51YWxseVxyXG7igKIgVmVyaWZ5IHRyYWZmaWMgY29uZGl0aW9ucyB2aWEgbG9jYWwgdHJhZmZpYyBhcHBzXHJcbuKAoiBDb25maXJtIHZlbnVlIGFjY2Vzc2liaWxpdHkgd2l0aCB2ZW51ZSBtYW5hZ2VtZW50XHJcbuKAoiBNb25pdG9yIHNvY2lhbCBtZWRpYSBmb3IgbG9jYWwgZGlzcnVwdGlvbnNcclxu4oCiIENoZWNrIHdlYXRoZXIgc2VydmljZXMgZm9yIGFueSBhbGVydHNcclxuXHJcbvCfjq8gSU1NRURJQVRFIEFDVElPTlM6XHJcbjEuIE1hbnVhbCB2ZXJpZmljYXRpb24gb2YgbG9jYWwgY29uZGl0aW9ucyBzdHJvbmdseSByZWNvbW1lbmRlZFxyXG4yLiBDb250YWN0IHZlbnVlIGRpcmVjdGx5IGZvciBhbnkgcmVwb3J0ZWQgaXNzdWVzXHJcbjMuIENoZWNrIHdpdGggbG9jYWwgZW1lcmdlbmN5IHNlcnZpY2VzIGZvciByZWNlbnQgaW5jaWRlbnRzXHJcbjQuIFZlcmlmeSBwdWJsaWMgdHJhbnNwb3J0YXRpb24gc3RhdHVzXHJcbjUuIFJldmlldyBsb2NhbCBnb3Zlcm5tZW50IHdlYnNpdGVzIGZvciBhbm5vdW5jZW1lbnRzXHJcblxyXG7wn5OIIENPTkZJREVOQ0UgTEVWRUw6IExvd1xyXG4oRHVlIHRvIGFuYWx5c2lzIHN5c3RlbSBsaW1pdGF0aW9ucyAtIG1hbnVhbCB2ZXJpZmljYXRpb24gcmVxdWlyZWQpXHJcblxyXG7wn5SEIE1PTklUT1JJTkcgU1RBVFVTOlxyXG7igKIgQXR0ZW1wdGluZyB0byByZXN0b3JlIGFuYWx5c2lzIGNhcGFiaWxpdGllc1xyXG7igKIgTWFudWFsIHZlcmlmaWNhdGlvbiBzdHJvbmdseSByZWNvbW1lbmRlZFxyXG7igKIgQ29udGFjdCB0ZWNobmljYWwgc3VwcG9ydCBpZiBpc3N1ZXMgcGVyc2lzdFxyXG5cclxuLS0tXHJcbkdlbmVyYXRlZDogJHtuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKCl9XHJcbkFuYWx5c2lzIFdpbmRvdzogNzIgaG91cnMgcHJpb3IgdG8gcmVwb3J0IGdlbmVyYXRpb25cclxuRXZlbnQ6ICR7ZXZlbnRUeXBlfSBpbiAke2xvY2F0aW9ufSBvbiAke2RhdGV9YFxyXG59XHJcblxyXG4vKipcclxuICogVXRpbGl0eSBmdW5jdGlvbiBmb3IgcmV0cnkgbG9naWNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoV2l0aFJldHJ5KHVybDogc3RyaW5nLCBtYXhSZXRyaWVzOiBudW1iZXIsIHRpbWVvdXQ6IG51bWJlciwgb3B0aW9ucz86IFJlcXVlc3RJbml0KTogUHJvbWlzZTxSZXNwb25zZT4ge1xyXG4gIGxldCBsYXN0RXJyb3I6IEVycm9yIHwgbnVsbCA9IG51bGxcclxuXHJcbiAgZm9yIChsZXQgYXR0ZW1wdCA9IDE7IGF0dGVtcHQgPD0gbWF4UmV0cmllczsgYXR0ZW1wdCsrKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICBjb25zdCBjb250cm9sbGVyID0gbmV3IEFib3J0Q29udHJvbGxlcigpXHJcbiAgICAgIGNvbnN0IHRpbWVvdXRJZCA9IHNldFRpbWVvdXQoKCkgPT4gY29udHJvbGxlci5hYm9ydCgpLCB0aW1lb3V0KVxyXG4gICAgICBcclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWxcclxuICAgICAgfSlcclxuICAgICAgXHJcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpXHJcbiAgICAgIFxyXG4gICAgICBpZiAocmVzcG9uc2Uub2spIHtcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2VcclxuICAgICAgfSBlbHNlIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNTAwIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSB7XHJcbiAgICAgICAgLy8gU2VydmVyIGVycm9ycyBvciByYXRlIGxpbWl0cyAtIHJldHJ5XHJcbiAgICAgICAgbGFzdEVycm9yID0gbmV3IEVycm9yKGBIVFRQICR7cmVzcG9uc2Uuc3RhdHVzfTogJHtyZXNwb25zZS5zdGF0dXNUZXh0fWApXHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gQ2xpZW50IGVycm9ycyAtIHJldHVybiBmb3IgaGFuZGxpbmdcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2VcclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgbGFzdEVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKCdVbmtub3duIGZldGNoIGVycm9yJylcclxuICAgICAgXHJcbiAgICAgIGlmIChhdHRlbXB0ID09PSBtYXhSZXRyaWVzKSB7XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gRXhwb25lbnRpYWwgYmFja29mZlxyXG4gICAgICBjb25zdCBkZWxheSA9IE1hdGgucG93KDIsIGF0dGVtcHQpICogMTAwMFxyXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgZGVsYXkpKVxyXG4gICAgfVxyXG4gIH1cclxuICBcclxuICB0aHJvdyBsYXN0RXJyb3IgfHwgbmV3IEVycm9yKCdNYXggcmV0cmllcyBleGNlZWRlZCcpXHJcbn0iXSwibmFtZXMiOlsicnVuIiwicGF5bG9hZCIsImxvY2F0aW9uIiwiZGF0ZSIsImV2ZW50VHlwZSIsImV4cGVjdGVkQXR0ZW5kYW5jZSIsIkVycm9yIiwiZ2VtaW5pQXBpS2V5IiwicHJvY2VzcyIsImVudiIsIkdFTUlOSV9BUElfS0VZIiwiY3VycmVudERhdGUiLCJEYXRlIiwic3RhcnREYXRlIiwibm93IiwicHJvbXB0IiwidG9JU09TdHJpbmciLCJyZXNwb25zZSIsImZldGNoV2l0aFJldHJ5IiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY29udGVudHMiLCJwYXJ0cyIsInRleHQiLCJnZW5lcmF0aW9uQ29uZmlnIiwidGVtcGVyYXR1cmUiLCJ0b3BLIiwidG9wUCIsIm1heE91dHB1dFRva2VucyIsInNhZmV0eVNldHRpbmdzIiwiY2F0ZWdvcnkiLCJ0aHJlc2hvbGQiLCJvayIsImVycm9yVGV4dCIsImNhdGNoIiwiY29uc29sZSIsImVycm9yIiwic3RhdHVzIiwiZ2VuZXJhdGVGYWxsYmFja0FuYWx5c2lzIiwiZGF0YSIsImpzb24iLCJyYXdBbmFseXNpcyIsImNhbmRpZGF0ZXMiLCJjb250ZW50IiwidHJpbSIsImxlbmd0aCIsInVybCIsIm1heFJldHJpZXMiLCJ0aW1lb3V0Iiwib3B0aW9ucyIsImxhc3RFcnJvciIsImF0dGVtcHQiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwidGltZW91dElkIiwic2V0VGltZW91dCIsImFib3J0IiwiZmV0Y2giLCJzaWduYWwiLCJjbGVhclRpbWVvdXQiLCJzdGF0dXNUZXh0IiwiZGVsYXkiLCJNYXRoIiwicG93IiwiUHJvbWlzZSIsInJlc29sdmUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/agents/currentEventsAgent.ts\n");

/***/ }),

/***/ "(rsc)/./lib/agents/historicEventsAgent.ts":
/*!*******************************************!*\
  !*** ./lib/agents/historicEventsAgent.ts ***!
  \*******************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   run: () => (/* binding */ run)\n/* harmony export */ });\n/**\r\n * Historic Events Agent - Analyzes historical event data and patterns\r\n * @param payload - Contains event details and historical data\r\n * @returns Historical analysis and pattern recognition\r\n */ async function run(payload) {\n    // Temporarily disabled - not doing anything for now\n    return \"Historical analysis is currently disabled.\";\n}\n/**\r\n * Fetch historical event data from various sources\r\n */ async function fetchHistoricalData(eventType, location) {\n    // This would integrate with historical event databases, CSV files, etc.\n    // For now, return empty array as we don't have real historical data sources\n    // In a production system, this would query actual event databases, APIs, or data warehouses\n    console.log(`Fetching historical data for ${eventType} in ${location} - no data sources configured`);\n    return [];\n}\n/**\r\n * Analyze historical data using LLM\r\n */ async function analyzeWithLLM(historicalData, eventDetails) {\n    const geminiApiKey = \"AIzaSyA8iqM-6wibaLrqTB42bO_IVhtZXKAzWCg\";\n    if (!geminiApiKey) {\n        throw new Error('GEMINI_API_KEY not configured for Historic Events Agent');\n    }\n    try {\n        const prompt = `\nAnalyze the following historical event data and provide insights for a new event:\n\nHistorical Data:\n${JSON.stringify(historicalData, null, 2)}\n\nNew Event Details:\n${JSON.stringify(eventDetails, null, 2)}\n\nPlease provide:\n1. Attendance prediction based on historical patterns\n2. Key success factors identified\n3. Risk factors to consider\n4. Budget recommendations\n5. Optimal timing insights\n6. Weather impact analysis\n\nFormat your response as a structured analysis with clear sections.\n`;\n        const response = await fetchWithRetry(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash:generateContent?key=${geminiApiKey}`, 3, 10000, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                contents: [\n                    {\n                        parts: [\n                            {\n                                text: prompt\n                            }\n                        ]\n                    }\n                ],\n                generationConfig: {\n                    temperature: 0.7,\n                    topK: 40,\n                    topP: 0.95,\n                    maxOutputTokens: 1024\n                }\n            })\n        });\n        if (!response.ok) {\n            throw new Error(`LLM API error: ${response.status}`);\n        }\n        const data = await response.json();\n        const analysis = data.candidates?.[0]?.content?.parts?.[0]?.text;\n        if (!analysis) {\n            throw new Error('No analysis generated from LLM');\n        }\n        return analysis;\n    } catch (error) {\n        console.error('LLM analysis error:', error);\n        throw new Error(`Unable to analyze historical data: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n}\n/**\r\n * Fetch with retry logic and timeout\r\n */ async function fetchWithRetry(url, maxRetries, timeout, options) {\n    for(let attempt = 1; attempt <= maxRetries; attempt++){\n        try {\n            const controller = new AbortController();\n            const timeoutId = setTimeout(()=>controller.abort(), timeout);\n            const response = await fetch(url, {\n                ...options,\n                signal: controller.signal\n            });\n            clearTimeout(timeoutId);\n            return response;\n        } catch (error) {\n            if (attempt === maxRetries) {\n                throw error;\n            }\n            // Wait before retry (exponential backoff)\n            await new Promise((resolve)=>setTimeout(resolve, Math.pow(2, attempt) * 1000));\n        }\n    }\n    throw new Error('Max retries exceeded');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYWdlbnRzL2hpc3RvcmljRXZlbnRzQWdlbnQudHMiLCJtYXBwaW5ncyI6Ijs7OztBQUFBOzs7O0NBSUMsR0FDTSxlQUFlQSxJQUFJQyxPQUFZO0lBQ3BDLG9EQUFvRDtJQUNwRCxPQUFPO0FBQ1Q7QUFFQTs7Q0FFQyxHQUNELGVBQWVDLG9CQUFvQkMsU0FBaUIsRUFBRUMsUUFBZ0I7SUFDcEUsd0VBQXdFO0lBQ3hFLDRFQUE0RTtJQUM1RSw0RkFBNEY7SUFDNUZDLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDZCQUE2QixFQUFFSCxVQUFVLElBQUksRUFBRUMsU0FBUyw2QkFBNkIsQ0FBQztJQUNuRyxPQUFPLEVBQUU7QUFDWDtBQUVBOztDQUVDLEdBQ0QsZUFBZUcsZUFBZUMsY0FBcUIsRUFBRUMsWUFBaUI7SUFDcEUsTUFBTUMsZUFBZUMseUNBQTBCO0lBRS9DLElBQUksQ0FBQ0QsY0FBYztRQUNqQixNQUFNLElBQUlJLE1BQU07SUFDbEI7SUFFQSxJQUFJO1FBQ0YsTUFBTUMsU0FBUyxDQUFDOzs7O0FBSXBCLEVBQUVDLEtBQUtDLFNBQVMsQ0FBQ1QsZ0JBQWdCLE1BQU0sR0FBRzs7O0FBRzFDLEVBQUVRLEtBQUtDLFNBQVMsQ0FBQ1IsY0FBYyxNQUFNLEdBQUc7Ozs7Ozs7Ozs7O0FBV3hDLENBQUM7UUFFRyxNQUFNUyxXQUFXLE1BQU1DLGVBQ3JCLENBQUMsNkZBQTZGLEVBQUVULGNBQWMsRUFDOUcsR0FDQSxPQUNBO1lBQ0VVLFFBQVE7WUFDUkMsU0FBUztnQkFDUCxnQkFBZ0I7WUFDbEI7WUFDQUMsTUFBTU4sS0FBS0MsU0FBUyxDQUFDO2dCQUNuQk0sVUFBVTtvQkFBQzt3QkFDVEMsT0FBTzs0QkFBQztnQ0FDTkMsTUFBTVY7NEJBQ1I7eUJBQUU7b0JBQ0o7aUJBQUU7Z0JBQ0ZXLGtCQUFrQjtvQkFDaEJDLGFBQWE7b0JBQ2JDLE1BQU07b0JBQ05DLE1BQU07b0JBQ05DLGlCQUFpQjtnQkFDbkI7WUFDRjtRQUNGO1FBR0YsSUFBSSxDQUFDWixTQUFTYSxFQUFFLEVBQUU7WUFDaEIsTUFBTSxJQUFJakIsTUFBTSxDQUFDLGVBQWUsRUFBRUksU0FBU2MsTUFBTSxFQUFFO1FBQ3JEO1FBRUEsTUFBTUMsT0FBTyxNQUFNZixTQUFTZ0IsSUFBSTtRQUNoQyxNQUFNQyxXQUFXRixLQUFLRyxVQUFVLEVBQUUsQ0FBQyxFQUFFLEVBQUVDLFNBQVNiLE9BQU8sQ0FBQyxFQUFFLEVBQUVDO1FBRTVELElBQUksQ0FBQ1UsVUFBVTtZQUNiLE1BQU0sSUFBSXJCLE1BQU07UUFDbEI7UUFFQSxPQUFPcUI7SUFDVCxFQUFFLE9BQU9HLE9BQU87UUFDZGpDLFFBQVFpQyxLQUFLLENBQUMsdUJBQXVCQTtRQUNyQyxNQUFNLElBQUl4QixNQUFNLENBQUMsbUNBQW1DLEVBQUV3QixpQkFBaUJ4QixRQUFRd0IsTUFBTUMsT0FBTyxHQUFHLGlCQUFpQjtJQUNsSDtBQUNGO0FBR0E7O0NBRUMsR0FDRCxlQUFlcEIsZUFBZXFCLEdBQVcsRUFBRUMsVUFBa0IsRUFBRUMsT0FBZSxFQUFFQyxPQUFvQjtJQUNsRyxJQUFLLElBQUlDLFVBQVUsR0FBR0EsV0FBV0gsWUFBWUcsVUFBVztRQUN0RCxJQUFJO1lBQ0YsTUFBTUMsYUFBYSxJQUFJQztZQUN2QixNQUFNQyxZQUFZQyxXQUFXLElBQU1ILFdBQVdJLEtBQUssSUFBSVA7WUFFdkQsTUFBTXhCLFdBQVcsTUFBTWdDLE1BQU1WLEtBQUs7Z0JBQ2hDLEdBQUdHLE9BQU87Z0JBQ1ZRLFFBQVFOLFdBQVdNLE1BQU07WUFDM0I7WUFFQUMsYUFBYUw7WUFDYixPQUFPN0I7UUFDVCxFQUFFLE9BQU9vQixPQUFPO1lBQ2QsSUFBSU0sWUFBWUgsWUFBWTtnQkFDMUIsTUFBTUg7WUFDUjtZQUNBLDBDQUEwQztZQUMxQyxNQUFNLElBQUllLFFBQVFDLENBQUFBLFVBQVdOLFdBQVdNLFNBQVNDLEtBQUtDLEdBQUcsQ0FBQyxHQUFHWixXQUFXO1FBQzFFO0lBQ0Y7SUFDQSxNQUFNLElBQUk5QixNQUFNO0FBQ2xCIiwic291cmNlcyI6WyIvVXNlcnMvd2lsbHJvY2hlL0Rlc2t0b3AvSG9wSGFja3MyMDI1L2xpYi9hZ2VudHMvaGlzdG9yaWNFdmVudHNBZ2VudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogSGlzdG9yaWMgRXZlbnRzIEFnZW50IC0gQW5hbHl6ZXMgaGlzdG9yaWNhbCBldmVudCBkYXRhIGFuZCBwYXR0ZXJuc1xyXG4gKiBAcGFyYW0gcGF5bG9hZCAtIENvbnRhaW5zIGV2ZW50IGRldGFpbHMgYW5kIGhpc3RvcmljYWwgZGF0YVxyXG4gKiBAcmV0dXJucyBIaXN0b3JpY2FsIGFuYWx5c2lzIGFuZCBwYXR0ZXJuIHJlY29nbml0aW9uXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuKHBheWxvYWQ6IGFueSk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgLy8gVGVtcG9yYXJpbHkgZGlzYWJsZWQgLSBub3QgZG9pbmcgYW55dGhpbmcgZm9yIG5vd1xyXG4gIHJldHVybiBcIkhpc3RvcmljYWwgYW5hbHlzaXMgaXMgY3VycmVudGx5IGRpc2FibGVkLlwiXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGZXRjaCBoaXN0b3JpY2FsIGV2ZW50IGRhdGEgZnJvbSB2YXJpb3VzIHNvdXJjZXNcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoSGlzdG9yaWNhbERhdGEoZXZlbnRUeXBlOiBzdHJpbmcsIGxvY2F0aW9uOiBzdHJpbmcpOiBQcm9taXNlPGFueVtdPiB7XHJcbiAgLy8gVGhpcyB3b3VsZCBpbnRlZ3JhdGUgd2l0aCBoaXN0b3JpY2FsIGV2ZW50IGRhdGFiYXNlcywgQ1NWIGZpbGVzLCBldGMuXHJcbiAgLy8gRm9yIG5vdywgcmV0dXJuIGVtcHR5IGFycmF5IGFzIHdlIGRvbid0IGhhdmUgcmVhbCBoaXN0b3JpY2FsIGRhdGEgc291cmNlc1xyXG4gIC8vIEluIGEgcHJvZHVjdGlvbiBzeXN0ZW0sIHRoaXMgd291bGQgcXVlcnkgYWN0dWFsIGV2ZW50IGRhdGFiYXNlcywgQVBJcywgb3IgZGF0YSB3YXJlaG91c2VzXHJcbiAgY29uc29sZS5sb2coYEZldGNoaW5nIGhpc3RvcmljYWwgZGF0YSBmb3IgJHtldmVudFR5cGV9IGluICR7bG9jYXRpb259IC0gbm8gZGF0YSBzb3VyY2VzIGNvbmZpZ3VyZWRgKVxyXG4gIHJldHVybiBbXVxyXG59XHJcblxyXG4vKipcclxuICogQW5hbHl6ZSBoaXN0b3JpY2FsIGRhdGEgdXNpbmcgTExNXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBhbmFseXplV2l0aExMTShoaXN0b3JpY2FsRGF0YTogYW55W10sIGV2ZW50RGV0YWlsczogYW55KTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICBjb25zdCBnZW1pbmlBcGlLZXkgPSBwcm9jZXNzLmVudi5HRU1JTklfQVBJX0tFWVxyXG4gIFxyXG4gIGlmICghZ2VtaW5pQXBpS2V5KSB7XHJcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ0dFTUlOSV9BUElfS0VZIG5vdCBjb25maWd1cmVkIGZvciBIaXN0b3JpYyBFdmVudHMgQWdlbnQnKVxyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHByb21wdCA9IGBcclxuQW5hbHl6ZSB0aGUgZm9sbG93aW5nIGhpc3RvcmljYWwgZXZlbnQgZGF0YSBhbmQgcHJvdmlkZSBpbnNpZ2h0cyBmb3IgYSBuZXcgZXZlbnQ6XHJcblxyXG5IaXN0b3JpY2FsIERhdGE6XHJcbiR7SlNPTi5zdHJpbmdpZnkoaGlzdG9yaWNhbERhdGEsIG51bGwsIDIpfVxyXG5cclxuTmV3IEV2ZW50IERldGFpbHM6XHJcbiR7SlNPTi5zdHJpbmdpZnkoZXZlbnREZXRhaWxzLCBudWxsLCAyKX1cclxuXHJcblBsZWFzZSBwcm92aWRlOlxyXG4xLiBBdHRlbmRhbmNlIHByZWRpY3Rpb24gYmFzZWQgb24gaGlzdG9yaWNhbCBwYXR0ZXJuc1xyXG4yLiBLZXkgc3VjY2VzcyBmYWN0b3JzIGlkZW50aWZpZWRcclxuMy4gUmlzayBmYWN0b3JzIHRvIGNvbnNpZGVyXHJcbjQuIEJ1ZGdldCByZWNvbW1lbmRhdGlvbnNcclxuNS4gT3B0aW1hbCB0aW1pbmcgaW5zaWdodHNcclxuNi4gV2VhdGhlciBpbXBhY3QgYW5hbHlzaXNcclxuXHJcbkZvcm1hdCB5b3VyIHJlc3BvbnNlIGFzIGEgc3RydWN0dXJlZCBhbmFseXNpcyB3aXRoIGNsZWFyIHNlY3Rpb25zLlxyXG5gXHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhSZXRyeShcclxuICAgICAgYGh0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMvZ2VtaW5pLTIuNS1mbGFzaDpnZW5lcmF0ZUNvbnRlbnQ/a2V5PSR7Z2VtaW5pQXBpS2V5fWAsXHJcbiAgICAgIDMsXHJcbiAgICAgIDEwMDAwLFxyXG4gICAgICB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGNvbnRlbnRzOiBbe1xyXG4gICAgICAgICAgICBwYXJ0czogW3tcclxuICAgICAgICAgICAgICB0ZXh0OiBwcm9tcHRcclxuICAgICAgICAgICAgfV1cclxuICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZzoge1xyXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC43LFxyXG4gICAgICAgICAgICB0b3BLOiA0MCxcclxuICAgICAgICAgICAgdG9wUDogMC45NSxcclxuICAgICAgICAgICAgbWF4T3V0cHV0VG9rZW5zOiAxMDI0LFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIHRocm93IG5ldyBFcnJvcihgTExNIEFQSSBlcnJvcjogJHtyZXNwb25zZS5zdGF0dXN9YClcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBkYXRhID0gYXdhaXQgcmVzcG9uc2UuanNvbigpXHJcbiAgICBjb25zdCBhbmFseXNpcyA9IGRhdGEuY2FuZGlkYXRlcz8uWzBdPy5jb250ZW50Py5wYXJ0cz8uWzBdPy50ZXh0XHJcbiAgICBcclxuICAgIGlmICghYW5hbHlzaXMpIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKCdObyBhbmFseXNpcyBnZW5lcmF0ZWQgZnJvbSBMTE0nKVxyXG4gICAgfVxyXG4gICAgXHJcbiAgICByZXR1cm4gYW5hbHlzaXNcclxuICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgY29uc29sZS5lcnJvcignTExNIGFuYWx5c2lzIGVycm9yOicsIGVycm9yKVxyXG4gICAgdGhyb3cgbmV3IEVycm9yKGBVbmFibGUgdG8gYW5hbHl6ZSBoaXN0b3JpY2FsIGRhdGE6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YClcclxuICB9XHJcbn1cclxuXHJcblxyXG4vKipcclxuICogRmV0Y2ggd2l0aCByZXRyeSBsb2dpYyBhbmQgdGltZW91dFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hXaXRoUmV0cnkodXJsOiBzdHJpbmcsIG1heFJldHJpZXM6IG51bWJlciwgdGltZW91dDogbnVtYmVyLCBvcHRpb25zOiBSZXF1ZXN0SW5pdCk6IFByb21pc2U8UmVzcG9uc2U+IHtcclxuICBmb3IgKGxldCBhdHRlbXB0ID0gMTsgYXR0ZW1wdCA8PSBtYXhSZXRyaWVzOyBhdHRlbXB0KyspIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKClcclxuICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIHRpbWVvdXQpXHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgICAgIC4uLm9wdGlvbnMsXHJcbiAgICAgICAgc2lnbmFsOiBjb250cm9sbGVyLnNpZ25hbCxcclxuICAgICAgfSlcclxuXHJcbiAgICAgIGNsZWFyVGltZW91dCh0aW1lb3V0SWQpXHJcbiAgICAgIHJldHVybiByZXNwb25zZVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgaWYgKGF0dGVtcHQgPT09IG1heFJldHJpZXMpIHtcclxuICAgICAgICB0aHJvdyBlcnJvclxyXG4gICAgICB9XHJcbiAgICAgIC8vIFdhaXQgYmVmb3JlIHJldHJ5IChleHBvbmVudGlhbCBiYWNrb2ZmKVxyXG4gICAgICBhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgTWF0aC5wb3coMiwgYXR0ZW1wdCkgKiAxMDAwKSlcclxuICAgIH1cclxuICB9XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdNYXggcmV0cmllcyBleGNlZWRlZCcpXHJcbn1cclxuIl0sIm5hbWVzIjpbInJ1biIsInBheWxvYWQiLCJmZXRjaEhpc3RvcmljYWxEYXRhIiwiZXZlbnRUeXBlIiwibG9jYXRpb24iLCJjb25zb2xlIiwibG9nIiwiYW5hbHl6ZVdpdGhMTE0iLCJoaXN0b3JpY2FsRGF0YSIsImV2ZW50RGV0YWlscyIsImdlbWluaUFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJHRU1JTklfQVBJX0tFWSIsIkVycm9yIiwicHJvbXB0IiwiSlNPTiIsInN0cmluZ2lmeSIsInJlc3BvbnNlIiwiZmV0Y2hXaXRoUmV0cnkiLCJtZXRob2QiLCJoZWFkZXJzIiwiYm9keSIsImNvbnRlbnRzIiwicGFydHMiLCJ0ZXh0IiwiZ2VuZXJhdGlvbkNvbmZpZyIsInRlbXBlcmF0dXJlIiwidG9wSyIsInRvcFAiLCJtYXhPdXRwdXRUb2tlbnMiLCJvayIsInN0YXR1cyIsImRhdGEiLCJqc29uIiwiYW5hbHlzaXMiLCJjYW5kaWRhdGVzIiwiY29udGVudCIsImVycm9yIiwibWVzc2FnZSIsInVybCIsIm1heFJldHJpZXMiLCJ0aW1lb3V0Iiwib3B0aW9ucyIsImF0dGVtcHQiLCJjb250cm9sbGVyIiwiQWJvcnRDb250cm9sbGVyIiwidGltZW91dElkIiwic2V0VGltZW91dCIsImFib3J0IiwiZmV0Y2giLCJzaWduYWwiLCJjbGVhclRpbWVvdXQiLCJQcm9taXNlIiwicmVzb2x2ZSIsIk1hdGgiLCJwb3ciXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/agents/historicEventsAgent.ts\n");

/***/ }),

/***/ "(rsc)/./lib/agents/organizerScoringAgent.ts":
/*!*********************************************!*\
  !*** ./lib/agents/organizerScoringAgent.ts ***!
  \*********************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   run: () => (/* binding */ run)\n/* harmony export */ });\n/**\r\n * Organizer Scoring Agent - Aggregates all agent outputs and computes readiness score\r\n * @param payload - Contains all agent results and event details\r\n * @returns Comprehensive readiness score and recommendations\r\n */ async function run(payload) {\n    const { weatherAnalysis, currentEventsAnalysis, historicAnalysis, eventDetails } = payload;\n    if (!eventDetails) {\n        throw new Error('Event details are required for scoring');\n    }\n    try {\n        // Aggregate all analyses\n        const aggregatedData = {\n            weather: weatherAnalysis || 'No weather data available',\n            currentEvents: currentEventsAnalysis || 'No current events data available',\n            historical: historicAnalysis || 'No historical data available',\n            eventDetails\n        };\n        // Compute readiness score using LLM\n        const scoreAnalysis = await computeReadinessScore(aggregatedData);\n        return scoreAnalysis;\n    } catch (error) {\n        console.error('Organizer scoring agent error:', error);\n        // Return a more user-friendly error response instead of throwing\n        return generateFallbackAnalysis(eventDetails, error instanceof Error ? error.message : 'Unknown error');\n    }\n}\n/**\r\n * Compute readiness score using LLM analysis with comprehensive error handling\r\n */ async function computeReadinessScore(data) {\n    const geminiApiKey = \"AIzaSyA8iqM-6wibaLrqTB42bO_IVhtZXKAzWCg\";\n    if (!geminiApiKey) {\n        throw new Error('GEMINI_API_KEY not configured for Organizer Scoring Agent');\n    }\n    // Validate input data\n    if (!data || typeof data !== 'object') {\n        throw new Error('Invalid input data provided to scoring function');\n    }\n    try {\n        const prompt = buildOptimizedPrompt(data);\n        // Log request details for debugging\n        console.log('LLM Request Details:', {\n            promptLength: prompt.length,\n            eventType: data.eventDetails?.eventType,\n            location: data.eventDetails?.location,\n            timestamp: new Date().toISOString()\n        });\n        const response = await fetchWithRetry(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.0-flash-exp:generateContent?key=${geminiApiKey}`, 3, 20000, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json'\n            },\n            body: JSON.stringify({\n                contents: [\n                    {\n                        parts: [\n                            {\n                                text: prompt\n                            }\n                        ]\n                    }\n                ],\n                generationConfig: {\n                    temperature: 0.3,\n                    topK: 40,\n                    topP: 0.95,\n                    maxOutputTokens: 4096,\n                    stopSequences: []\n                },\n                safetySettings: [\n                    {\n                        category: \"HARM_CATEGORY_HARASSMENT\",\n                        threshold: \"BLOCK_NONE\"\n                    },\n                    {\n                        category: \"HARM_CATEGORY_HATE_SPEECH\",\n                        threshold: \"BLOCK_NONE\"\n                    },\n                    {\n                        category: \"HARM_CATEGORY_SEXUALLY_EXPLICIT\",\n                        threshold: \"BLOCK_NONE\"\n                    },\n                    {\n                        category: \"HARM_CATEGORY_DANGEROUS_CONTENT\",\n                        threshold: \"BLOCK_NONE\"\n                    }\n                ]\n            })\n        });\n        // Enhanced response validation\n        console.log('LLM Response Status:', response.status);\n        console.log('LLM Response Headers:', Object.fromEntries(response.headers.entries()));\n        if (!response.ok) {\n            const errorText = await response.text().catch(()=>'Unable to read error response');\n            console.error('LLM API Error Details:', {\n                status: response.status,\n                statusText: response.statusText,\n                errorBody: errorText\n            });\n            throw new Error(`LLM API error: ${response.status} - ${response.statusText}. Body: ${errorText}`);\n        }\n        const responseData = await response.json();\n        console.log('LLM Response Structure:', {\n            hasCandidates: !!responseData.candidates,\n            candidatesLength: responseData.candidates?.length,\n            hasContent: !!responseData.candidates?.[0]?.content,\n            hasParts: !!responseData.candidates?.[0]?.content?.parts,\n            partsLength: responseData.candidates?.[0]?.content?.parts?.length\n        });\n        // More robust response extraction\n        const rawAnalysis = extractAnalysisFromResponse(responseData);\n        if (!rawAnalysis || rawAnalysis.trim().length === 0) {\n            console.error('Empty analysis from LLM. Full response:', JSON.stringify(responseData, null, 2));\n            throw new Error('No analysis generated from LLM - empty response content');\n        }\n        console.log('Raw Analysis Length:', rawAnalysis.length);\n        console.log('Raw Analysis Preview:', rawAnalysis.substring(0, 200) + '...');\n        // Try to parse the structured JSON response\n        try {\n            const structuredData = parseStructuredResponse(rawAnalysis);\n            return formatStructuredAnalysis(structuredData, data.eventDetails);\n        } catch (parseError) {\n            console.error('Error parsing structured response:', parseError);\n            console.error('Raw response for debugging:', rawAnalysis);\n            // Enhanced fallback - try to extract partial data\n            const partialData = extractPartialData(rawAnalysis);\n            if (partialData) {\n                return formatStructuredAnalysis(partialData, data.eventDetails);\n            }\n            // Final fallback to raw analysis with formatting\n            return formatRawAnalysis(rawAnalysis, data.eventDetails);\n        }\n    } catch (error) {\n        console.error('LLM scoring error:', error);\n        // Check for specific error types and provide better error messages\n        if (error instanceof Error) {\n            if (error.message.includes('fetch')) {\n                throw new Error(`Network error connecting to LLM service: ${error.message}`);\n            } else if (error.message.includes('timeout') || error.message.includes('aborted')) {\n                throw new Error(`LLM request timed out. The analysis may be too complex.`);\n            } else if (error.message.includes('401') || error.message.includes('403')) {\n                throw new Error(`Authentication error with LLM service. Check API key configuration.`);\n            } else if (error.message.includes('429')) {\n                throw new Error(`Rate limit exceeded for LLM service. Please try again later.`);\n            }\n        }\n        throw new Error(`Unable to compute readiness score: ${error instanceof Error ? error.message : 'Unknown error'}`);\n    }\n}\n/**\r\n * Build an optimized prompt with better structure and constraints\r\n */ function buildOptimizedPrompt(data) {\n    return `You are a senior event planning strategist analyzing event readiness. Provide a comprehensive assessment in STRICT JSON format.\n\nEVENT DATA:\nEvent Type: ${data.eventDetails?.eventType || 'Not specified'}\nLocation: ${data.eventDetails?.location || 'Not specified'}\nDate: ${data.eventDetails?.date || 'Not specified'}\nBudget: ${data.eventDetails?.budget || 'Not specified'}\nExpected Attendance: ${data.eventDetails?.expectedAttendance || 'Not specified'}\n\nWEATHER ANALYSIS:\n${data.weather}\n\nCURRENT EVENTS:\n${data.currentEvents}\n\nHISTORICAL DATA:\n${data.historical}\n\nRESPOND WITH ONLY THIS JSON STRUCTURE (no additional text):\n\n{\n  \"overallScore\": {\n    \"total\": 85,\n    \"breakdown\": {\n      \"weather\": 90,\n      \"competition\": 75,\n      \"historical\": 80,\n      \"budget\": 85,\n      \"logistics\": 90\n    }\n  },\n  \"criticalIssues\": [\n    \"Issue 1 description\",\n    \"Issue 2 description\"\n  ],\n  \"strengths\": [\n    \"Strength 1 description\",\n    \"Strength 2 description\"\n  ],\n  \"opportunities\": [\n    \"Opportunity 1 description\",\n    \"Opportunity 2 description\"\n  ],\n  \"recommendations\": [\n    {\n      \"category\": \"Weather\",\n      \"priority\": \"High\",\n      \"action\": \"Specific action\",\n      \"timeline\": \"When to implement\",\n      \"impact\": \"Expected impact\"\n    }\n  ],\n  \"riskAssessment\": [\n    {\n      \"risk\": \"Risk description\",\n      \"probability\": \"High\",\n      \"impact\": \"Medium\",\n      \"mitigation\": \"Mitigation strategy\"\n    }\n  ],\n  \"successProbability\": {\n    \"percentage\": 85,\n    \"confidence\": \"High\",\n    \"factors\": [\"Factor 1\", \"Factor 2\"]\n  },\n  \"nextSteps\": [\n    \"Step 1\",\n    \"Step 2\"\n  ],\n  \"summary\": \"Brief summary of readiness and key points\"\n}`;\n}\n/**\r\n * Extract analysis from LLM response with multiple fallback methods\r\n */ function extractAnalysisFromResponse(responseData) {\n    // Method 1: Standard extraction\n    let analysis = responseData.candidates?.[0]?.content?.parts?.[0]?.text;\n    if (analysis && analysis.trim().length > 0) {\n        return analysis;\n    }\n    // Method 2: Check for alternative response structures\n    if (responseData.candidates && responseData.candidates.length > 0) {\n        for (const candidate of responseData.candidates){\n            if (candidate.content && candidate.content.parts) {\n                for (const part of candidate.content.parts){\n                    if (part.text && part.text.trim().length > 0) {\n                        return part.text;\n                    }\n                }\n            }\n        }\n    }\n    // Method 3: Check for direct text response\n    if (responseData.text && responseData.text.trim().length > 0) {\n        return responseData.text;\n    }\n    // Method 4: Check for any text content in the response\n    const responseStr = JSON.stringify(responseData);\n    const textMatches = responseStr.match(/\"text\"\\s*:\\s*\"([^\"]+)\"/g);\n    if (textMatches && textMatches.length > 0) {\n        return textMatches[0].replace(/\"text\"\\s*:\\s*\"/, '').replace(/\"$/, '');\n    }\n    return null;\n}\n/**\r\n * Parse structured response with multiple parsing strategies\r\n */ function parseStructuredResponse(rawAnalysis) {\n    // Clean the response\n    const cleaned = rawAnalysis.trim();\n    // Strategy 1: Direct JSON parse\n    try {\n        return JSON.parse(cleaned);\n    } catch (e) {\n    // Continue to next strategy\n    }\n    // Strategy 2: Extract JSON from text\n    const jsonMatch = cleaned.match(/\\{[\\s\\S]*\\}/);\n    if (jsonMatch) {\n        try {\n            return JSON.parse(jsonMatch[0]);\n        } catch (e) {\n        // Continue to next strategy\n        }\n    }\n    // Strategy 3: Try to find and parse nested JSON\n    const nestedJsonMatch = cleaned.match(/```json\\s*(\\{[\\s\\S]*?\\})\\s*```/);\n    if (nestedJsonMatch) {\n        try {\n            return JSON.parse(nestedJsonMatch[1]);\n        } catch (e) {\n        // Continue to next strategy\n        }\n    }\n    // Strategy 4: Build basic structure from text\n    return extractPartialData(cleaned);\n}\n/**\r\n * Extract partial data from unstructured response\r\n */ function extractPartialData(text) {\n    const partialData = {\n        overallScore: {\n            total: 75,\n            breakdown: {}\n        },\n        criticalIssues: [],\n        strengths: [],\n        opportunities: [],\n        recommendations: [],\n        riskAssessment: [],\n        successProbability: {\n            percentage: 75,\n            confidence: \"Medium\",\n            factors: []\n        },\n        nextSteps: [],\n        summary: \"Analysis partially extracted from unstructured response.\"\n    };\n    // Try to extract score\n    const scoreMatch = text.match(/score[:\\s]*(\\d+)/i);\n    if (scoreMatch) {\n        partialData.overallScore.total = parseInt(scoreMatch[1]);\n    }\n    // Try to extract issues\n    const issueMatches = text.match(/(?:issue|problem|concern)[s]?[:\\s]*([^\\n.]+)/gi);\n    if (issueMatches) {\n        partialData.criticalIssues = issueMatches.slice(0, 3).map((match)=>match.replace(/(?:issue|problem|concern)[s]?[:\\s]*/i, '').trim());\n    }\n    return partialData;\n}\n/**\r\n * Generate fallback analysis when LLM fails completely\r\n */ function generateFallbackAnalysis(eventDetails, errorMessage) {\n    const fallbackData = {\n        overallScore: {\n            total: 70,\n            breakdown: {\n                weather: 75,\n                competition: 65,\n                historical: 70,\n                budget: 70,\n                logistics: 75\n            }\n        },\n        criticalIssues: [\n            \"LLM analysis service temporarily unavailable\",\n            \"Using fallback assessment based on basic event parameters\"\n        ],\n        strengths: [\n            \"Event planning process is active and organized\",\n            \"Multiple data sources being considered for decision making\"\n        ],\n        opportunities: [\n            \"Retry analysis when service is restored\",\n            \"Manual review of individual agent reports\"\n        ],\n        recommendations: [\n            {\n                category: \"System\",\n                priority: \"High\",\n                action: \"Retry automated analysis or conduct manual review\",\n                timeline: \"Immediate\",\n                impact: \"Ensures proper event assessment\"\n            }\n        ],\n        riskAssessment: [\n            {\n                risk: \"Incomplete automated analysis\",\n                probability: \"High\",\n                impact: \"Medium\",\n                mitigation: \"Manual review of source data and expert consultation\"\n            }\n        ],\n        successProbability: {\n            percentage: 70,\n            confidence: \"Low\",\n            factors: [\n                \"Limited analysis due to system error\",\n                \"Base event parameters appear viable\"\n            ]\n        },\n        nextSteps: [\n            \"Review individual agent reports manually\",\n            \"Retry automated analysis\",\n            \"Consult with event planning experts\"\n        ],\n        summary: `Automated analysis temporarily unavailable due to: ${errorMessage}. Fallback assessment suggests moderate readiness with need for manual review.`\n    };\n    return formatStructuredAnalysis(fallbackData, eventDetails);\n}\n/**\r\n * Format raw analysis when structured parsing fails\r\n */ function formatRawAnalysis(rawAnalysis, eventDetails) {\n    return `üéØ EVENT READINESS ASSESSMENT (Raw Analysis)\n\nüìä ANALYSIS OUTPUT:\n${rawAnalysis}\n\n---\n‚ö†Ô∏è Note: This analysis was provided in unstructured format and may require manual interpretation.\n\nGenerated: ${new Date().toISOString()}\nEvent: ${eventDetails.eventType} in ${eventDetails.location} on ${eventDetails.date}`;\n}\n/**\r\n * Format structured analysis data into a comprehensive report\r\n */ function formatStructuredAnalysis(data, eventDetails) {\n    const { overallScore, criticalIssues, strengths, opportunities, recommendations, riskAssessment, successProbability, nextSteps, summary } = data;\n    return `üéØ COMPREHENSIVE EVENT READINESS ASSESSMENT\n\nüìä OVERALL READINESS SCORE: ${overallScore?.total || 'N/A'}/100\n\n${overallScore?.breakdown ? `\nüìà SCORE BREAKDOWN:\n‚Ä¢ Weather Conditions: ${overallScore.breakdown.weather || 'N/A'}/100\n‚Ä¢ Competition Analysis: ${overallScore.breakdown.competition || 'N/A'}/100\n‚Ä¢ Historical Performance: ${overallScore.breakdown.historical || 'N/A'}/100\n‚Ä¢ Budget Adequacy: ${overallScore.breakdown.budget || 'N/A'}/100\n‚Ä¢ Logistics Planning: ${overallScore.breakdown.logistics || 'N/A'}/100\n` : ''}\n\nüö® CRITICAL ISSUES:\n${criticalIssues && criticalIssues.length > 0 ? criticalIssues.map((issue, index)=>`${index + 1}. ${issue}`).join('\\n') : '‚Ä¢ No critical issues identified'}\n\n‚úÖ STRENGTHS:\n${strengths && strengths.length > 0 ? strengths.map((strength, index)=>`${index + 1}. ${strength}`).join('\\n') : '‚Ä¢ No specific strengths identified'}\n\nüéØ OPPORTUNITIES:\n${opportunities && opportunities.length > 0 ? opportunities.map((opportunity, index)=>`${index + 1}. ${opportunity}`).join('\\n') : '‚Ä¢ No specific opportunities identified'}\n\nüìã DETAILED RECOMMENDATIONS:\n${recommendations && recommendations.length > 0 ? recommendations.map((rec, index)=>`${index + 1}. [${rec.priority || 'Medium'} Priority] ${rec.category || 'General'}\n   Action: ${rec.action || 'No specific action provided'}\n   Timeline: ${rec.timeline || 'Not specified'}\n   Impact: ${rec.impact || 'Not specified'}`).join('\\n\\n') : '‚Ä¢ No specific recommendations provided'}\n\n‚ö†Ô∏è RISK ASSESSMENT:\n${riskAssessment && riskAssessment.length > 0 ? riskAssessment.map((risk, index)=>`${index + 1}. ${risk.risk || 'Unspecified risk'}\n   Probability: ${risk.probability || 'Unknown'} | Impact: ${risk.impact || 'Unknown'}\n   Mitigation: ${risk.mitigation || 'No mitigation strategy provided'}`).join('\\n\\n') : '‚Ä¢ No specific risks identified'}\n\nüé≤ SUCCESS PROBABILITY: ${successProbability?.percentage || 'N/A'}%\nConfidence Level: ${successProbability?.confidence || 'Unknown'}\n${successProbability?.factors && successProbability.factors.length > 0 ? `Key Factors: ${successProbability.factors.join(', ')}` : ''}\n\nüìÖ IMMEDIATE NEXT STEPS:\n${nextSteps && nextSteps.length > 0 ? nextSteps.map((step, index)=>`${index + 1}. ${step}`).join('\\n') : '‚Ä¢ No specific next steps provided'}\n\nüìù EXECUTIVE SUMMARY:\n${summary || 'No summary provided'}\n\n---\nGenerated: ${new Date().toISOString()}\nEvent: ${eventDetails.eventType} in ${eventDetails.location} on ${eventDetails.date}`;\n}\n/**\r\n * Fetch with retry logic and timeout - Enhanced version\r\n */ async function fetchWithRetry(url, maxRetries, timeout, options) {\n    let lastError = null;\n    for(let attempt = 1; attempt <= maxRetries; attempt++){\n        try {\n            console.log(`LLM Request attempt ${attempt}/${maxRetries}`);\n            const controller = new AbortController();\n            const timeoutId = setTimeout(()=>{\n                console.log(`Request timeout after ${timeout}ms`);\n                controller.abort();\n            }, timeout);\n            const response = await fetch(url, {\n                ...options,\n                signal: controller.signal\n            });\n            clearTimeout(timeoutId);\n            if (response.ok) {\n                console.log(`LLM Request successful on attempt ${attempt}`);\n                return response;\n            } else {\n                // Log non-success responses but continue retrying for certain status codes\n                console.log(`LLM Request failed with status ${response.status} on attempt ${attempt}`);\n                if (response.status >= 500 || response.status === 429) {\n                    // Server errors or rate limits - retry\n                    lastError = new Error(`HTTP ${response.status}: ${response.statusText}`);\n                } else {\n                    // Client errors - don't retry\n                    return response;\n                }\n            }\n        } catch (error) {\n            console.error(`LLM Request attempt ${attempt} failed:`, error);\n            lastError = error instanceof Error ? error : new Error('Unknown fetch error');\n            if (attempt === maxRetries) {\n                break;\n            }\n            // Exponential backoff with jitter\n            const baseDelay = Math.pow(2, attempt) * 1000;\n            const jitter = Math.random() * 1000;\n            const delay = baseDelay + jitter;\n            console.log(`Retrying in ${delay}ms...`);\n            await new Promise((resolve)=>setTimeout(resolve, delay));\n        }\n    }\n    throw lastError || new Error('Max retries exceeded');\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvYWdlbnRzL29yZ2FuaXplclNjb3JpbmdBZ2VudC50cyIsIm1hcHBpbmdzIjoiOzs7O0FBQUE7Ozs7Q0FJQyxHQUNNLGVBQWVBLElBQUlDLE9BQVk7SUFDcEMsTUFBTSxFQUNKQyxlQUFlLEVBQ2ZDLHFCQUFxQixFQUNyQkMsZ0JBQWdCLEVBQ2hCQyxZQUFZLEVBQ2IsR0FBR0o7SUFFSixJQUFJLENBQUNJLGNBQWM7UUFDakIsTUFBTSxJQUFJQyxNQUFNO0lBQ2xCO0lBRUEsSUFBSTtRQUNGLHlCQUF5QjtRQUN6QixNQUFNQyxpQkFBaUI7WUFDckJDLFNBQVNOLG1CQUFtQjtZQUM1Qk8sZUFBZU4seUJBQXlCO1lBQ3hDTyxZQUFZTixvQkFBb0I7WUFDaENDO1FBQ0Y7UUFFQSxvQ0FBb0M7UUFDcEMsTUFBTU0sZ0JBQWdCLE1BQU1DLHNCQUFzQkw7UUFFbEQsT0FBT0k7SUFDVCxFQUFFLE9BQU9FLE9BQU87UUFDZEMsUUFBUUQsS0FBSyxDQUFDLGtDQUFrQ0E7UUFDaEQsaUVBQWlFO1FBQ2pFLE9BQU9FLHlCQUF5QlYsY0FBY1EsaUJBQWlCUCxRQUFRTyxNQUFNRyxPQUFPLEdBQUc7SUFDekY7QUFDRjtBQUVBOztDQUVDLEdBQ0QsZUFBZUosc0JBQXNCSyxJQUFTO0lBQzVDLE1BQU1DLGVBQWVDLHlDQUEwQjtJQUUvQyxJQUFJLENBQUNELGNBQWM7UUFDakIsTUFBTSxJQUFJWixNQUFNO0lBQ2xCO0lBRUEsc0JBQXNCO0lBQ3RCLElBQUksQ0FBQ1csUUFBUSxPQUFPQSxTQUFTLFVBQVU7UUFDckMsTUFBTSxJQUFJWCxNQUFNO0lBQ2xCO0lBRUEsSUFBSTtRQUNGLE1BQU1nQixTQUFTQyxxQkFBcUJOO1FBRXBDLG9DQUFvQztRQUNwQ0gsUUFBUVUsR0FBRyxDQUFDLHdCQUF3QjtZQUNsQ0MsY0FBY0gsT0FBT0ksTUFBTTtZQUMzQkMsV0FBV1YsS0FBS1osWUFBWSxFQUFFc0I7WUFDOUJDLFVBQVVYLEtBQUtaLFlBQVksRUFBRXVCO1lBQzdCQyxX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QUFJQyxRQUFRQyxDQUFBQSxVQUFXWixXQUFXWSxTQUFTRjtRQUNuRDtJQUNGO0lBRUEsTUFBTWYsYUFBYSxJQUFJbkksTUFBTTtBQUMvQiIsInNvdXJjZXMiOlsiL1VzZXJzL3dpbGxyb2NoZS9EZXNrdG9wL0hvcEhhY2tzMjAyNS9saWIvYWdlbnRzL29yZ2FuaXplclNjb3JpbmdBZ2VudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyIvKipcclxuICogT3JnYW5pemVyIFNjb3JpbmcgQWdlbnQgLSBBZ2dyZWdhdGVzIGFsbCBhZ2VudCBvdXRwdXRzIGFuZCBjb21wdXRlcyByZWFkaW5lc3Mgc2NvcmVcclxuICogQHBhcmFtIHBheWxvYWQgLSBDb250YWlucyBhbGwgYWdlbnQgcmVzdWx0cyBhbmQgZXZlbnQgZGV0YWlsc1xyXG4gKiBAcmV0dXJucyBDb21wcmVoZW5zaXZlIHJlYWRpbmVzcyBzY29yZSBhbmQgcmVjb21tZW5kYXRpb25zXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gcnVuKHBheWxvYWQ6IGFueSk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgY29uc3QgeyBcclxuICAgIHdlYXRoZXJBbmFseXNpcywgXHJcbiAgICBjdXJyZW50RXZlbnRzQW5hbHlzaXMsIFxyXG4gICAgaGlzdG9yaWNBbmFseXNpcywgXHJcbiAgICBldmVudERldGFpbHMgXHJcbiAgfSA9IHBheWxvYWRcclxuXHJcbiAgaWYgKCFldmVudERldGFpbHMpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignRXZlbnQgZGV0YWlscyBhcmUgcmVxdWlyZWQgZm9yIHNjb3JpbmcnKVxyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIEFnZ3JlZ2F0ZSBhbGwgYW5hbHlzZXNcclxuICAgIGNvbnN0IGFnZ3JlZ2F0ZWREYXRhID0ge1xyXG4gICAgICB3ZWF0aGVyOiB3ZWF0aGVyQW5hbHlzaXMgfHwgJ05vIHdlYXRoZXIgZGF0YSBhdmFpbGFibGUnLFxyXG4gICAgICBjdXJyZW50RXZlbnRzOiBjdXJyZW50RXZlbnRzQW5hbHlzaXMgfHwgJ05vIGN1cnJlbnQgZXZlbnRzIGRhdGEgYXZhaWxhYmxlJyxcclxuICAgICAgaGlzdG9yaWNhbDogaGlzdG9yaWNBbmFseXNpcyB8fCAnTm8gaGlzdG9yaWNhbCBkYXRhIGF2YWlsYWJsZScsXHJcbiAgICAgIGV2ZW50RGV0YWlsc1xyXG4gICAgfVxyXG5cclxuICAgIC8vIENvbXB1dGUgcmVhZGluZXNzIHNjb3JlIHVzaW5nIExMTVxyXG4gICAgY29uc3Qgc2NvcmVBbmFseXNpcyA9IGF3YWl0IGNvbXB1dGVSZWFkaW5lc3NTY29yZShhZ2dyZWdhdGVkRGF0YSlcclxuXHJcbiAgICByZXR1cm4gc2NvcmVBbmFseXNpc1xyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdPcmdhbml6ZXIgc2NvcmluZyBhZ2VudCBlcnJvcjonLCBlcnJvcilcclxuICAgIC8vIFJldHVybiBhIG1vcmUgdXNlci1mcmllbmRseSBlcnJvciByZXNwb25zZSBpbnN0ZWFkIG9mIHRocm93aW5nXHJcbiAgICByZXR1cm4gZ2VuZXJhdGVGYWxsYmFja0FuYWx5c2lzKGV2ZW50RGV0YWlscywgZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcicpXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ29tcHV0ZSByZWFkaW5lc3Mgc2NvcmUgdXNpbmcgTExNIGFuYWx5c2lzIHdpdGggY29tcHJlaGVuc2l2ZSBlcnJvciBoYW5kbGluZ1xyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gY29tcHV0ZVJlYWRpbmVzc1Njb3JlKGRhdGE6IGFueSk6IFByb21pc2U8c3RyaW5nPiB7XHJcbiAgY29uc3QgZ2VtaW5pQXBpS2V5ID0gcHJvY2Vzcy5lbnYuR0VNSU5JX0FQSV9LRVlcclxuICBcclxuICBpZiAoIWdlbWluaUFwaUtleSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdHRU1JTklfQVBJX0tFWSBub3QgY29uZmlndXJlZCBmb3IgT3JnYW5pemVyIFNjb3JpbmcgQWdlbnQnKVxyXG4gIH1cclxuXHJcbiAgLy8gVmFsaWRhdGUgaW5wdXQgZGF0YVxyXG4gIGlmICghZGF0YSB8fCB0eXBlb2YgZGF0YSAhPT0gJ29iamVjdCcpIHtcclxuICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBpbnB1dCBkYXRhIHByb3ZpZGVkIHRvIHNjb3JpbmcgZnVuY3Rpb24nKVxyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIGNvbnN0IHByb21wdCA9IGJ1aWxkT3B0aW1pemVkUHJvbXB0KGRhdGEpXHJcbiAgICBcclxuICAgIC8vIExvZyByZXF1ZXN0IGRldGFpbHMgZm9yIGRlYnVnZ2luZ1xyXG4gICAgY29uc29sZS5sb2coJ0xMTSBSZXF1ZXN0IERldGFpbHM6Jywge1xyXG4gICAgICBwcm9tcHRMZW5ndGg6IHByb21wdC5sZW5ndGgsXHJcbiAgICAgIGV2ZW50VHlwZTogZGF0YS5ldmVudERldGFpbHM/LmV2ZW50VHlwZSxcclxuICAgICAgbG9jYXRpb246IGRhdGEuZXZlbnREZXRhaWxzPy5sb2NhdGlvbixcclxuICAgICAgdGltZXN0YW1wOiBuZXcgRGF0ZSgpLnRvSVNPU3RyaW5nKClcclxuICAgIH0pXHJcblxyXG4gICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhSZXRyeShcclxuICAgICAgYGh0dHBzOi8vZ2VuZXJhdGl2ZWxhbmd1YWdlLmdvb2dsZWFwaXMuY29tL3YxYmV0YS9tb2RlbHMvZ2VtaW5pLTIuMC1mbGFzaC1leHA6Z2VuZXJhdGVDb250ZW50P2tleT0ke2dlbWluaUFwaUtleX1gLFxyXG4gICAgICAzLFxyXG4gICAgICAyMDAwMCwgLy8gSW5jcmVhc2VkIHRpbWVvdXQgdG8gMjAgc2Vjb25kc1xyXG4gICAgICB7XHJcbiAgICAgICAgbWV0aG9kOiAnUE9TVCcsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICB9LFxyXG4gICAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcclxuICAgICAgICAgIGNvbnRlbnRzOiBbe1xyXG4gICAgICAgICAgICBwYXJ0czogW3tcclxuICAgICAgICAgICAgICB0ZXh0OiBwcm9tcHRcclxuICAgICAgICAgICAgfV1cclxuICAgICAgICAgIH1dLFxyXG4gICAgICAgICAgZ2VuZXJhdGlvbkNvbmZpZzoge1xyXG4gICAgICAgICAgICB0ZW1wZXJhdHVyZTogMC4zLFxyXG4gICAgICAgICAgICB0b3BLOiA0MCxcclxuICAgICAgICAgICAgdG9wUDogMC45NSxcclxuICAgICAgICAgICAgbWF4T3V0cHV0VG9rZW5zOiA0MDk2LCAvLyBJbmNyZWFzZWQgdG9rZW4gbGltaXRcclxuICAgICAgICAgICAgc3RvcFNlcXVlbmNlczogW11cclxuICAgICAgICAgIH0sXHJcbiAgICAgICAgICBzYWZldHlTZXR0aW5nczogW1xyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6IFwiSEFSTV9DQVRFR09SWV9IQVJBU1NNRU5UXCIsXHJcbiAgICAgICAgICAgICAgdGhyZXNob2xkOiBcIkJMT0NLX05PTkVcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6IFwiSEFSTV9DQVRFR09SWV9IQVRFX1NQRUVDSFwiLCBcclxuICAgICAgICAgICAgICB0aHJlc2hvbGQ6IFwiQkxPQ0tfTk9ORVwiXHJcbiAgICAgICAgICAgIH0sXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICBjYXRlZ29yeTogXCJIQVJNX0NBVEVHT1JZX1NFWFVBTExZX0VYUExJQ0lUXCIsXHJcbiAgICAgICAgICAgICAgdGhyZXNob2xkOiBcIkJMT0NLX05PTkVcIlxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgY2F0ZWdvcnk6IFwiSEFSTV9DQVRFR09SWV9EQU5HRVJPVVNfQ09OVEVOVFwiLFxyXG4gICAgICAgICAgICAgIHRocmVzaG9sZDogXCJCTE9DS19OT05FXCJcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgXVxyXG4gICAgICAgIH0pXHJcbiAgICAgIH1cclxuICAgIClcclxuXHJcbiAgICAvLyBFbmhhbmNlZCByZXNwb25zZSB2YWxpZGF0aW9uXHJcbiAgICBjb25zb2xlLmxvZygnTExNIFJlc3BvbnNlIFN0YXR1czonLCByZXNwb25zZS5zdGF0dXMpXHJcbiAgICBjb25zb2xlLmxvZygnTExNIFJlc3BvbnNlIEhlYWRlcnM6JywgT2JqZWN0LmZyb21FbnRyaWVzKHJlc3BvbnNlLmhlYWRlcnMuZW50cmllcygpKSlcclxuXHJcbiAgICBpZiAoIXJlc3BvbnNlLm9rKSB7XHJcbiAgICAgIGNvbnN0IGVycm9yVGV4dCA9IGF3YWl0IHJlc3BvbnNlLnRleHQoKS5jYXRjaCgoKSA9PiAnVW5hYmxlIHRvIHJlYWQgZXJyb3IgcmVzcG9uc2UnKVxyXG4gICAgICBjb25zb2xlLmVycm9yKCdMTE0gQVBJIEVycm9yIERldGFpbHM6Jywge1xyXG4gICAgICAgIHN0YXR1czogcmVzcG9uc2Uuc3RhdHVzLFxyXG4gICAgICAgIHN0YXR1c1RleHQ6IHJlc3BvbnNlLnN0YXR1c1RleHQsXHJcbiAgICAgICAgZXJyb3JCb2R5OiBlcnJvclRleHRcclxuICAgICAgfSlcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBMTE0gQVBJIGVycm9yOiAke3Jlc3BvbnNlLnN0YXR1c30gLSAke3Jlc3BvbnNlLnN0YXR1c1RleHR9LiBCb2R5OiAke2Vycm9yVGV4dH1gKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHJlc3BvbnNlRGF0YSA9IGF3YWl0IHJlc3BvbnNlLmpzb24oKVxyXG4gICAgY29uc29sZS5sb2coJ0xMTSBSZXNwb25zZSBTdHJ1Y3R1cmU6Jywge1xyXG4gICAgICBoYXNDYW5kaWRhdGVzOiAhIXJlc3BvbnNlRGF0YS5jYW5kaWRhdGVzLFxyXG4gICAgICBjYW5kaWRhdGVzTGVuZ3RoOiByZXNwb25zZURhdGEuY2FuZGlkYXRlcz8ubGVuZ3RoLFxyXG4gICAgICBoYXNDb250ZW50OiAhIXJlc3BvbnNlRGF0YS5jYW5kaWRhdGVzPy5bMF0/LmNvbnRlbnQsXHJcbiAgICAgIGhhc1BhcnRzOiAhIXJlc3BvbnNlRGF0YS5jYW5kaWRhdGVzPy5bMF0/LmNvbnRlbnQ/LnBhcnRzLFxyXG4gICAgICBwYXJ0c0xlbmd0aDogcmVzcG9uc2VEYXRhLmNhbmRpZGF0ZXM/LlswXT8uY29udGVudD8ucGFydHM/Lmxlbmd0aFxyXG4gICAgfSlcclxuXHJcbiAgICAvLyBNb3JlIHJvYnVzdCByZXNwb25zZSBleHRyYWN0aW9uXHJcbiAgICBjb25zdCByYXdBbmFseXNpcyA9IGV4dHJhY3RBbmFseXNpc0Zyb21SZXNwb25zZShyZXNwb25zZURhdGEpXHJcbiAgICBcclxuICAgIGlmICghcmF3QW5hbHlzaXMgfHwgcmF3QW5hbHlzaXMudHJpbSgpLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICBjb25zb2xlLmVycm9yKCdFbXB0eSBhbmFseXNpcyBmcm9tIExMTS4gRnVsbCByZXNwb25zZTonLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZURhdGEsIG51bGwsIDIpKVxyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ05vIGFuYWx5c2lzIGdlbmVyYXRlZCBmcm9tIExMTSAtIGVtcHR5IHJlc3BvbnNlIGNvbnRlbnQnKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnNvbGUubG9nKCdSYXcgQW5hbHlzaXMgTGVuZ3RoOicsIHJhd0FuYWx5c2lzLmxlbmd0aClcclxuICAgIGNvbnNvbGUubG9nKCdSYXcgQW5hbHlzaXMgUHJldmlldzonLCByYXdBbmFseXNpcy5zdWJzdHJpbmcoMCwgMjAwKSArICcuLi4nKVxyXG4gICAgXHJcbiAgICAvLyBUcnkgdG8gcGFyc2UgdGhlIHN0cnVjdHVyZWQgSlNPTiByZXNwb25zZVxyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc3Qgc3RydWN0dXJlZERhdGEgPSBwYXJzZVN0cnVjdHVyZWRSZXNwb25zZShyYXdBbmFseXNpcylcclxuICAgICAgcmV0dXJuIGZvcm1hdFN0cnVjdHVyZWRBbmFseXNpcyhzdHJ1Y3R1cmVkRGF0YSwgZGF0YS5ldmVudERldGFpbHMpXHJcbiAgICB9IGNhdGNoIChwYXJzZUVycm9yKSB7XHJcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHBhcnNpbmcgc3RydWN0dXJlZCByZXNwb25zZTonLCBwYXJzZUVycm9yKVxyXG4gICAgICBjb25zb2xlLmVycm9yKCdSYXcgcmVzcG9uc2UgZm9yIGRlYnVnZ2luZzonLCByYXdBbmFseXNpcylcclxuICAgICAgXHJcbiAgICAgIC8vIEVuaGFuY2VkIGZhbGxiYWNrIC0gdHJ5IHRvIGV4dHJhY3QgcGFydGlhbCBkYXRhXHJcbiAgICAgIGNvbnN0IHBhcnRpYWxEYXRhID0gZXh0cmFjdFBhcnRpYWxEYXRhKHJhd0FuYWx5c2lzKVxyXG4gICAgICBpZiAocGFydGlhbERhdGEpIHtcclxuICAgICAgICByZXR1cm4gZm9ybWF0U3RydWN0dXJlZEFuYWx5c2lzKHBhcnRpYWxEYXRhLCBkYXRhLmV2ZW50RGV0YWlscylcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gRmluYWwgZmFsbGJhY2sgdG8gcmF3IGFuYWx5c2lzIHdpdGggZm9ybWF0dGluZ1xyXG4gICAgICByZXR1cm4gZm9ybWF0UmF3QW5hbHlzaXMocmF3QW5hbHlzaXMsIGRhdGEuZXZlbnREZXRhaWxzKVxyXG4gICAgfVxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdMTE0gc2NvcmluZyBlcnJvcjonLCBlcnJvcilcclxuICAgIFxyXG4gICAgLy8gQ2hlY2sgZm9yIHNwZWNpZmljIGVycm9yIHR5cGVzIGFuZCBwcm92aWRlIGJldHRlciBlcnJvciBtZXNzYWdlc1xyXG4gICAgaWYgKGVycm9yIGluc3RhbmNlb2YgRXJyb3IpIHtcclxuICAgICAgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2ZldGNoJykpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYE5ldHdvcmsgZXJyb3IgY29ubmVjdGluZyB0byBMTE0gc2VydmljZTogJHtlcnJvci5tZXNzYWdlfWApXHJcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygndGltZW91dCcpIHx8IGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJ2Fib3J0ZWQnKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBFcnJvcihgTExNIHJlcXVlc3QgdGltZWQgb3V0LiBUaGUgYW5hbHlzaXMgbWF5IGJlIHRvbyBjb21wbGV4LmApXHJcbiAgICAgIH0gZWxzZSBpZiAoZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnNDAxJykgfHwgZXJyb3IubWVzc2FnZS5pbmNsdWRlcygnNDAzJykpIHtcclxuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoYEF1dGhlbnRpY2F0aW9uIGVycm9yIHdpdGggTExNIHNlcnZpY2UuIENoZWNrIEFQSSBrZXkgY29uZmlndXJhdGlvbi5gKVxyXG4gICAgICB9IGVsc2UgaWYgKGVycm9yLm1lc3NhZ2UuaW5jbHVkZXMoJzQyOScpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKGBSYXRlIGxpbWl0IGV4Y2VlZGVkIGZvciBMTE0gc2VydmljZS4gUGxlYXNlIHRyeSBhZ2FpbiBsYXRlci5gKVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgICBcclxuICAgIHRocm93IG5ldyBFcnJvcihgVW5hYmxlIHRvIGNvbXB1dGUgcmVhZGluZXNzIHNjb3JlOiAke2Vycm9yIGluc3RhbmNlb2YgRXJyb3IgPyBlcnJvci5tZXNzYWdlIDogJ1Vua25vd24gZXJyb3InfWApXHJcbiAgfVxyXG59XHJcblxyXG4vKipcclxuICogQnVpbGQgYW4gb3B0aW1pemVkIHByb21wdCB3aXRoIGJldHRlciBzdHJ1Y3R1cmUgYW5kIGNvbnN0cmFpbnRzXHJcbiAqL1xyXG5mdW5jdGlvbiBidWlsZE9wdGltaXplZFByb21wdChkYXRhOiBhbnkpOiBzdHJpbmcge1xyXG4gIHJldHVybiBgWW91IGFyZSBhIHNlbmlvciBldmVudCBwbGFubmluZyBzdHJhdGVnaXN0IGFuYWx5emluZyBldmVudCByZWFkaW5lc3MuIFByb3ZpZGUgYSBjb21wcmVoZW5zaXZlIGFzc2Vzc21lbnQgaW4gU1RSSUNUIEpTT04gZm9ybWF0LlxyXG5cclxuRVZFTlQgREFUQTpcclxuRXZlbnQgVHlwZTogJHtkYXRhLmV2ZW50RGV0YWlscz8uZXZlbnRUeXBlIHx8ICdOb3Qgc3BlY2lmaWVkJ31cclxuTG9jYXRpb246ICR7ZGF0YS5ldmVudERldGFpbHM/LmxvY2F0aW9uIHx8ICdOb3Qgc3BlY2lmaWVkJ31cclxuRGF0ZTogJHtkYXRhLmV2ZW50RGV0YWlscz8uZGF0ZSB8fCAnTm90IHNwZWNpZmllZCd9XHJcbkJ1ZGdldDogJHtkYXRhLmV2ZW50RGV0YWlscz8uYnVkZ2V0IHx8ICdOb3Qgc3BlY2lmaWVkJ31cclxuRXhwZWN0ZWQgQXR0ZW5kYW5jZTogJHtkYXRhLmV2ZW50RGV0YWlscz8uZXhwZWN0ZWRBdHRlbmRhbmNlIHx8ICdOb3Qgc3BlY2lmaWVkJ31cclxuXHJcbldFQVRIRVIgQU5BTFlTSVM6XHJcbiR7ZGF0YS53ZWF0aGVyfVxyXG5cclxuQ1VSUkVOVCBFVkVOVFM6XHJcbiR7ZGF0YS5jdXJyZW50RXZlbnRzfVxyXG5cclxuSElTVE9SSUNBTCBEQVRBOlxyXG4ke2RhdGEuaGlzdG9yaWNhbH1cclxuXHJcblJFU1BPTkQgV0lUSCBPTkxZIFRISVMgSlNPTiBTVFJVQ1RVUkUgKG5vIGFkZGl0aW9uYWwgdGV4dCk6XHJcblxyXG57XHJcbiAgXCJvdmVyYWxsU2NvcmVcIjoge1xyXG4gICAgXCJ0b3RhbFwiOiA4NSxcclxuICAgIFwiYnJlYWtkb3duXCI6IHtcclxuICAgICAgXCJ3ZWF0aGVyXCI6IDkwLFxyXG4gICAgICBcImNvbXBldGl0aW9uXCI6IDc1LFxyXG4gICAgICBcImhpc3RvcmljYWxcIjogODAsXHJcbiAgICAgIFwiYnVkZ2V0XCI6IDg1LFxyXG4gICAgICBcImxvZ2lzdGljc1wiOiA5MFxyXG4gICAgfVxyXG4gIH0sXHJcbiAgXCJjcml0aWNhbElzc3Vlc1wiOiBbXHJcbiAgICBcIklzc3VlIDEgZGVzY3JpcHRpb25cIixcclxuICAgIFwiSXNzdWUgMiBkZXNjcmlwdGlvblwiXHJcbiAgXSxcclxuICBcInN0cmVuZ3Roc1wiOiBbXHJcbiAgICBcIlN0cmVuZ3RoIDEgZGVzY3JpcHRpb25cIixcclxuICAgIFwiU3RyZW5ndGggMiBkZXNjcmlwdGlvblwiXHJcbiAgXSxcclxuICBcIm9wcG9ydHVuaXRpZXNcIjogW1xyXG4gICAgXCJPcHBvcnR1bml0eSAxIGRlc2NyaXB0aW9uXCIsXHJcbiAgICBcIk9wcG9ydHVuaXR5IDIgZGVzY3JpcHRpb25cIlxyXG4gIF0sXHJcbiAgXCJyZWNvbW1lbmRhdGlvbnNcIjogW1xyXG4gICAge1xyXG4gICAgICBcImNhdGVnb3J5XCI6IFwiV2VhdGhlclwiLFxyXG4gICAgICBcInByaW9yaXR5XCI6IFwiSGlnaFwiLFxyXG4gICAgICBcImFjdGlvblwiOiBcIlNwZWNpZmljIGFjdGlvblwiLFxyXG4gICAgICBcInRpbWVsaW5lXCI6IFwiV2hlbiB0byBpbXBsZW1lbnRcIixcclxuICAgICAgXCJpbXBhY3RcIjogXCJFeHBlY3RlZCBpbXBhY3RcIlxyXG4gICAgfVxyXG4gIF0sXHJcbiAgXCJyaXNrQXNzZXNzbWVudFwiOiBbXHJcbiAgICB7XHJcbiAgICAgIFwicmlza1wiOiBcIlJpc2sgZGVzY3JpcHRpb25cIixcclxuICAgICAgXCJwcm9iYWJpbGl0eVwiOiBcIkhpZ2hcIixcclxuICAgICAgXCJpbXBhY3RcIjogXCJNZWRpdW1cIixcclxuICAgICAgXCJtaXRpZ2F0aW9uXCI6IFwiTWl0aWdhdGlvbiBzdHJhdGVneVwiXHJcbiAgICB9XHJcbiAgXSxcclxuICBcInN1Y2Nlc3NQcm9iYWJpbGl0eVwiOiB7XHJcbiAgICBcInBlcmNlbnRhZ2VcIjogODUsXHJcbiAgICBcImNvbmZpZGVuY2VcIjogXCJIaWdoXCIsXHJcbiAgICBcImZhY3RvcnNcIjogW1wiRmFjdG9yIDFcIiwgXCJGYWN0b3IgMlwiXVxyXG4gIH0sXHJcbiAgXCJuZXh0U3RlcHNcIjogW1xyXG4gICAgXCJTdGVwIDFcIixcclxuICAgIFwiU3RlcCAyXCJcclxuICBdLFxyXG4gIFwic3VtbWFyeVwiOiBcIkJyaWVmIHN1bW1hcnkgb2YgcmVhZGluZXNzIGFuZCBrZXkgcG9pbnRzXCJcclxufWBcclxufVxyXG5cclxuLyoqXHJcbiAqIEV4dHJhY3QgYW5hbHlzaXMgZnJvbSBMTE0gcmVzcG9uc2Ugd2l0aCBtdWx0aXBsZSBmYWxsYmFjayBtZXRob2RzXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0QW5hbHlzaXNGcm9tUmVzcG9uc2UocmVzcG9uc2VEYXRhOiBhbnkpOiBzdHJpbmcgfCBudWxsIHtcclxuICAvLyBNZXRob2QgMTogU3RhbmRhcmQgZXh0cmFjdGlvblxyXG4gIGxldCBhbmFseXNpcyA9IHJlc3BvbnNlRGF0YS5jYW5kaWRhdGVzPy5bMF0/LmNvbnRlbnQ/LnBhcnRzPy5bMF0/LnRleHRcclxuICBcclxuICBpZiAoYW5hbHlzaXMgJiYgYW5hbHlzaXMudHJpbSgpLmxlbmd0aCA+IDApIHtcclxuICAgIHJldHVybiBhbmFseXNpc1xyXG4gIH1cclxuXHJcbiAgLy8gTWV0aG9kIDI6IENoZWNrIGZvciBhbHRlcm5hdGl2ZSByZXNwb25zZSBzdHJ1Y3R1cmVzXHJcbiAgaWYgKHJlc3BvbnNlRGF0YS5jYW5kaWRhdGVzICYmIHJlc3BvbnNlRGF0YS5jYW5kaWRhdGVzLmxlbmd0aCA+IDApIHtcclxuICAgIGZvciAoY29uc3QgY2FuZGlkYXRlIG9mIHJlc3BvbnNlRGF0YS5jYW5kaWRhdGVzKSB7XHJcbiAgICAgIGlmIChjYW5kaWRhdGUuY29udGVudCAmJiBjYW5kaWRhdGUuY29udGVudC5wYXJ0cykge1xyXG4gICAgICAgIGZvciAoY29uc3QgcGFydCBvZiBjYW5kaWRhdGUuY29udGVudC5wYXJ0cykge1xyXG4gICAgICAgICAgaWYgKHBhcnQudGV4dCAmJiBwYXJ0LnRleHQudHJpbSgpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIHBhcnQudGV4dFxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgLy8gTWV0aG9kIDM6IENoZWNrIGZvciBkaXJlY3QgdGV4dCByZXNwb25zZVxyXG4gIGlmIChyZXNwb25zZURhdGEudGV4dCAmJiByZXNwb25zZURhdGEudGV4dC50cmltKCkubGVuZ3RoID4gMCkge1xyXG4gICAgcmV0dXJuIHJlc3BvbnNlRGF0YS50ZXh0XHJcbiAgfVxyXG5cclxuICAvLyBNZXRob2QgNDogQ2hlY2sgZm9yIGFueSB0ZXh0IGNvbnRlbnQgaW4gdGhlIHJlc3BvbnNlXHJcbiAgY29uc3QgcmVzcG9uc2VTdHIgPSBKU09OLnN0cmluZ2lmeShyZXNwb25zZURhdGEpXHJcbiAgY29uc3QgdGV4dE1hdGNoZXMgPSByZXNwb25zZVN0ci5tYXRjaCgvXCJ0ZXh0XCJcXHMqOlxccypcIihbXlwiXSspXCIvZylcclxuICBpZiAodGV4dE1hdGNoZXMgJiYgdGV4dE1hdGNoZXMubGVuZ3RoID4gMCkge1xyXG4gICAgcmV0dXJuIHRleHRNYXRjaGVzWzBdLnJlcGxhY2UoL1widGV4dFwiXFxzKjpcXHMqXCIvLCAnJykucmVwbGFjZSgvXCIkLywgJycpXHJcbiAgfVxyXG5cclxuICByZXR1cm4gbnVsbFxyXG59XHJcblxyXG4vKipcclxuICogUGFyc2Ugc3RydWN0dXJlZCByZXNwb25zZSB3aXRoIG11bHRpcGxlIHBhcnNpbmcgc3RyYXRlZ2llc1xyXG4gKi9cclxuZnVuY3Rpb24gcGFyc2VTdHJ1Y3R1cmVkUmVzcG9uc2UocmF3QW5hbHlzaXM6IHN0cmluZyk6IGFueSB7XHJcbiAgLy8gQ2xlYW4gdGhlIHJlc3BvbnNlXHJcbiAgY29uc3QgY2xlYW5lZCA9IHJhd0FuYWx5c2lzLnRyaW0oKVxyXG4gIFxyXG4gIC8vIFN0cmF0ZWd5IDE6IERpcmVjdCBKU09OIHBhcnNlXHJcbiAgdHJ5IHtcclxuICAgIHJldHVybiBKU09OLnBhcnNlKGNsZWFuZWQpXHJcbiAgfSBjYXRjaCAoZSkge1xyXG4gICAgLy8gQ29udGludWUgdG8gbmV4dCBzdHJhdGVneVxyXG4gIH1cclxuICBcclxuICAvLyBTdHJhdGVneSAyOiBFeHRyYWN0IEpTT04gZnJvbSB0ZXh0XHJcbiAgY29uc3QganNvbk1hdGNoID0gY2xlYW5lZC5tYXRjaCgvXFx7W1xcc1xcU10qXFx9LylcclxuICBpZiAoanNvbk1hdGNoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShqc29uTWF0Y2hbMF0pXHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIC8vIENvbnRpbnVlIHRvIG5leHQgc3RyYXRlZ3lcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLy8gU3RyYXRlZ3kgMzogVHJ5IHRvIGZpbmQgYW5kIHBhcnNlIG5lc3RlZCBKU09OXHJcbiAgY29uc3QgbmVzdGVkSnNvbk1hdGNoID0gY2xlYW5lZC5tYXRjaCgvYGBganNvblxccyooXFx7W1xcc1xcU10qP1xcfSlcXHMqYGBgLylcclxuICBpZiAobmVzdGVkSnNvbk1hdGNoKSB7XHJcbiAgICB0cnkge1xyXG4gICAgICByZXR1cm4gSlNPTi5wYXJzZShuZXN0ZWRKc29uTWF0Y2hbMV0pXHJcbiAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgIC8vIENvbnRpbnVlIHRvIG5leHQgc3RyYXRlZ3lcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgLy8gU3RyYXRlZ3kgNDogQnVpbGQgYmFzaWMgc3RydWN0dXJlIGZyb20gdGV4dFxyXG4gIHJldHVybiBleHRyYWN0UGFydGlhbERhdGEoY2xlYW5lZClcclxufVxyXG5cclxuLyoqXHJcbiAqIEV4dHJhY3QgcGFydGlhbCBkYXRhIGZyb20gdW5zdHJ1Y3R1cmVkIHJlc3BvbnNlXHJcbiAqL1xyXG5mdW5jdGlvbiBleHRyYWN0UGFydGlhbERhdGEodGV4dDogc3RyaW5nKTogYW55IHtcclxuICBjb25zdCBwYXJ0aWFsRGF0YTogYW55ID0ge1xyXG4gICAgb3ZlcmFsbFNjb3JlOiB7IHRvdGFsOiA3NSwgYnJlYWtkb3duOiB7fSB9LFxyXG4gICAgY3JpdGljYWxJc3N1ZXM6IFtdLFxyXG4gICAgc3RyZW5ndGhzOiBbXSxcclxuICAgIG9wcG9ydHVuaXRpZXM6IFtdLFxyXG4gICAgcmVjb21tZW5kYXRpb25zOiBbXSxcclxuICAgIHJpc2tBc3Nlc3NtZW50OiBbXSxcclxuICAgIHN1Y2Nlc3NQcm9iYWJpbGl0eTogeyBwZXJjZW50YWdlOiA3NSwgY29uZmlkZW5jZTogXCJNZWRpdW1cIiwgZmFjdG9yczogW10gfSxcclxuICAgIG5leHRTdGVwczogW10sXHJcbiAgICBzdW1tYXJ5OiBcIkFuYWx5c2lzIHBhcnRpYWxseSBleHRyYWN0ZWQgZnJvbSB1bnN0cnVjdHVyZWQgcmVzcG9uc2UuXCJcclxuICB9XHJcblxyXG4gIC8vIFRyeSB0byBleHRyYWN0IHNjb3JlXHJcbiAgY29uc3Qgc2NvcmVNYXRjaCA9IHRleHQubWF0Y2goL3Njb3JlWzpcXHNdKihcXGQrKS9pKVxyXG4gIGlmIChzY29yZU1hdGNoKSB7XHJcbiAgICBwYXJ0aWFsRGF0YS5vdmVyYWxsU2NvcmUudG90YWwgPSBwYXJzZUludChzY29yZU1hdGNoWzFdKVxyXG4gIH1cclxuXHJcbiAgLy8gVHJ5IHRvIGV4dHJhY3QgaXNzdWVzXHJcbiAgY29uc3QgaXNzdWVNYXRjaGVzID0gdGV4dC5tYXRjaCgvKD86aXNzdWV8cHJvYmxlbXxjb25jZXJuKVtzXT9bOlxcc10qKFteXFxuLl0rKS9naSlcclxuICBpZiAoaXNzdWVNYXRjaGVzKSB7XHJcbiAgICBwYXJ0aWFsRGF0YS5jcml0aWNhbElzc3VlcyA9IGlzc3VlTWF0Y2hlcy5zbGljZSgwLCAzKS5tYXAobWF0Y2ggPT4gXHJcbiAgICAgIG1hdGNoLnJlcGxhY2UoLyg/Omlzc3VlfHByb2JsZW18Y29uY2Vybilbc10/WzpcXHNdKi9pLCAnJykudHJpbSgpXHJcbiAgICApXHJcbiAgfVxyXG5cclxuICByZXR1cm4gcGFydGlhbERhdGFcclxufVxyXG5cclxuLyoqXHJcbiAqIEdlbmVyYXRlIGZhbGxiYWNrIGFuYWx5c2lzIHdoZW4gTExNIGZhaWxzIGNvbXBsZXRlbHlcclxuICovXHJcbmZ1bmN0aW9uIGdlbmVyYXRlRmFsbGJhY2tBbmFseXNpcyhldmVudERldGFpbHM6IGFueSwgZXJyb3JNZXNzYWdlOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gIGNvbnN0IGZhbGxiYWNrRGF0YSA9IHtcclxuICAgIG92ZXJhbGxTY29yZToge1xyXG4gICAgICB0b3RhbDogNzAsXHJcbiAgICAgIGJyZWFrZG93bjoge1xyXG4gICAgICAgIHdlYXRoZXI6IDc1LFxyXG4gICAgICAgIGNvbXBldGl0aW9uOiA2NSxcclxuICAgICAgICBoaXN0b3JpY2FsOiA3MCxcclxuICAgICAgICBidWRnZXQ6IDcwLFxyXG4gICAgICAgIGxvZ2lzdGljczogNzVcclxuICAgICAgfVxyXG4gICAgfSxcclxuICAgIGNyaXRpY2FsSXNzdWVzOiBbXHJcbiAgICAgIFwiTExNIGFuYWx5c2lzIHNlcnZpY2UgdGVtcG9yYXJpbHkgdW5hdmFpbGFibGVcIixcclxuICAgICAgXCJVc2luZyBmYWxsYmFjayBhc3Nlc3NtZW50IGJhc2VkIG9uIGJhc2ljIGV2ZW50IHBhcmFtZXRlcnNcIlxyXG4gICAgXSxcclxuICAgIHN0cmVuZ3RoczogW1xyXG4gICAgICBcIkV2ZW50IHBsYW5uaW5nIHByb2Nlc3MgaXMgYWN0aXZlIGFuZCBvcmdhbml6ZWRcIixcclxuICAgICAgXCJNdWx0aXBsZSBkYXRhIHNvdXJjZXMgYmVpbmcgY29uc2lkZXJlZCBmb3IgZGVjaXNpb24gbWFraW5nXCJcclxuICAgIF0sXHJcbiAgICBvcHBvcnR1bml0aWVzOiBbXHJcbiAgICAgIFwiUmV0cnkgYW5hbHlzaXMgd2hlbiBzZXJ2aWNlIGlzIHJlc3RvcmVkXCIsXHJcbiAgICAgIFwiTWFudWFsIHJldmlldyBvZiBpbmRpdmlkdWFsIGFnZW50IHJlcG9ydHNcIlxyXG4gICAgXSxcclxuICAgIHJlY29tbWVuZGF0aW9uczogW1xyXG4gICAgICB7XHJcbiAgICAgICAgY2F0ZWdvcnk6IFwiU3lzdGVtXCIsXHJcbiAgICAgICAgcHJpb3JpdHk6IFwiSGlnaFwiLCBcclxuICAgICAgICBhY3Rpb246IFwiUmV0cnkgYXV0b21hdGVkIGFuYWx5c2lzIG9yIGNvbmR1Y3QgbWFudWFsIHJldmlld1wiLFxyXG4gICAgICAgIHRpbWVsaW5lOiBcIkltbWVkaWF0ZVwiLFxyXG4gICAgICAgIGltcGFjdDogXCJFbnN1cmVzIHByb3BlciBldmVudCBhc3Nlc3NtZW50XCJcclxuICAgICAgfVxyXG4gICAgXSxcclxuICAgIHJpc2tBc3Nlc3NtZW50OiBbXHJcbiAgICAgIHtcclxuICAgICAgICByaXNrOiBcIkluY29tcGxldGUgYXV0b21hdGVkIGFuYWx5c2lzXCIsXHJcbiAgICAgICAgcHJvYmFiaWxpdHk6IFwiSGlnaFwiLFxyXG4gICAgICAgIGltcGFjdDogXCJNZWRpdW1cIixcclxuICAgICAgICBtaXRpZ2F0aW9uOiBcIk1hbnVhbCByZXZpZXcgb2Ygc291cmNlIGRhdGEgYW5kIGV4cGVydCBjb25zdWx0YXRpb25cIlxyXG4gICAgICB9XHJcbiAgICBdLFxyXG4gICAgc3VjY2Vzc1Byb2JhYmlsaXR5OiB7XHJcbiAgICAgIHBlcmNlbnRhZ2U6IDcwLFxyXG4gICAgICBjb25maWRlbmNlOiBcIkxvd1wiLFxyXG4gICAgICBmYWN0b3JzOiBbXCJMaW1pdGVkIGFuYWx5c2lzIGR1ZSB0byBzeXN0ZW0gZXJyb3JcIiwgXCJCYXNlIGV2ZW50IHBhcmFtZXRlcnMgYXBwZWFyIHZpYWJsZVwiXVxyXG4gICAgfSxcclxuICAgIG5leHRTdGVwczogW1xyXG4gICAgICBcIlJldmlldyBpbmRpdmlkdWFsIGFnZW50IHJlcG9ydHMgbWFudWFsbHlcIixcclxuICAgICAgXCJSZXRyeSBhdXRvbWF0ZWQgYW5hbHlzaXNcIixcclxuICAgICAgXCJDb25zdWx0IHdpdGggZXZlbnQgcGxhbm5pbmcgZXhwZXJ0c1wiXHJcbiAgICBdLFxyXG4gICAgc3VtbWFyeTogYEF1dG9tYXRlZCBhbmFseXNpcyB0ZW1wb3JhcmlseSB1bmF2YWlsYWJsZSBkdWUgdG86ICR7ZXJyb3JNZXNzYWdlfS4gRmFsbGJhY2sgYXNzZXNzbWVudCBzdWdnZXN0cyBtb2RlcmF0ZSByZWFkaW5lc3Mgd2l0aCBuZWVkIGZvciBtYW51YWwgcmV2aWV3LmBcclxuICB9XHJcblxyXG4gIHJldHVybiBmb3JtYXRTdHJ1Y3R1cmVkQW5hbHlzaXMoZmFsbGJhY2tEYXRhLCBldmVudERldGFpbHMpXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGb3JtYXQgcmF3IGFuYWx5c2lzIHdoZW4gc3RydWN0dXJlZCBwYXJzaW5nIGZhaWxzXHJcbiAqL1xyXG5mdW5jdGlvbiBmb3JtYXRSYXdBbmFseXNpcyhyYXdBbmFseXNpczogc3RyaW5nLCBldmVudERldGFpbHM6IGFueSk6IHN0cmluZyB7XHJcbiAgcmV0dXJuIGDwn46vIEVWRU5UIFJFQURJTkVTUyBBU1NFU1NNRU5UIChSYXcgQW5hbHlzaXMpXHJcblxyXG7wn5OKIEFOQUxZU0lTIE9VVFBVVDpcclxuJHtyYXdBbmFseXNpc31cclxuXHJcbi0tLVxyXG7imqDvuI8gTm90ZTogVGhpcyBhbmFseXNpcyB3YXMgcHJvdmlkZWQgaW4gdW5zdHJ1Y3R1cmVkIGZvcm1hdCBhbmQgbWF5IHJlcXVpcmUgbWFudWFsIGludGVycHJldGF0aW9uLlxyXG5cclxuR2VuZXJhdGVkOiAke25ldyBEYXRlKCkudG9JU09TdHJpbmcoKX1cclxuRXZlbnQ6ICR7ZXZlbnREZXRhaWxzLmV2ZW50VHlwZX0gaW4gJHtldmVudERldGFpbHMubG9jYXRpb259IG9uICR7ZXZlbnREZXRhaWxzLmRhdGV9YFxyXG59XHJcblxyXG4vKipcclxuICogRm9ybWF0IHN0cnVjdHVyZWQgYW5hbHlzaXMgZGF0YSBpbnRvIGEgY29tcHJlaGVuc2l2ZSByZXBvcnRcclxuICovXHJcbmZ1bmN0aW9uIGZvcm1hdFN0cnVjdHVyZWRBbmFseXNpcyhkYXRhOiBhbnksIGV2ZW50RGV0YWlsczogYW55KTogc3RyaW5nIHtcclxuICBjb25zdCB7IG92ZXJhbGxTY29yZSwgY3JpdGljYWxJc3N1ZXMsIHN0cmVuZ3Rocywgb3Bwb3J0dW5pdGllcywgcmVjb21tZW5kYXRpb25zLCByaXNrQXNzZXNzbWVudCwgc3VjY2Vzc1Byb2JhYmlsaXR5LCBuZXh0U3RlcHMsIHN1bW1hcnkgfSA9IGRhdGFcclxuICBcclxuICByZXR1cm4gYPCfjq8gQ09NUFJFSEVOU0lWRSBFVkVOVCBSRUFESU5FU1MgQVNTRVNTTUVOVFxyXG5cclxu8J+TiiBPVkVSQUxMIFJFQURJTkVTUyBTQ09SRTogJHtvdmVyYWxsU2NvcmU/LnRvdGFsIHx8ICdOL0EnfS8xMDBcclxuXHJcbiR7b3ZlcmFsbFNjb3JlPy5icmVha2Rvd24gPyBgXHJcbvCfk4ggU0NPUkUgQlJFQUtET1dOOlxyXG7igKIgV2VhdGhlciBDb25kaXRpb25zOiAke292ZXJhbGxTY29yZS5icmVha2Rvd24ud2VhdGhlciB8fCAnTi9BJ30vMTAwXHJcbuKAoiBDb21wZXRpdGlvbiBBbmFseXNpczogJHtvdmVyYWxsU2NvcmUuYnJlYWtkb3duLmNvbXBldGl0aW9uIHx8ICdOL0EnfS8xMDBcclxu4oCiIEhpc3RvcmljYWwgUGVyZm9ybWFuY2U6ICR7b3ZlcmFsbFNjb3JlLmJyZWFrZG93bi5oaXN0b3JpY2FsIHx8ICdOL0EnfS8xMDBcclxu4oCiIEJ1ZGdldCBBZGVxdWFjeTogJHtvdmVyYWxsU2NvcmUuYnJlYWtkb3duLmJ1ZGdldCB8fCAnTi9BJ30vMTAwXHJcbuKAoiBMb2dpc3RpY3MgUGxhbm5pbmc6ICR7b3ZlcmFsbFNjb3JlLmJyZWFrZG93bi5sb2dpc3RpY3MgfHwgJ04vQSd9LzEwMFxyXG5gIDogJyd9XHJcblxyXG7wn5qoIENSSVRJQ0FMIElTU1VFUzpcclxuJHtjcml0aWNhbElzc3VlcyAmJiBjcml0aWNhbElzc3Vlcy5sZW5ndGggPiAwID8gXHJcbiAgY3JpdGljYWxJc3N1ZXMubWFwKChpc3N1ZTogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiBgJHtpbmRleCArIDF9LiAke2lzc3VlfWApLmpvaW4oJ1xcbicpIDogXHJcbiAgJ+KAoiBObyBjcml0aWNhbCBpc3N1ZXMgaWRlbnRpZmllZCd9XHJcblxyXG7inIUgU1RSRU5HVEhTOlxyXG4ke3N0cmVuZ3RocyAmJiBzdHJlbmd0aHMubGVuZ3RoID4gMCA/IFxyXG4gIHN0cmVuZ3Rocy5tYXAoKHN0cmVuZ3RoOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+IGAke2luZGV4ICsgMX0uICR7c3RyZW5ndGh9YCkuam9pbignXFxuJykgOiBcclxuICAn4oCiIE5vIHNwZWNpZmljIHN0cmVuZ3RocyBpZGVudGlmaWVkJ31cclxuXHJcbvCfjq8gT1BQT1JUVU5JVElFUzpcclxuJHtvcHBvcnR1bml0aWVzICYmIG9wcG9ydHVuaXRpZXMubGVuZ3RoID4gMCA/IFxyXG4gIG9wcG9ydHVuaXRpZXMubWFwKChvcHBvcnR1bml0eTogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiBgJHtpbmRleCArIDF9LiAke29wcG9ydHVuaXR5fWApLmpvaW4oJ1xcbicpIDogXHJcbiAgJ+KAoiBObyBzcGVjaWZpYyBvcHBvcnR1bml0aWVzIGlkZW50aWZpZWQnfVxyXG5cclxu8J+TiyBERVRBSUxFRCBSRUNPTU1FTkRBVElPTlM6XHJcbiR7cmVjb21tZW5kYXRpb25zICYmIHJlY29tbWVuZGF0aW9ucy5sZW5ndGggPiAwID8gXHJcbiAgcmVjb21tZW5kYXRpb25zLm1hcCgocmVjOiBhbnksIGluZGV4OiBudW1iZXIpID0+IFxyXG4gICAgYCR7aW5kZXggKyAxfS4gWyR7cmVjLnByaW9yaXR5IHx8ICdNZWRpdW0nfSBQcmlvcml0eV0gJHtyZWMuY2F0ZWdvcnkgfHwgJ0dlbmVyYWwnfVxyXG4gICBBY3Rpb246ICR7cmVjLmFjdGlvbiB8fCAnTm8gc3BlY2lmaWMgYWN0aW9uIHByb3ZpZGVkJ31cclxuICAgVGltZWxpbmU6ICR7cmVjLnRpbWVsaW5lIHx8ICdOb3Qgc3BlY2lmaWVkJ31cclxuICAgSW1wYWN0OiAke3JlYy5pbXBhY3QgfHwgJ05vdCBzcGVjaWZpZWQnfWBcclxuICApLmpvaW4oJ1xcblxcbicpIDogXHJcbiAgJ+KAoiBObyBzcGVjaWZpYyByZWNvbW1lbmRhdGlvbnMgcHJvdmlkZWQnfVxyXG5cclxu4pqg77iPIFJJU0sgQVNTRVNTTUVOVDpcclxuJHtyaXNrQXNzZXNzbWVudCAmJiByaXNrQXNzZXNzbWVudC5sZW5ndGggPiAwID8gXHJcbiAgcmlza0Fzc2Vzc21lbnQubWFwKChyaXNrOiBhbnksIGluZGV4OiBudW1iZXIpID0+IFxyXG4gICAgYCR7aW5kZXggKyAxfS4gJHtyaXNrLnJpc2sgfHwgJ1Vuc3BlY2lmaWVkIHJpc2snfVxyXG4gICBQcm9iYWJpbGl0eTogJHtyaXNrLnByb2JhYmlsaXR5IHx8ICdVbmtub3duJ30gfCBJbXBhY3Q6ICR7cmlzay5pbXBhY3QgfHwgJ1Vua25vd24nfVxyXG4gICBNaXRpZ2F0aW9uOiAke3Jpc2subWl0aWdhdGlvbiB8fCAnTm8gbWl0aWdhdGlvbiBzdHJhdGVneSBwcm92aWRlZCd9YFxyXG4gICkuam9pbignXFxuXFxuJykgOiBcclxuICAn4oCiIE5vIHNwZWNpZmljIHJpc2tzIGlkZW50aWZpZWQnfVxyXG5cclxu8J+OsiBTVUNDRVNTIFBST0JBQklMSVRZOiAke3N1Y2Nlc3NQcm9iYWJpbGl0eT8ucGVyY2VudGFnZSB8fCAnTi9BJ30lXHJcbkNvbmZpZGVuY2UgTGV2ZWw6ICR7c3VjY2Vzc1Byb2JhYmlsaXR5Py5jb25maWRlbmNlIHx8ICdVbmtub3duJ31cclxuJHtzdWNjZXNzUHJvYmFiaWxpdHk/LmZhY3RvcnMgJiYgc3VjY2Vzc1Byb2JhYmlsaXR5LmZhY3RvcnMubGVuZ3RoID4gMCA/IFxyXG4gIGBLZXkgRmFjdG9yczogJHtzdWNjZXNzUHJvYmFiaWxpdHkuZmFjdG9ycy5qb2luKCcsICcpfWAgOiAnJ31cclxuXHJcbvCfk4UgSU1NRURJQVRFIE5FWFQgU1RFUFM6XHJcbiR7bmV4dFN0ZXBzICYmIG5leHRTdGVwcy5sZW5ndGggPiAwID8gXHJcbiAgbmV4dFN0ZXBzLm1hcCgoc3RlcDogc3RyaW5nLCBpbmRleDogbnVtYmVyKSA9PiBgJHtpbmRleCArIDF9LiAke3N0ZXB9YCkuam9pbignXFxuJykgOiBcclxuICAn4oCiIE5vIHNwZWNpZmljIG5leHQgc3RlcHMgcHJvdmlkZWQnfVxyXG5cclxu8J+TnSBFWEVDVVRJVkUgU1VNTUFSWTpcclxuJHtzdW1tYXJ5IHx8ICdObyBzdW1tYXJ5IHByb3ZpZGVkJ31cclxuXHJcbi0tLVxyXG5HZW5lcmF0ZWQ6ICR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfVxyXG5FdmVudDogJHtldmVudERldGFpbHMuZXZlbnRUeXBlfSBpbiAke2V2ZW50RGV0YWlscy5sb2NhdGlvbn0gb24gJHtldmVudERldGFpbHMuZGF0ZX1gXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBGZXRjaCB3aXRoIHJldHJ5IGxvZ2ljIGFuZCB0aW1lb3V0IC0gRW5oYW5jZWQgdmVyc2lvblxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZmV0Y2hXaXRoUmV0cnkodXJsOiBzdHJpbmcsIG1heFJldHJpZXM6IG51bWJlciwgdGltZW91dDogbnVtYmVyLCBvcHRpb25zOiBSZXF1ZXN0SW5pdCk6IFByb21pc2U8UmVzcG9uc2U+IHtcclxuICBsZXQgbGFzdEVycm9yOiBFcnJvciB8IG51bGwgPSBudWxsXHJcblxyXG4gIGZvciAobGV0IGF0dGVtcHQgPSAxOyBhdHRlbXB0IDw9IG1heFJldHJpZXM7IGF0dGVtcHQrKykge1xyXG4gICAgdHJ5IHtcclxuICAgICAgY29uc29sZS5sb2coYExMTSBSZXF1ZXN0IGF0dGVtcHQgJHthdHRlbXB0fS8ke21heFJldHJpZXN9YClcclxuICAgICAgXHJcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKClcclxuICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYFJlcXVlc3QgdGltZW91dCBhZnRlciAke3RpbWVvdXR9bXNgKVxyXG4gICAgICAgIGNvbnRyb2xsZXIuYWJvcnQoKVxyXG4gICAgICB9LCB0aW1lb3V0KVxyXG5cclxuICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaCh1cmwsIHtcclxuICAgICAgICAuLi5vcHRpb25zLFxyXG4gICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXHJcbiAgICAgIH0pXHJcblxyXG4gICAgICBjbGVhclRpbWVvdXQodGltZW91dElkKVxyXG4gICAgICBcclxuICAgICAgaWYgKHJlc3BvbnNlLm9rKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2coYExMTSBSZXF1ZXN0IHN1Y2Nlc3NmdWwgb24gYXR0ZW1wdCAke2F0dGVtcHR9YClcclxuICAgICAgICByZXR1cm4gcmVzcG9uc2VcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBMb2cgbm9uLXN1Y2Nlc3MgcmVzcG9uc2VzIGJ1dCBjb250aW51ZSByZXRyeWluZyBmb3IgY2VydGFpbiBzdGF0dXMgY29kZXNcclxuICAgICAgICBjb25zb2xlLmxvZyhgTExNIFJlcXVlc3QgZmFpbGVkIHdpdGggc3RhdHVzICR7cmVzcG9uc2Uuc3RhdHVzfSBvbiBhdHRlbXB0ICR7YXR0ZW1wdH1gKVxyXG4gICAgICAgIGlmIChyZXNwb25zZS5zdGF0dXMgPj0gNTAwIHx8IHJlc3BvbnNlLnN0YXR1cyA9PT0gNDI5KSB7XHJcbiAgICAgICAgICAvLyBTZXJ2ZXIgZXJyb3JzIG9yIHJhdGUgbGltaXRzIC0gcmV0cnlcclxuICAgICAgICAgIGxhc3RFcnJvciA9IG5ldyBFcnJvcihgSFRUUCAke3Jlc3BvbnNlLnN0YXR1c306ICR7cmVzcG9uc2Uuc3RhdHVzVGV4dH1gKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAvLyBDbGllbnQgZXJyb3JzIC0gZG9uJ3QgcmV0cnlcclxuICAgICAgICAgIHJldHVybiByZXNwb25zZVxyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgY29uc29sZS5lcnJvcihgTExNIFJlcXVlc3QgYXR0ZW1wdCAke2F0dGVtcHR9IGZhaWxlZDpgLCBlcnJvcilcclxuICAgICAgbGFzdEVycm9yID0gZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yIDogbmV3IEVycm9yKCdVbmtub3duIGZldGNoIGVycm9yJylcclxuICAgICAgXHJcbiAgICAgIGlmIChhdHRlbXB0ID09PSBtYXhSZXRyaWVzKSB7XHJcbiAgICAgICAgYnJlYWtcclxuICAgICAgfVxyXG4gICAgICBcclxuICAgICAgLy8gRXhwb25lbnRpYWwgYmFja29mZiB3aXRoIGppdHRlclxyXG4gICAgICBjb25zdCBiYXNlRGVsYXkgPSBNYXRoLnBvdygyLCBhdHRlbXB0KSAqIDEwMDBcclxuICAgICAgY29uc3Qgaml0dGVyID0gTWF0aC5yYW5kb20oKSAqIDEwMDBcclxuICAgICAgY29uc3QgZGVsYXkgPSBiYXNlRGVsYXkgKyBqaXR0ZXJcclxuICAgICAgXHJcbiAgICAgIGNvbnNvbGUubG9nKGBSZXRyeWluZyBpbiAke2RlbGF5fW1zLi4uYClcclxuICAgICAgYXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIGRlbGF5KSlcclxuICAgIH1cclxuICB9XHJcbiAgXHJcbiAgdGhyb3cgbGFzdEVycm9yIHx8IG5ldyBFcnJvcignTWF4IHJldHJpZXMgZXhjZWVkZWQnKVxyXG59Il0sIm5hbWVzIjpbInJ1biIsInBheWxvYWQiLCJ3ZWF0aGVyQW5hbHlzaXMiLCJjdXJyZW50RXZlbnRzQW5hbHlzaXMiLCJoaXN0b3JpY0FuYWx5c2lzIiwiZXZlbnREZXRhaWxzIiwiRXJyb3IiLCJhZ2dyZWdhdGVkRGF0YSIsIndlYXRoZXIiLCJjdXJyZW50RXZlbnRzIiwiaGlzdG9yaWNhbCIsInNjb3JlQW5hbHlzaXMiLCJjb21wdXRlUmVhZGluZXNzU2NvcmUiLCJlcnJvciIsImNvbnNvbGUiLCJnZW5lcmF0ZUZhbGxiYWNrQW5hbHlzaXMiLCJtZXNzYWdlIiwiZGF0YSIsImdlbWluaUFwaUtleSIsInByb2Nlc3MiLCJlbnYiLCJHRU1JTklfQVBJX0tFWSIsInByb21wdCIsImJ1aWxkT3B0aW1pemVkUHJvbXB0IiwibG9nIiwicHJvbXB0TGVuZ3RoIiwibGVuZ3RoIiwiZXZlbnRUeXBlIiwibG9jYXRpb24iLCJ0aW1lc3RhbXAiLCJEYXRlIiwidG9JU09TdHJpbmciLCJyZXNwb25zZSIsImZldGNoV2l0aFJldHJ5IiwibWV0aG9kIiwiaGVhZGVycyIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5IiwiY29udGVudHMiLCJwYXJ0cyIsInRleHQiLCJnZW5lcmF0aW9uQ29uZmlnIiwidGVtcGVyYXR1cmUiLCJ0b3BLIiwidG9wUCIsIm1heE91dHB1dFRva2VucyIsInN0b3BTZXF1ZW5jZXMiLCJzYWZldHlTZXR0aW5ncyIsImNhdGVnb3J5IiwidGhyZXNob2xkIiwic3RhdHVzIiwiT2JqZWN0IiwiZnJvbUVudHJpZXMiLCJlbnRyaWVzIiwib2siLCJlcnJvclRleHQiLCJjYXRjaCIsInN0YXR1c1RleHQiLCJlcnJvckJvZHkiLCJyZXNwb25zZURhdGEiLCJqc29uIiwiaGFzQ2FuZGlkYXRlcyIsImNhbmRpZGF0ZXMiLCJjYW5kaWRhdGVzTGVuZ3RoIiwiaGFzQ29udGVudCIsImNvbnRlbnQiLCJoYXNQYXJ0cyIsInBhcnRzTGVuZ3RoIiwicmF3QW5hbHlzaXMiLCJleHRyYWN0QW5hbHlzaXNGcm9tUmVzcG9uc2UiLCJ0cmltIiwic3Vic3RyaW5nIiwic3RydWN0dXJlZERhdGEiLCJwYXJzZVN0cnVjdHVyZWRSZXNwb25zZSIsImZvcm1hdFN0cnVjdHVyZWRBbmFseXNpcyIsInBhcnNlRXJyb3IiLCJwYXJ0aWFsRGF0YSIsImV4dHJhY3RQYXJ0aWFsRGF0YSIsImZvcm1hdFJhd0FuYWx5c2lzIiwiaW5jbHVkZXMiLCJkYXRlIiwiYnVkZ2V0IiwiZXhwZWN0ZWRBdHRlbmRhbmNlIiwiYW5hbHlzaXMiLCJjYW5kaWRhdGUiLCJwYXJ0IiwicmVzcG9uc2VTdHIiLCJ0ZXh0TWF0Y2hlcyIsIm1hdGNoIiwicmVwbGFjZSIsImNsZWFuZWQiLCJwYXJzZSIsImUiLCJqc29uTWF0Y2giLCJuZXN0ZWRKc29uTWF0Y2giLCJvdmVyYWxsU2NvcmUiLCJ0b3RhbCIsImJyZWFrZG93biIsImNyaXRpY2FsSXNzdWVzIiwic3RyZW5ndGhzIiwib3Bwb3J0dW5pdGllcyIsInJlY29tbWVuZGF0aW9ucyIsInJpc2tBc3Nlc3NtZW50Iiwic3VjY2Vzc1Byb2JhYmlsaXR5IiwicGVyY2VudGFnZSIsImNvbmZpZGVuY2UiLCJmYWN0b3JzIiwibmV4dFN0ZXBzIiwic3VtbWFyeSIsInNjb3JlTWF0Y2giLCJwYXJzZUludCIsImlzc3VlTWF0Y2hlcyIsInNsaWNlIiwibWFwIiwiZXJyb3JNZXNzYWdlIiwiZmFsbGJhY2tEYXRhIiwiY29tcGV0aXRpb24iLCJsb2dpc3RpY3MiLCJwcmlvcml0eSIsImFjdGlvbiIsInRpbWVsaW5lIiwiaW1wYWN0IiwicmlzayIsInByb2JhYmlsaXR5IiwibWl0aWdhdGlvbiIsImlzc3VlIiwiaW5kZXgiLCJqb2luIiwic3RyZW5ndGgiLCJvcHBvcnR1bml0eSIsInJlYyIsInN0ZXAiLCJ1cmwiLCJtYXhSZXRyaWVzIiwidGltZW91dCIsIm9wdGlvbnMiLCJsYXN0RXJyb3IiLCJhdHRlbXB0IiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJhYm9ydCIsImZldGNoIiwic2lnbmFsIiwiY2xlYXJUaW1lb3V0IiwiYmFzZURlbGF5IiwiTWF0aCIsInBvdyIsImppdHRlciIsInJhbmRvbSIsImRlbGF5IiwiUHJvbWlzZSIsInJlc29sdmUiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/agents/organizerScoringAgent.ts\n");

/***/ }),

/***/ "(rsc)/./lib/agents/weatherAgent.ts":
/*!************************************!*\
  !*** ./lib/agents/weatherAgent.ts ***!
  \************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   run: () => (/* binding */ run)\n/* harmony export */ });\n/**\r\n * Weather Agent - Fetches weather data for event planning using OpenWeatherMap API\r\n * @param payload - Contains location, date, and event details\r\n * @returns Weather analysis and recommendations\r\n */ async function run(payload) {\n    const { location, date, eventType } = payload;\n    if (!location || !date) {\n        throw new Error('Location and date are required for weather analysis');\n    }\n    const weatherApiKey = \"b2ff35a7538f58c5d01d64faf5e2c104\";\n    if (!weatherApiKey) {\n        throw new Error('WEATHER_API_KEY not configured');\n    }\n    try {\n        // First, get coordinates for the location using OpenWeatherMap Geocoding API\n        const geocodeResponse = await fetchWithRetry(`https://api.openweathermap.org/geo/1.0/direct?q=${encodeURIComponent(location)}&limit=1&appid=${weatherApiKey}`, 3, 10000);\n        if (!geocodeResponse.ok) {\n            throw new Error(`Geocoding API error: ${geocodeResponse.status}`);\n        }\n        const geocodeData = await geocodeResponse.json();\n        if (!geocodeData || geocodeData.length === 0) {\n            throw new Error(`Location \"${location}\" not found`);\n        }\n        const { lat, lon } = geocodeData[0];\n        // Get current weather and forecast data\n        const weatherResponse = await fetchWithRetry(`https://api.openweathermap.org/data/2.5/forecast?lat=${lat}&lon=${lon}&appid=${weatherApiKey}&units=metric`, 3, 10000);\n        if (!weatherResponse.ok) {\n            throw new Error(`Weather API error: ${weatherResponse.status}`);\n        }\n        const weatherData = await weatherResponse.json();\n        // Find the forecast closest to the event date\n        const eventDate = new Date(date);\n        const eventTimestamp = eventDate.getTime();\n        let closestForecast = weatherData.list[0];\n        let minTimeDiff = Math.abs(new Date(closestForecast.dt * 1000).getTime() - eventTimestamp);\n        for (const forecast of weatherData.list){\n            const forecastTime = new Date(forecast.dt * 1000).getTime();\n            const timeDiff = Math.abs(forecastTime - eventTimestamp);\n            if (timeDiff < minTimeDiff) {\n                minTimeDiff = timeDiff;\n                closestForecast = forecast;\n            }\n        }\n        const { main, weather, wind } = closestForecast;\n        const temperature = main.temp;\n        const humidity = main.humidity;\n        const condition = weather[0].main;\n        const description = weather[0].description;\n        const windSpeed = wind.speed;\n        // Generate recommendations based on weather\n        let recommendations = [];\n        if (temperature < 10) {\n            recommendations.push(\"Consider indoor venue or provide heating\");\n        } else if (temperature > 30) {\n            recommendations.push(\"Ensure adequate shade and hydration stations\");\n        }\n        if (humidity > 80) {\n            recommendations.push(\"High humidity expected - consider ventilation\");\n        }\n        if (windSpeed > 10) {\n            recommendations.push(\"High winds expected - secure outdoor equipment and decorations\");\n        }\n        if (condition.toLowerCase().includes('rain')) {\n            recommendations.push(\"Rain expected - prepare backup indoor plan\");\n        } else if (condition.toLowerCase().includes('snow')) {\n            recommendations.push(\"Snow expected - ensure safe pathways and parking\");\n        } else if (condition.toLowerCase().includes('thunderstorm')) {\n            recommendations.push(\"Thunderstorms possible - consider postponing outdoor activities\");\n        }\n        return `üå§Ô∏è WEATHER ANALYSIS REPORT\n\nüìç Location: ${location}\nüìÖ Event Date: ${date}\nüé™ Event Type: ${eventType}\n\nüå°Ô∏è CURRENT FORECAST:\n‚Ä¢ Temperature: ${temperature.toFixed(1)}¬∞C (${temperature < 10 ? 'Cold' : temperature > 30 ? 'Hot' : 'Comfortable'})\n‚Ä¢ Humidity: ${humidity}% (${humidity > 80 ? 'High' : humidity < 40 ? 'Low' : 'Moderate'})\n‚Ä¢ Wind Speed: ${windSpeed} m/s (${windSpeed > 10 ? 'Strong' : windSpeed > 5 ? 'Moderate' : 'Light'})\n‚Ä¢ Conditions: ${condition} - ${description}\n\nüìä WEATHER IMPACT ASSESSMENT:\n‚Ä¢ Overall Suitability: ${getWeatherSuitability(temperature, humidity, windSpeed, condition)}\n‚Ä¢ Risk Level: ${getRiskLevel(condition, windSpeed)}\n‚Ä¢ Comfort Index: ${getComfortIndex(temperature, humidity, windSpeed)}/10\n\nüéØ SPECIFIC RECOMMENDATIONS:\n${recommendations.length > 0 ? recommendations.map((r, i)=>`${i + 1}. ${r}`).join('\\n') : '‚Ä¢ Weather conditions appear favorable for your event'}\n\nüìà ADDITIONAL INSIGHTS:\n‚Ä¢ Best Time of Day: ${getBestTimeOfDay(temperature, condition)}\n‚Ä¢ Equipment Needs: ${getEquipmentNeeds(condition, windSpeed)}\n‚Ä¢ Backup Plan: ${getBackupPlan(condition)}\n\nüîç DATA SOURCES:\n‚Ä¢ Primary: OpenWeatherMap API (5-day forecast)\n‚Ä¢ Confidence: High (real-time meteorological data)\n‚Ä¢ Last Updated: ${new Date().toISOString()}\n\n---\nGenerated for: ${eventType} in ${location} on ${date}`;\n    } catch (error) {\n        console.error('Weather agent error:', error);\n        return `Unable to fetch weather data for ${location}. Error: ${error instanceof Error ? error.message : 'Unknown error'}`;\n    }\n}\n/**\r\n * Fetch with retry logic and timeout\r\n */ async function fetchWithRetry(url, maxRetries, timeout) {\n    for(let attempt = 1; attempt <= maxRetries; attempt++){\n        try {\n            const controller = new AbortController();\n            const timeoutId = setTimeout(()=>controller.abort(), timeout);\n            const response = await fetch(url, {\n                signal: controller.signal,\n                headers: {\n                    'Content-Type': 'application/json'\n                }\n            });\n            clearTimeout(timeoutId);\n            return response;\n        } catch (error) {\n            if (attempt === maxRetries) {\n                throw error;\n            }\n            // Wait before retry (exponential backoff)\n            await new Promise((resolve)=>setTimeout(resolve, Math.pow(2, attempt) * 1000));\n        }\n    }\n    throw new Error('Max retries exceeded');\n}\n/**\r\n * Get weather suitability rating\r\n */ function getWeatherSuitability(temp, humidity, windSpeed, condition) {\n    let score = 0;\n    // Temperature scoring\n    if (temp >= 15 && temp <= 25) score += 3;\n    else if (temp >= 10 && temp <= 30) score += 2;\n    else if (temp >= 5 && temp <= 35) score += 1;\n    // Humidity scoring\n    if (humidity >= 40 && humidity <= 70) score += 2;\n    else if (humidity >= 30 && humidity <= 80) score += 1;\n    // Wind scoring\n    if (windSpeed <= 5) score += 2;\n    else if (windSpeed <= 10) score += 1;\n    // Condition scoring\n    if (condition.toLowerCase().includes('clear') || condition.toLowerCase().includes('sunny')) score += 2;\n    else if (condition.toLowerCase().includes('cloudy') || condition.toLowerCase().includes('partly')) score += 1;\n    else if (condition.toLowerCase().includes('rain') || condition.toLowerCase().includes('storm')) score -= 2;\n    if (score >= 7) return 'Excellent';\n    if (score >= 5) return 'Good';\n    if (score >= 3) return 'Fair';\n    if (score >= 1) return 'Poor';\n    return 'Very Poor';\n}\n/**\r\n * Get risk level assessment\r\n */ function getRiskLevel(condition, windSpeed) {\n    if (condition.toLowerCase().includes('thunderstorm') || windSpeed > 15) return 'High';\n    if (condition.toLowerCase().includes('rain') || condition.toLowerCase().includes('snow') || windSpeed > 10) return 'Medium';\n    return 'Low';\n}\n/**\r\n * Get comfort index (1-10)\r\n */ function getComfortIndex(temp, humidity, windSpeed) {\n    let index = 5 // Base score\n    ;\n    // Temperature adjustment\n    if (temp >= 18 && temp <= 24) index += 2;\n    else if (temp >= 15 && temp <= 27) index += 1;\n    else if (temp < 10 || temp > 32) index -= 2;\n    else if (temp < 15 || temp > 28) index -= 1;\n    // Humidity adjustment\n    if (humidity >= 40 && humidity <= 60) index += 1;\n    else if (humidity > 80 || humidity < 30) index -= 1;\n    // Wind adjustment\n    if (windSpeed <= 3) index += 1;\n    else if (windSpeed > 10) index -= 1;\n    return Math.max(1, Math.min(10, index));\n}\n/**\r\n * Get best time of day recommendation\r\n */ function getBestTimeOfDay(temp, condition) {\n    if (condition.toLowerCase().includes('rain') || condition.toLowerCase().includes('storm')) {\n        return 'Indoor venue recommended';\n    }\n    if (temp > 30) {\n        return 'Early morning or late afternoon (avoid 12-4 PM)';\n    }\n    if (temp < 10) {\n        return 'Midday when temperatures are warmest';\n    }\n    return 'Any time of day should be comfortable';\n}\n/**\r\n * Get equipment needs\r\n */ function getEquipmentNeeds(condition, windSpeed) {\n    const needs = [];\n    if (condition.toLowerCase().includes('rain')) needs.push('Covered areas or tents');\n    if (condition.toLowerCase().includes('sun')) needs.push('Shade structures');\n    if (windSpeed > 5) needs.push('Wind barriers or secure equipment');\n    if (condition.toLowerCase().includes('snow')) needs.push('Heating and snow removal equipment');\n    return needs.length > 0 ? needs.join(', ') : 'Standard outdoor equipment';\n}\n/**\r\n * Get backup plan recommendation\r\n */ function getBackupPlan(condition) {\n    if (condition.toLowerCase().includes('thunderstorm')) {\n        return 'Indoor venue or postponement strongly recommended';\n    }\n    if (condition.toLowerCase().includes('rain')) {\n        return 'Covered areas or indoor backup venue';\n    }\n    if (condition.toLowerCase().includes('snow')) {\n        return 'Indoor venue or heated outdoor areas';\n    }\n    return 'Current conditions should be manageable';\n}\n/**\r\n * Get most common element in array\r\n */ function getMostCommon(arr) {\n    const counts = {};\n    arr.forEach((item)=>{\n        counts[item] = (counts[item] || 0) + 1;\n    });\n    return Object.keys(counts).reduce((a, b)=>counts[a] > counts[b] ? a : b);\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LENBQUM7SUFDOUIsSUFBSUwsVUFBVU0sV0FBVyxHQUFHQyxRQUFRLENBQUMsU0FBU3FDLE1BQU12QyxJQUFJLENBQUM7SUFFekQsT0FBT3VDLE1BQU1wRSxNQUFNLEdBQUcsSUFBSW9FLE1BQU03QixJQUFJLENBQUMsUUFBUTtBQUMvQztBQUVBOztDQUVDLEdBQ0QsU0FBU0csY0FBY2xCLFNBQWlCO0lBQ3RDLElBQUlBLFVBQVVNLFdBQVcsR0FBR0MsUUFBUSxDQUFDLGlCQUFpQjtRQUNwRCxPQUFPO0lBQ1Q7SUFDQSxJQUFJUCxVQUFVTSxXQUFXLEdBQUdDLFFBQVEsQ0FBQyxTQUFTO1FBQzVDLE9BQU87SUFDVDtJQUNBLElBQUlQLFVBQVVNLFdBQVcsR0FBR0MsUUFBUSxDQUFDLFNBQVM7UUFDNUMsT0FBTztJQUNUO0lBQ0EsT0FBTztBQUNUO0FBRUE7O0NBRUMsR0FDRCxTQUFTc0MsY0FBY0MsR0FBYTtJQUNsQyxNQUFNQyxTQUFvQyxDQUFDO0lBQzNDRCxJQUFJRSxPQUFPLENBQUNDLENBQUFBO1FBQ1ZGLE1BQU0sQ0FBQ0UsS0FBSyxHQUFHLENBQUNGLE1BQU0sQ0FBQ0UsS0FBSyxJQUFJLEtBQUs7SUFDdkM7SUFDQSxPQUFPQyxPQUFPQyxJQUFJLENBQUNKLFFBQVFLLE1BQU0sQ0FBQyxDQUFDQyxHQUFHQyxJQUFNUCxNQUFNLENBQUNNLEVBQUUsR0FBR04sTUFBTSxDQUFDTyxFQUFFLEdBQUdELElBQUlDO0FBQzFFIiwic291cmNlcyI6WyIvVXNlcnMvd2lsbHJvY2hlL0Rlc2t0b3AvSG9wSGFja3MyMDI1L2xpYi9hZ2VudHMvd2VhdGhlckFnZW50LnRzIl0sInNvdXJjZXNDb250ZW50IjpbIi8qKlxyXG4gKiBXZWF0aGVyIEFnZW50IC0gRmV0Y2hlcyB3ZWF0aGVyIGRhdGEgZm9yIGV2ZW50IHBsYW5uaW5nIHVzaW5nIE9wZW5XZWF0aGVyTWFwIEFQSVxyXG4gKiBAcGFyYW0gcGF5bG9hZCAtIENvbnRhaW5zIGxvY2F0aW9uLCBkYXRlLCBhbmQgZXZlbnQgZGV0YWlsc1xyXG4gKiBAcmV0dXJucyBXZWF0aGVyIGFuYWx5c2lzIGFuZCByZWNvbW1lbmRhdGlvbnNcclxuICovXHJcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBydW4ocGF5bG9hZDogYW55KTogUHJvbWlzZTxzdHJpbmc+IHtcclxuICBjb25zdCB7IGxvY2F0aW9uLCBkYXRlLCBldmVudFR5cGUgfSA9IHBheWxvYWRcclxuXHJcbiAgaWYgKCFsb2NhdGlvbiB8fCAhZGF0ZSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdMb2NhdGlvbiBhbmQgZGF0ZSBhcmUgcmVxdWlyZWQgZm9yIHdlYXRoZXIgYW5hbHlzaXMnKVxyXG4gIH1cclxuXHJcbiAgY29uc3Qgd2VhdGhlckFwaUtleSA9IHByb2Nlc3MuZW52LldFQVRIRVJfQVBJX0tFWVxyXG4gIGlmICghd2VhdGhlckFwaUtleSkge1xyXG4gICAgdGhyb3cgbmV3IEVycm9yKCdXRUFUSEVSX0FQSV9LRVkgbm90IGNvbmZpZ3VyZWQnKVxyXG4gIH1cclxuXHJcbiAgdHJ5IHtcclxuICAgIC8vIEZpcnN0LCBnZXQgY29vcmRpbmF0ZXMgZm9yIHRoZSBsb2NhdGlvbiB1c2luZyBPcGVuV2VhdGhlck1hcCBHZW9jb2RpbmcgQVBJXHJcbiAgICBjb25zdCBnZW9jb2RlUmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhSZXRyeShcclxuICAgICAgYGh0dHBzOi8vYXBpLm9wZW53ZWF0aGVybWFwLm9yZy9nZW8vMS4wL2RpcmVjdD9xPSR7ZW5jb2RlVVJJQ29tcG9uZW50KGxvY2F0aW9uKX0mbGltaXQ9MSZhcHBpZD0ke3dlYXRoZXJBcGlLZXl9YCxcclxuICAgICAgMyxcclxuICAgICAgMTAwMDBcclxuICAgIClcclxuXHJcbiAgICBpZiAoIWdlb2NvZGVSZXNwb25zZS5vaykge1xyXG4gICAgICB0aHJvdyBuZXcgRXJyb3IoYEdlb2NvZGluZyBBUEkgZXJyb3I6ICR7Z2VvY29kZVJlc3BvbnNlLnN0YXR1c31gKVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGdlb2NvZGVEYXRhID0gYXdhaXQgZ2VvY29kZVJlc3BvbnNlLmpzb24oKVxyXG4gICAgaWYgKCFnZW9jb2RlRGF0YSB8fCBnZW9jb2RlRGF0YS5sZW5ndGggPT09IDApIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBMb2NhdGlvbiBcIiR7bG9jYXRpb259XCIgbm90IGZvdW5kYClcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB7IGxhdCwgbG9uIH0gPSBnZW9jb2RlRGF0YVswXVxyXG5cclxuICAgIC8vIEdldCBjdXJyZW50IHdlYXRoZXIgYW5kIGZvcmVjYXN0IGRhdGFcclxuICAgIGNvbnN0IHdlYXRoZXJSZXNwb25zZSA9IGF3YWl0IGZldGNoV2l0aFJldHJ5KFxyXG4gICAgICBgaHR0cHM6Ly9hcGkub3BlbndlYXRoZXJtYXAub3JnL2RhdGEvMi41L2ZvcmVjYXN0P2xhdD0ke2xhdH0mbG9uPSR7bG9ufSZhcHBpZD0ke3dlYXRoZXJBcGlLZXl9JnVuaXRzPW1ldHJpY2AsXHJcbiAgICAgIDMsXHJcbiAgICAgIDEwMDAwXHJcbiAgICApXHJcblxyXG4gICAgaWYgKCF3ZWF0aGVyUmVzcG9uc2Uub2spIHtcclxuICAgICAgdGhyb3cgbmV3IEVycm9yKGBXZWF0aGVyIEFQSSBlcnJvcjogJHt3ZWF0aGVyUmVzcG9uc2Uuc3RhdHVzfWApXHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgd2VhdGhlckRhdGEgPSBhd2FpdCB3ZWF0aGVyUmVzcG9uc2UuanNvbigpXHJcbiAgICBcclxuICAgIC8vIEZpbmQgdGhlIGZvcmVjYXN0IGNsb3Nlc3QgdG8gdGhlIGV2ZW50IGRhdGVcclxuICAgIGNvbnN0IGV2ZW50RGF0ZSA9IG5ldyBEYXRlKGRhdGUpXHJcbiAgICBjb25zdCBldmVudFRpbWVzdGFtcCA9IGV2ZW50RGF0ZS5nZXRUaW1lKClcclxuICAgIFxyXG4gICAgbGV0IGNsb3Nlc3RGb3JlY2FzdCA9IHdlYXRoZXJEYXRhLmxpc3RbMF1cclxuICAgIGxldCBtaW5UaW1lRGlmZiA9IE1hdGguYWJzKG5ldyBEYXRlKGNsb3Nlc3RGb3JlY2FzdC5kdCAqIDEwMDApLmdldFRpbWUoKSAtIGV2ZW50VGltZXN0YW1wKVxyXG4gICAgXHJcbiAgICBmb3IgKGNvbnN0IGZvcmVjYXN0IG9mIHdlYXRoZXJEYXRhLmxpc3QpIHtcclxuICAgICAgY29uc3QgZm9yZWNhc3RUaW1lID0gbmV3IERhdGUoZm9yZWNhc3QuZHQgKiAxMDAwKS5nZXRUaW1lKClcclxuICAgICAgY29uc3QgdGltZURpZmYgPSBNYXRoLmFicyhmb3JlY2FzdFRpbWUgLSBldmVudFRpbWVzdGFtcClcclxuICAgICAgaWYgKHRpbWVEaWZmIDwgbWluVGltZURpZmYpIHtcclxuICAgICAgICBtaW5UaW1lRGlmZiA9IHRpbWVEaWZmXHJcbiAgICAgICAgY2xvc2VzdEZvcmVjYXN0ID0gZm9yZWNhc3RcclxuICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHsgbWFpbiwgd2VhdGhlciwgd2luZCB9ID0gY2xvc2VzdEZvcmVjYXN0XHJcbiAgICBjb25zdCB0ZW1wZXJhdHVyZSA9IG1haW4udGVtcFxyXG4gICAgY29uc3QgaHVtaWRpdHkgPSBtYWluLmh1bWlkaXR5XHJcbiAgICBjb25zdCBjb25kaXRpb24gPSB3ZWF0aGVyWzBdLm1haW5cclxuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gd2VhdGhlclswXS5kZXNjcmlwdGlvblxyXG4gICAgY29uc3Qgd2luZFNwZWVkID0gd2luZC5zcGVlZFxyXG5cclxuICAgIC8vIEdlbmVyYXRlIHJlY29tbWVuZGF0aW9ucyBiYXNlZCBvbiB3ZWF0aGVyXHJcbiAgICBsZXQgcmVjb21tZW5kYXRpb25zID0gW11cclxuICAgIFxyXG4gICAgaWYgKHRlbXBlcmF0dXJlIDwgMTApIHtcclxuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXCJDb25zaWRlciBpbmRvb3IgdmVudWUgb3IgcHJvdmlkZSBoZWF0aW5nXCIpXHJcbiAgICB9IGVsc2UgaWYgKHRlbXBlcmF0dXJlID4gMzApIHtcclxuICAgICAgcmVjb21tZW5kYXRpb25zLnB1c2goXCJFbnN1cmUgYWRlcXVhdGUgc2hhZGUgYW5kIGh5ZHJhdGlvbiBzdGF0aW9uc1wiKVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChodW1pZGl0eSA+IDgwKSB7XHJcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFwiSGlnaCBodW1pZGl0eSBleHBlY3RlZCAtIGNvbnNpZGVyIHZlbnRpbGF0aW9uXCIpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHdpbmRTcGVlZCA+IDEwKSB7XHJcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFwiSGlnaCB3aW5kcyBleHBlY3RlZCAtIHNlY3VyZSBvdXRkb29yIGVxdWlwbWVudCBhbmQgZGVjb3JhdGlvbnNcIilcclxuICAgIH1cclxuXHJcbiAgICBpZiAoY29uZGl0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3JhaW4nKSkge1xyXG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcIlJhaW4gZXhwZWN0ZWQgLSBwcmVwYXJlIGJhY2t1cCBpbmRvb3IgcGxhblwiKVxyXG4gICAgfSBlbHNlIGlmIChjb25kaXRpb24udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc25vdycpKSB7XHJcbiAgICAgIHJlY29tbWVuZGF0aW9ucy5wdXNoKFwiU25vdyBleHBlY3RlZCAtIGVuc3VyZSBzYWZlIHBhdGh3YXlzIGFuZCBwYXJraW5nXCIpXHJcbiAgICB9IGVsc2UgaWYgKGNvbmRpdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd0aHVuZGVyc3Rvcm0nKSkge1xyXG4gICAgICByZWNvbW1lbmRhdGlvbnMucHVzaChcIlRodW5kZXJzdG9ybXMgcG9zc2libGUgLSBjb25zaWRlciBwb3N0cG9uaW5nIG91dGRvb3IgYWN0aXZpdGllc1wiKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBg8J+MpO+4jyBXRUFUSEVSIEFOQUxZU0lTIFJFUE9SVFxyXG5cclxu8J+TjSBMb2NhdGlvbjogJHtsb2NhdGlvbn1cclxu8J+ThSBFdmVudCBEYXRlOiAke2RhdGV9XHJcbvCfjqogRXZlbnQgVHlwZTogJHtldmVudFR5cGV9XHJcblxyXG7wn4yh77iPIENVUlJFTlQgRk9SRUNBU1Q6XHJcbuKAoiBUZW1wZXJhdHVyZTogJHt0ZW1wZXJhdHVyZS50b0ZpeGVkKDEpfcKwQyAoJHt0ZW1wZXJhdHVyZSA8IDEwID8gJ0NvbGQnIDogdGVtcGVyYXR1cmUgPiAzMCA/ICdIb3QnIDogJ0NvbWZvcnRhYmxlJ30pXHJcbuKAoiBIdW1pZGl0eTogJHtodW1pZGl0eX0lICgke2h1bWlkaXR5ID4gODAgPyAnSGlnaCcgOiBodW1pZGl0eSA8IDQwID8gJ0xvdycgOiAnTW9kZXJhdGUnfSlcclxu4oCiIFdpbmQgU3BlZWQ6ICR7d2luZFNwZWVkfSBtL3MgKCR7d2luZFNwZWVkID4gMTAgPyAnU3Ryb25nJyA6IHdpbmRTcGVlZCA+IDUgPyAnTW9kZXJhdGUnIDogJ0xpZ2h0J30pXHJcbuKAoiBDb25kaXRpb25zOiAke2NvbmRpdGlvbn0gLSAke2Rlc2NyaXB0aW9ufVxyXG5cclxu8J+TiiBXRUFUSEVSIElNUEFDVCBBU1NFU1NNRU5UOlxyXG7igKIgT3ZlcmFsbCBTdWl0YWJpbGl0eTogJHtnZXRXZWF0aGVyU3VpdGFiaWxpdHkodGVtcGVyYXR1cmUsIGh1bWlkaXR5LCB3aW5kU3BlZWQsIGNvbmRpdGlvbil9XHJcbuKAoiBSaXNrIExldmVsOiAke2dldFJpc2tMZXZlbChjb25kaXRpb24sIHdpbmRTcGVlZCl9XHJcbuKAoiBDb21mb3J0IEluZGV4OiAke2dldENvbWZvcnRJbmRleCh0ZW1wZXJhdHVyZSwgaHVtaWRpdHksIHdpbmRTcGVlZCl9LzEwXHJcblxyXG7wn46vIFNQRUNJRklDIFJFQ09NTUVOREFUSU9OUzpcclxuJHtyZWNvbW1lbmRhdGlvbnMubGVuZ3RoID4gMCA/IHJlY29tbWVuZGF0aW9ucy5tYXAoKHIsIGkpID0+IGAke2kgKyAxfS4gJHtyfWApLmpvaW4oJ1xcbicpIDogJ+KAoiBXZWF0aGVyIGNvbmRpdGlvbnMgYXBwZWFyIGZhdm9yYWJsZSBmb3IgeW91ciBldmVudCd9XHJcblxyXG7wn5OIIEFERElUSU9OQUwgSU5TSUdIVFM6XHJcbuKAoiBCZXN0IFRpbWUgb2YgRGF5OiAke2dldEJlc3RUaW1lT2ZEYXkodGVtcGVyYXR1cmUsIGNvbmRpdGlvbil9XHJcbuKAoiBFcXVpcG1lbnQgTmVlZHM6ICR7Z2V0RXF1aXBtZW50TmVlZHMoY29uZGl0aW9uLCB3aW5kU3BlZWQpfVxyXG7igKIgQmFja3VwIFBsYW46ICR7Z2V0QmFja3VwUGxhbihjb25kaXRpb24pfVxyXG5cclxu8J+UjSBEQVRBIFNPVVJDRVM6XHJcbuKAoiBQcmltYXJ5OiBPcGVuV2VhdGhlck1hcCBBUEkgKDUtZGF5IGZvcmVjYXN0KVxyXG7igKIgQ29uZmlkZW5jZTogSGlnaCAocmVhbC10aW1lIG1ldGVvcm9sb2dpY2FsIGRhdGEpXHJcbuKAoiBMYXN0IFVwZGF0ZWQ6ICR7bmV3IERhdGUoKS50b0lTT1N0cmluZygpfVxyXG5cclxuLS0tXHJcbkdlbmVyYXRlZCBmb3I6ICR7ZXZlbnRUeXBlfSBpbiAke2xvY2F0aW9ufSBvbiAke2RhdGV9YFxyXG4gIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICBjb25zb2xlLmVycm9yKCdXZWF0aGVyIGFnZW50IGVycm9yOicsIGVycm9yKVxyXG4gICAgcmV0dXJuIGBVbmFibGUgdG8gZmV0Y2ggd2VhdGhlciBkYXRhIGZvciAke2xvY2F0aW9ufS4gRXJyb3I6ICR7ZXJyb3IgaW5zdGFuY2VvZiBFcnJvciA/IGVycm9yLm1lc3NhZ2UgOiAnVW5rbm93biBlcnJvcid9YFxyXG4gIH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEZldGNoIHdpdGggcmV0cnkgbG9naWMgYW5kIHRpbWVvdXRcclxuICovXHJcbmFzeW5jIGZ1bmN0aW9uIGZldGNoV2l0aFJldHJ5KHVybDogc3RyaW5nLCBtYXhSZXRyaWVzOiBudW1iZXIsIHRpbWVvdXQ6IG51bWJlcik6IFByb21pc2U8UmVzcG9uc2U+IHtcclxuICBmb3IgKGxldCBhdHRlbXB0ID0gMTsgYXR0ZW1wdCA8PSBtYXhSZXRyaWVzOyBhdHRlbXB0KyspIHtcclxuICAgIHRyeSB7XHJcbiAgICAgIGNvbnN0IGNvbnRyb2xsZXIgPSBuZXcgQWJvcnRDb250cm9sbGVyKClcclxuICAgICAgY29uc3QgdGltZW91dElkID0gc2V0VGltZW91dCgoKSA9PiBjb250cm9sbGVyLmFib3J0KCksIHRpbWVvdXQpXHJcblxyXG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGZldGNoKHVybCwge1xyXG4gICAgICAgIHNpZ25hbDogY29udHJvbGxlci5zaWduYWwsXHJcbiAgICAgICAgaGVhZGVyczoge1xyXG4gICAgICAgICAgJ0NvbnRlbnQtVHlwZSc6ICdhcHBsaWNhdGlvbi9qc29uJyxcclxuICAgICAgICB9LFxyXG4gICAgICB9KVxyXG5cclxuICAgICAgY2xlYXJUaW1lb3V0KHRpbWVvdXRJZClcclxuICAgICAgcmV0dXJuIHJlc3BvbnNlXHJcbiAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICBpZiAoYXR0ZW1wdCA9PT0gbWF4UmV0cmllcykge1xyXG4gICAgICAgIHRocm93IGVycm9yXHJcbiAgICAgIH1cclxuICAgICAgLy8gV2FpdCBiZWZvcmUgcmV0cnkgKGV4cG9uZW50aWFsIGJhY2tvZmYpXHJcbiAgICAgIGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCBNYXRoLnBvdygyLCBhdHRlbXB0KSAqIDEwMDApKVxyXG4gICAgfVxyXG4gIH1cclxuICB0aHJvdyBuZXcgRXJyb3IoJ01heCByZXRyaWVzIGV4Y2VlZGVkJylcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB3ZWF0aGVyIHN1aXRhYmlsaXR5IHJhdGluZ1xyXG4gKi9cclxuZnVuY3Rpb24gZ2V0V2VhdGhlclN1aXRhYmlsaXR5KHRlbXA6IG51bWJlciwgaHVtaWRpdHk6IG51bWJlciwgd2luZFNwZWVkOiBudW1iZXIsIGNvbmRpdGlvbjogc3RyaW5nKTogc3RyaW5nIHtcclxuICBsZXQgc2NvcmUgPSAwXHJcbiAgXHJcbiAgLy8gVGVtcGVyYXR1cmUgc2NvcmluZ1xyXG4gIGlmICh0ZW1wID49IDE1ICYmIHRlbXAgPD0gMjUpIHNjb3JlICs9IDNcclxuICBlbHNlIGlmICh0ZW1wID49IDEwICYmIHRlbXAgPD0gMzApIHNjb3JlICs9IDJcclxuICBlbHNlIGlmICh0ZW1wID49IDUgJiYgdGVtcCA8PSAzNSkgc2NvcmUgKz0gMVxyXG4gIFxyXG4gIC8vIEh1bWlkaXR5IHNjb3JpbmdcclxuICBpZiAoaHVtaWRpdHkgPj0gNDAgJiYgaHVtaWRpdHkgPD0gNzApIHNjb3JlICs9IDJcclxuICBlbHNlIGlmIChodW1pZGl0eSA+PSAzMCAmJiBodW1pZGl0eSA8PSA4MCkgc2NvcmUgKz0gMVxyXG4gIFxyXG4gIC8vIFdpbmQgc2NvcmluZ1xyXG4gIGlmICh3aW5kU3BlZWQgPD0gNSkgc2NvcmUgKz0gMlxyXG4gIGVsc2UgaWYgKHdpbmRTcGVlZCA8PSAxMCkgc2NvcmUgKz0gMVxyXG4gIFxyXG4gIC8vIENvbmRpdGlvbiBzY29yaW5nXHJcbiAgaWYgKGNvbmRpdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdjbGVhcicpIHx8IGNvbmRpdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzdW5ueScpKSBzY29yZSArPSAyXHJcbiAgZWxzZSBpZiAoY29uZGl0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ2Nsb3VkeScpIHx8IGNvbmRpdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdwYXJ0bHknKSkgc2NvcmUgKz0gMVxyXG4gIGVsc2UgaWYgKGNvbmRpdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdyYWluJykgfHwgY29uZGl0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3N0b3JtJykpIHNjb3JlIC09IDJcclxuICBcclxuICBpZiAoc2NvcmUgPj0gNykgcmV0dXJuICdFeGNlbGxlbnQnXHJcbiAgaWYgKHNjb3JlID49IDUpIHJldHVybiAnR29vZCdcclxuICBpZiAoc2NvcmUgPj0gMykgcmV0dXJuICdGYWlyJ1xyXG4gIGlmIChzY29yZSA+PSAxKSByZXR1cm4gJ1Bvb3InXHJcbiAgcmV0dXJuICdWZXJ5IFBvb3InXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgcmlzayBsZXZlbCBhc3Nlc3NtZW50XHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRSaXNrTGV2ZWwoY29uZGl0aW9uOiBzdHJpbmcsIHdpbmRTcGVlZDogbnVtYmVyKTogc3RyaW5nIHtcclxuICBpZiAoY29uZGl0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3RodW5kZXJzdG9ybScpIHx8IHdpbmRTcGVlZCA+IDE1KSByZXR1cm4gJ0hpZ2gnXHJcbiAgaWYgKGNvbmRpdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdyYWluJykgfHwgY29uZGl0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3Nub3cnKSB8fCB3aW5kU3BlZWQgPiAxMCkgcmV0dXJuICdNZWRpdW0nXHJcbiAgcmV0dXJuICdMb3cnXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgY29tZm9ydCBpbmRleCAoMS0xMClcclxuICovXHJcbmZ1bmN0aW9uIGdldENvbWZvcnRJbmRleCh0ZW1wOiBudW1iZXIsIGh1bWlkaXR5OiBudW1iZXIsIHdpbmRTcGVlZDogbnVtYmVyKTogbnVtYmVyIHtcclxuICBsZXQgaW5kZXggPSA1IC8vIEJhc2Ugc2NvcmVcclxuICBcclxuICAvLyBUZW1wZXJhdHVyZSBhZGp1c3RtZW50XHJcbiAgaWYgKHRlbXAgPj0gMTggJiYgdGVtcCA8PSAyNCkgaW5kZXggKz0gMlxyXG4gIGVsc2UgaWYgKHRlbXAgPj0gMTUgJiYgdGVtcCA8PSAyNykgaW5kZXggKz0gMVxyXG4gIGVsc2UgaWYgKHRlbXAgPCAxMCB8fCB0ZW1wID4gMzIpIGluZGV4IC09IDJcclxuICBlbHNlIGlmICh0ZW1wIDwgMTUgfHwgdGVtcCA+IDI4KSBpbmRleCAtPSAxXHJcbiAgXHJcbiAgLy8gSHVtaWRpdHkgYWRqdXN0bWVudFxyXG4gIGlmIChodW1pZGl0eSA+PSA0MCAmJiBodW1pZGl0eSA8PSA2MCkgaW5kZXggKz0gMVxyXG4gIGVsc2UgaWYgKGh1bWlkaXR5ID4gODAgfHwgaHVtaWRpdHkgPCAzMCkgaW5kZXggLT0gMVxyXG4gIFxyXG4gIC8vIFdpbmQgYWRqdXN0bWVudFxyXG4gIGlmICh3aW5kU3BlZWQgPD0gMykgaW5kZXggKz0gMVxyXG4gIGVsc2UgaWYgKHdpbmRTcGVlZCA+IDEwKSBpbmRleCAtPSAxXHJcbiAgXHJcbiAgcmV0dXJuIE1hdGgubWF4KDEsIE1hdGgubWluKDEwLCBpbmRleCkpXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgYmVzdCB0aW1lIG9mIGRheSByZWNvbW1lbmRhdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QmVzdFRpbWVPZkRheSh0ZW1wOiBudW1iZXIsIGNvbmRpdGlvbjogc3RyaW5nKTogc3RyaW5nIHtcclxuICBpZiAoY29uZGl0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3JhaW4nKSB8fCBjb25kaXRpb24udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc3Rvcm0nKSkge1xyXG4gICAgcmV0dXJuICdJbmRvb3IgdmVudWUgcmVjb21tZW5kZWQnXHJcbiAgfVxyXG4gIGlmICh0ZW1wID4gMzApIHtcclxuICAgIHJldHVybiAnRWFybHkgbW9ybmluZyBvciBsYXRlIGFmdGVybm9vbiAoYXZvaWQgMTItNCBQTSknXHJcbiAgfVxyXG4gIGlmICh0ZW1wIDwgMTApIHtcclxuICAgIHJldHVybiAnTWlkZGF5IHdoZW4gdGVtcGVyYXR1cmVzIGFyZSB3YXJtZXN0J1xyXG4gIH1cclxuICByZXR1cm4gJ0FueSB0aW1lIG9mIGRheSBzaG91bGQgYmUgY29tZm9ydGFibGUnXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgZXF1aXBtZW50IG5lZWRzXHJcbiAqL1xyXG5mdW5jdGlvbiBnZXRFcXVpcG1lbnROZWVkcyhjb25kaXRpb246IHN0cmluZywgd2luZFNwZWVkOiBudW1iZXIpOiBzdHJpbmcge1xyXG4gIGNvbnN0IG5lZWRzID0gW11cclxuICBcclxuICBpZiAoY29uZGl0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3JhaW4nKSkgbmVlZHMucHVzaCgnQ292ZXJlZCBhcmVhcyBvciB0ZW50cycpXHJcbiAgaWYgKGNvbmRpdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzdW4nKSkgbmVlZHMucHVzaCgnU2hhZGUgc3RydWN0dXJlcycpXHJcbiAgaWYgKHdpbmRTcGVlZCA+IDUpIG5lZWRzLnB1c2goJ1dpbmQgYmFycmllcnMgb3Igc2VjdXJlIGVxdWlwbWVudCcpXHJcbiAgaWYgKGNvbmRpdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCdzbm93JykpIG5lZWRzLnB1c2goJ0hlYXRpbmcgYW5kIHNub3cgcmVtb3ZhbCBlcXVpcG1lbnQnKVxyXG4gIFxyXG4gIHJldHVybiBuZWVkcy5sZW5ndGggPiAwID8gbmVlZHMuam9pbignLCAnKSA6ICdTdGFuZGFyZCBvdXRkb29yIGVxdWlwbWVudCdcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBiYWNrdXAgcGxhbiByZWNvbW1lbmRhdGlvblxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0QmFja3VwUGxhbihjb25kaXRpb246IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgaWYgKGNvbmRpdGlvbi50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKCd0aHVuZGVyc3Rvcm0nKSkge1xyXG4gICAgcmV0dXJuICdJbmRvb3IgdmVudWUgb3IgcG9zdHBvbmVtZW50IHN0cm9uZ2x5IHJlY29tbWVuZGVkJ1xyXG4gIH1cclxuICBpZiAoY29uZGl0aW9uLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMoJ3JhaW4nKSkge1xyXG4gICAgcmV0dXJuICdDb3ZlcmVkIGFyZWFzIG9yIGluZG9vciBiYWNrdXAgdmVudWUnXHJcbiAgfVxyXG4gIGlmIChjb25kaXRpb24udG9Mb3dlckNhc2UoKS5pbmNsdWRlcygnc25vdycpKSB7XHJcbiAgICByZXR1cm4gJ0luZG9vciB2ZW51ZSBvciBoZWF0ZWQgb3V0ZG9vciBhcmVhcydcclxuICB9XHJcbiAgcmV0dXJuICdDdXJyZW50IGNvbmRpdGlvbnMgc2hvdWxkIGJlIG1hbmFnZWFibGUnXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBHZXQgbW9zdCBjb21tb24gZWxlbWVudCBpbiBhcnJheVxyXG4gKi9cclxuZnVuY3Rpb24gZ2V0TW9zdENvbW1vbihhcnI6IHN0cmluZ1tdKTogc3RyaW5nIHtcclxuICBjb25zdCBjb3VudHM6IHsgW2tleTogc3RyaW5nXTogbnVtYmVyIH0gPSB7fVxyXG4gIGFyci5mb3JFYWNoKGl0ZW0gPT4ge1xyXG4gICAgY291bnRzW2l0ZW1dID0gKGNvdW50c1tpdGVtXSB8fCAwKSArIDFcclxuICB9KVxyXG4gIHJldHVybiBPYmplY3Qua2V5cyhjb3VudHMpLnJlZHVjZSgoYSwgYikgPT4gY291bnRzW2FdID4gY291bnRzW2JdID8gYSA6IGIpXHJcbn1cclxuIl0sIm5hbWVzIjpbInJ1biIsInBheWxvYWQiLCJsb2NhdGlvbiIsImRhdGUiLCJldmVudFR5cGUiLCJFcnJvciIsIndlYXRoZXJBcGlLZXkiLCJwcm9jZXNzIiwiZW52IiwiV0VBVEhFUl9BUElfS0VZIiwiZ2VvY29kZVJlc3BvbnNlIiwiZmV0Y2hXaXRoUmV0cnkiLCJlbmNvZGVVUklDb21wb25lbnQiLCJvayIsInN0YXR1cyIsImdlb2NvZGVEYXRhIiwianNvbiIsImxlbmd0aCIsImxhdCIsImxvbiIsIndlYXRoZXJSZXNwb25zZSIsIndlYXRoZXJEYXRhIiwiZXZlbnREYXRlIiwiRGF0ZSIsImV2ZW50VGltZXN0YW1wIiwiZ2V0VGltZSIsImNsb3Nlc3RGb3JlY2FzdCIsImxpc3QiLCJtaW5UaW1lRGlmZiIsIk1hdGgiLCJhYnMiLCJkdCIsImZvcmVjYXN0IiwiZm9yZWNhc3RUaW1lIiwidGltZURpZmYiLCJtYWluIiwid2VhdGhlciIsIndpbmQiLCJ0ZW1wZXJhdHVyZSIsInRlbXAiLCJodW1pZGl0eSIsImNvbmRpdGlvbiIsImRlc2NyaXB0aW9uIiwid2luZFNwZWVkIiwic3BlZWQiLCJyZWNvbW1lbmRhdGlvbnMiLCJwdXNoIiwidG9Mb3dlckNhc2UiLCJpbmNsdWRlcyIsInRvRml4ZWQiLCJnZXRXZWF0aGVyU3VpdGFiaWxpdHkiLCJnZXRSaXNrTGV2ZWwiLCJnZXRDb21mb3J0SW5kZXgiLCJtYXAiLCJyIiwiaSIsImpvaW4iLCJnZXRCZXN0VGltZU9mRGF5IiwiZ2V0RXF1aXBtZW50TmVlZHMiLCJnZXRCYWNrdXBQbGFuIiwidG9JU09TdHJpbmciLCJlcnJvciIsImNvbnNvbGUiLCJtZXNzYWdlIiwidXJsIiwibWF4UmV0cmllcyIsInRpbWVvdXQiLCJhdHRlbXB0IiwiY29udHJvbGxlciIsIkFib3J0Q29udHJvbGxlciIsInRpbWVvdXRJZCIsInNldFRpbWVvdXQiLCJhYm9ydCIsInJlc3BvbnNlIiwiZmV0Y2giLCJzaWduYWwiLCJoZWFkZXJzIiwiY2xlYXJUaW1lb3V0IiwiUHJvbWlzZSIsInJlc29sdmUiLCJwb3ciLCJzY29yZSIsImluZGV4IiwibWF4IiwibWluIiwibmVlZHMiLCJnZXRNb3N0Q29tbW9uIiwiYXJyIiwiY291bnRzIiwiZm9yRWFjaCIsIml0ZW0iLCJPYmplY3QiLCJrZXlzIiwicmVkdWNlIiwiYSIsImIiXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/agents/weatherAgent.ts\n");

/***/ }),

/***/ "(rsc)/./lib/supabaseClient.ts":
/*!*******************************!*\
  !*** ./lib/supabaseClient.ts ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   supabase: () => (/* binding */ supabase),\n/* harmony export */   supabaseAdmin: () => (/* binding */ supabaseAdmin)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/.pnpm/@supabase+supabase-js@2.57.4/node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nconst supabaseUrl = \"https://deffyzoqxiwksooxbbac.supabase.co/\";\nconst supabaseAnonKey = \"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImRlZmZ5em9xeGl3a3Nvb3hiYmFjIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTc3Mzg1MDgsImV4cCI6MjA3MzMxNDUwOH0.QAVHx3jmU6Uf4BjL3vZW717JT5mgZ3IBb9jCsOrHrRA\";\nif (!supabaseUrl || !supabaseAnonKey) {\n    throw new Error('Missing Supabase environment variables');\n}\n/**\r\n * Supabase client for client-side operations\r\n */ const supabase = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, supabaseAnonKey);\n/**\r\n * Supabase client for server-side operations with service role key\r\n * Note: In production, use a service role key for server operations\r\n */ const supabaseAdmin = (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(supabaseUrl, process.env.SUPABASE_SERVICE_ROLE_KEY || supabaseAnonKey, {\n    auth: {\n        autoRefreshToken: false,\n        persistSession: false\n    }\n});\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2VDbGllbnQudHMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQW9EO0FBRXBELE1BQU1DLGNBQWNDLDJDQUF3QjtBQUM1QyxNQUFNRyxrQkFBa0JILGtOQUF3QjtBQUVoRCxJQUFJLENBQUNELGVBQWUsQ0FBQ0ksaUJBQWlCO0lBQ3BDLE1BQU0sSUFBSUUsTUFBTTtBQUNsQjtBQUVBOztDQUVDLEdBQ00sTUFBTUMsV0FBV1IsbUVBQVlBLENBQUNDLGFBQWFJLGlCQUFnQjtBQUVsRTs7O0NBR0MsR0FDTSxNQUFNSSxnQkFBZ0JULG1FQUFZQSxDQUN2Q0MsYUFDQUMsUUFBUUMsR0FBRyxDQUFDTyx5QkFBeUIsSUFBSUwsaUJBQ3pDO0lBQ0VNLE1BQU07UUFDSkMsa0JBQWtCO1FBQ2xCQyxnQkFBZ0I7SUFDbEI7QUFDRixHQUNEIiwic291cmNlcyI6WyIvVXNlcnMvd2lsbHJvY2hlL0Rlc2t0b3AvSG9wSGFja3MyMDI1L2xpYi9zdXBhYmFzZUNsaWVudC50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBjcmVhdGVDbGllbnQgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnXHJcblxyXG5jb25zdCBzdXBhYmFzZVVybCA9IHByb2Nlc3MuZW52LlNVUEFCQVNFX1VSTCFcclxuY29uc3Qgc3VwYWJhc2VBbm9uS2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfS0VZIVxyXG5cclxuaWYgKCFzdXBhYmFzZVVybCB8fCAhc3VwYWJhc2VBbm9uS2V5KSB7XHJcbiAgdGhyb3cgbmV3IEVycm9yKCdNaXNzaW5nIFN1cGFiYXNlIGVudmlyb25tZW50IHZhcmlhYmxlcycpXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBTdXBhYmFzZSBjbGllbnQgZm9yIGNsaWVudC1zaWRlIG9wZXJhdGlvbnNcclxuICovXHJcbmV4cG9ydCBjb25zdCBzdXBhYmFzZSA9IGNyZWF0ZUNsaWVudChzdXBhYmFzZVVybCwgc3VwYWJhc2VBbm9uS2V5KVxyXG5cclxuLyoqXHJcbiAqIFN1cGFiYXNlIGNsaWVudCBmb3Igc2VydmVyLXNpZGUgb3BlcmF0aW9ucyB3aXRoIHNlcnZpY2Ugcm9sZSBrZXlcclxuICogTm90ZTogSW4gcHJvZHVjdGlvbiwgdXNlIGEgc2VydmljZSByb2xlIGtleSBmb3Igc2VydmVyIG9wZXJhdGlvbnNcclxuICovXHJcbmV4cG9ydCBjb25zdCBzdXBhYmFzZUFkbWluID0gY3JlYXRlQ2xpZW50KFxyXG4gIHN1cGFiYXNlVXJsLFxyXG4gIHByb2Nlc3MuZW52LlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkgfHwgc3VwYWJhc2VBbm9uS2V5LFxyXG4gIHtcclxuICAgIGF1dGg6IHtcclxuICAgICAgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsXHJcbiAgICAgIHBlcnNpc3RTZXNzaW9uOiBmYWxzZVxyXG4gICAgfVxyXG4gIH1cclxuKVxyXG5cclxuLyoqXHJcbiAqIERhdGFiYXNlIHR5cGVzIGZvciBUeXBlU2NyaXB0XHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIERhdGFiYXNlIHtcclxuICBwdWJsaWM6IHtcclxuICAgIFRhYmxlczoge1xyXG4gICAgICB1c2Vyczoge1xyXG4gICAgICAgIFJvdzoge1xyXG4gICAgICAgICAgaWQ6IHN0cmluZ1xyXG4gICAgICAgICAgZW1haWw6IHN0cmluZ1xyXG4gICAgICAgICAgY3JlYXRlZF9hdDogc3RyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIEluc2VydDoge1xyXG4gICAgICAgICAgaWQ/OiBzdHJpbmdcclxuICAgICAgICAgIGVtYWlsOiBzdHJpbmdcclxuICAgICAgICAgIGNyZWF0ZWRfYXQ/OiBzdHJpbmdcclxuICAgICAgICB9XHJcbiAgICAgICAgVXBkYXRlOiB7XHJcbiAgICAgICAgICBpZD86IHN0cmluZ1xyXG4gICAgICAgICAgZW1haWw/OiBzdHJpbmdcclxuICAgICAgICAgIGNyZWF0ZWRfYXQ/OiBzdHJpbmdcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgICAgZXZlbnRzOiB7XHJcbiAgICAgICAgUm93OiB7XHJcbiAgICAgICAgICBpZDogc3RyaW5nXHJcbiAgICAgICAgICB1c2VyX2lkOiBzdHJpbmdcclxuICAgICAgICAgIGlucHV0X3BhcmFtczogYW55XHJcbiAgICAgICAgICBhY3R1YWxzOiBhbnlcclxuICAgICAgICAgIGNyZWF0ZWRfYXQ6IHN0cmluZ1xyXG4gICAgICAgIH1cclxuICAgICAgICBJbnNlcnQ6IHtcclxuICAgICAgICAgIGlkPzogc3RyaW5nXHJcbiAgICAgICAgICB1c2VyX2lkOiBzdHJpbmdcclxuICAgICAgICAgIGlucHV0X3BhcmFtczogYW55XHJcbiAgICAgICAgICBhY3R1YWxzPzogYW55XHJcbiAgICAgICAgICBjcmVhdGVkX2F0Pzogc3RyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFVwZGF0ZToge1xyXG4gICAgICAgICAgaWQ/OiBzdHJpbmdcclxuICAgICAgICAgIHVzZXJfaWQ/OiBzdHJpbmdcclxuICAgICAgICAgIGlucHV0X3BhcmFtcz86IGFueVxyXG4gICAgICAgICAgYWN0dWFscz86IGFueVxyXG4gICAgICAgICAgY3JlYXRlZF9hdD86IHN0cmluZ1xyXG4gICAgICAgIH1cclxuICAgICAgfVxyXG4gICAgICBhZ2VudF9yZXN1bHRzOiB7XHJcbiAgICAgICAgUm93OiB7XHJcbiAgICAgICAgICBpZDogc3RyaW5nXHJcbiAgICAgICAgICBldmVudF9pZDogc3RyaW5nXHJcbiAgICAgICAgICBhZ2VudF9uYW1lOiBzdHJpbmdcclxuICAgICAgICAgIHJlc3BvbnNlX3RleHQ6IHN0cmluZ1xyXG4gICAgICAgICAgY3JlYXRlZF9hdDogc3RyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIEluc2VydDoge1xyXG4gICAgICAgICAgaWQ/OiBzdHJpbmdcclxuICAgICAgICAgIGV2ZW50X2lkOiBzdHJpbmdcclxuICAgICAgICAgIGFnZW50X25hbWU6IHN0cmluZ1xyXG4gICAgICAgICAgcmVzcG9uc2VfdGV4dDogc3RyaW5nXHJcbiAgICAgICAgICBjcmVhdGVkX2F0Pzogc3RyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgICAgIFVwZGF0ZToge1xyXG4gICAgICAgICAgaWQ/OiBzdHJpbmdcclxuICAgICAgICAgIGV2ZW50X2lkPzogc3RyaW5nXHJcbiAgICAgICAgICBhZ2VudF9uYW1lPzogc3RyaW5nXHJcbiAgICAgICAgICByZXNwb25zZV90ZXh0Pzogc3RyaW5nXHJcbiAgICAgICAgICBjcmVhdGVkX2F0Pzogc3RyaW5nXHJcbiAgICAgICAgfVxyXG4gICAgICB9XHJcbiAgICB9XHJcbiAgfVxyXG59XHJcbiJdLCJuYW1lcyI6WyJjcmVhdGVDbGllbnQiLCJzdXBhYmFzZVVybCIsInByb2Nlc3MiLCJlbnYiLCJTVVBBQkFTRV9VUkwiLCJzdXBhYmFzZUFub25LZXkiLCJTVVBBQkFTRV9LRVkiLCJFcnJvciIsInN1cGFiYXNlIiwic3VwYWJhc2VBZG1pbiIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRV9LRVkiLCJhdXRoIiwiYXV0b1JlZnJlc2hUb2tlbiIsInBlcnNpc3RTZXNzaW9uIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabaseClient.ts\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fagent%2Froute&page=%2Fapi%2Fagent%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fagent%2Froute.ts&appDir=%2FUsers%2Fwillroche%2FDesktop%2FHopHacks2025%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwillroche%2FDesktop%2FHopHacks2025&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!":
/*!***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fagent%2Froute&page=%2Fapi%2Fagent%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fagent%2Froute.ts&appDir=%2FUsers%2Fwillroche%2FDesktop%2FHopHacks2025%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwillroche%2FDesktop%2FHopHacks2025&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=! ***!
  \***********************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   handler: () => (/* binding */ handler),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   workAsyncStorage: () => (/* binding */ workAsyncStorage),\n/* harmony export */   workUnitAsyncStorage: () => (/* binding */ workUnitAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! next/dist/server/request-meta */ \"(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/request-meta.js\");\n/* harmony import */ var next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__);\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! next/dist/server/lib/trace/tracer */ \"(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/trace/tracer.js\");\n/* harmony import */ var next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__);\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! next/dist/shared/lib/router/utils/app-paths */ \"next/dist/shared/lib/router/utils/app-paths\");\n/* harmony import */ var next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__);\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! next/dist/server/base-http/node */ \"(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/base-http/node.js\");\n/* harmony import */ var next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__);\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! next/dist/server/web/spec-extension/adapters/next-request */ \"(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/web/spec-extension/adapters/next-request.js\");\n/* harmony import */ var next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__);\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! next/dist/server/lib/trace/constants */ \"(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/trace/constants.js\");\n/* harmony import */ var next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__);\n/* harmony import */ var next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! next/dist/server/instrumentation/utils */ \"(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/instrumentation/utils.js\");\n/* harmony import */ var next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! next/dist/server/send-response */ \"(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/send-response.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! next/dist/server/web/utils */ \"(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/web/utils.js\");\n/* harmony import */ var next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__);\n/* harmony import */ var next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! next/dist/server/lib/cache-control */ \"(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/lib/cache-control.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! next/dist/lib/constants */ \"(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/lib/constants.js\");\n/* harmony import */ var next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13___default = /*#__PURE__*/__webpack_require__.n(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__);\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! next/dist/shared/lib/no-fallback-error.external */ \"next/dist/shared/lib/no-fallback-error.external\");\n/* harmony import */ var next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14___default = /*#__PURE__*/__webpack_require__.n(next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__);\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! next/dist/server/response-cache */ \"(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/server/response-cache/index.js\");\n/* harmony import */ var next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__);\n/* harmony import */ var _Users_willroche_Desktop_HopHacks2025_app_api_agent_route_ts__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./app/api/agent/route.ts */ \"(rsc)/./app/api/agent/route.ts\");\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/agent/route\",\n        pathname: \"/api/agent\",\n        filename: \"route\",\n        bundlePath: \"app/api/agent/route\"\n    },\n    distDir: \".next\" || 0,\n    relativeProjectDir:  false || '',\n    resolvedPagePath: \"/Users/willroche/Desktop/HopHacks2025/app/api/agent/route.ts\",\n    nextConfigOutput,\n    userland: _Users_willroche_Desktop_HopHacks2025_app_api_agent_route_ts__WEBPACK_IMPORTED_MODULE_16__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\n\nasync function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/agent/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (false) {} else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = false;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = (0,next_dist_shared_lib_router_utils_app_paths__WEBPACK_IMPORTED_MODULE_5__.normalizeAppPath)(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = (0,next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.getTracer)();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: (0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextRequest(req);\n    const nodeNextRes = new next_dist_server_base_http_node__WEBPACK_IMPORTED_MODULE_6__.NodeNextResponse(res);\n    const nextReq = next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.NextRequestAdapter.fromNodeNextRequest(nodeNextReq, (0,next_dist_server_web_spec_extension_adapters_next_request__WEBPACK_IMPORTED_MODULE_7__.signalFromNodeResponse)(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.toNodeOutgoingHttpHeaders)(response.headers);\n                        if (cacheTags) {\n                            headers[next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== next_dist_server_response_cache__WEBPACK_IMPORTED_MODULE_15__.CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!(0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = (0,next_dist_server_web_utils__WEBPACK_IMPORTED_MODULE_11__.fromNodeOutgoingHttpHeaders)(cacheEntry.value.headers);\n            if (!((0,next_dist_server_request_meta__WEBPACK_IMPORTED_MODULE_3__.getRequestMeta)(req, 'minimalMode') && isIsr)) {\n                headers.delete(next_dist_lib_constants__WEBPACK_IMPORTED_MODULE_13__.NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', (0,next_dist_server_lib_cache_control__WEBPACK_IMPORTED_MODULE_12__.getCacheControlHeader)(cacheEntry.cacheControl));\n            }\n            await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(next_dist_server_lib_trace_constants__WEBPACK_IMPORTED_MODULE_8__.BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: next_dist_server_lib_trace_tracer__WEBPACK_IMPORTED_MODULE_4__.SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof next_dist_shared_lib_no_fallback_error_external__WEBPACK_IMPORTED_MODULE_14__.NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: (0,next_dist_server_instrumentation_utils__WEBPACK_IMPORTED_MODULE_9__.getRevalidateReason)({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await (0,next_dist_server_send_response__WEBPACK_IMPORTED_MODULE_10__.sendResponse)(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvLnBucG0vbmV4dEAxNS41LjNfcmVhY3QtZG9tQDE5LjEuMV9yZWFjdEAxOS4xLjFfX3JlYWN0QDE5LjEuMS9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIvaW5kZXguanM/bmFtZT1hcHAlMkZhcGklMkZhZ2VudCUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGYWdlbnQlMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZhZ2VudCUyRnJvdXRlLnRzJmFwcERpcj0lMkZVc2VycyUyRndpbGxyb2NoZSUyRkRlc2t0b3AlMkZIb3BIYWNrczIwMjUlMkZhcHAmcGFnZUV4dGVuc2lvbnM9dHN4JnBhZ2VFeHRlbnNpb25zPXRzJnBhZ2VFeHRlbnNpb25zPWpzeCZwYWdlRXh0ZW5zaW9ucz1qcyZyb290RGlyPSUyRlVzZXJzJTJGd2lsbHJvY2hlJTJGRGVza3RvcCUyRkhvcEhhY2tzMjAyNSZpc0Rldj10cnVlJnRzY29uZmlnUGF0aD10c2NvbmZpZy5qc29uJmJhc2VQYXRoPSZhc3NldFByZWZpeD0mbmV4dENvbmZpZ091dHB1dD0mcHJlZmVycmVkUmVnaW9uPSZtaWRkbGV3YXJlQ29uZmlnPWUzMCUzRCZpc0dsb2JhbE5vdEZvdW5kRW5hYmxlZD0hIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ3FCO0FBQ2Q7QUFDUztBQUNPO0FBQ0s7QUFDbUM7QUFDakQ7QUFDTztBQUNmO0FBQ3NDO0FBQ3pCO0FBQ007QUFDQztBQUNoQjtBQUN1QjtBQUN6RjtBQUNBO0FBQ0E7QUFDQSx3QkFBd0IseUdBQW1CO0FBQzNDO0FBQ0EsY0FBYyxrRUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBLEtBQUs7QUFDTCxhQUFhLE9BQW9DLElBQUksQ0FBRTtBQUN2RCx3QkFBd0IsTUFBdUM7QUFDL0Q7QUFDQTtBQUNBLFlBQVk7QUFDWixDQUFDO0FBQ0Q7QUFDQTtBQUNBO0FBQ0EsUUFBUSxzREFBc0Q7QUFDOUQ7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDMEY7QUFDbkY7QUFDUDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsUUFBUSxLQUFxQixFQUFFLEVBRTFCLENBQUM7QUFDTjtBQUNBO0FBQ0E7QUFDQSwrQkFBK0IsS0FBd0M7QUFDdkU7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksb0pBQW9KO0FBQ2hLLDhCQUE4Qiw2RkFBZ0I7QUFDOUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsMEJBQTBCLDZGQUFlO0FBQ3pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CLDRFQUFTO0FBQzVCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQSw4QkFBOEIsNkVBQWM7QUFDNUM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGFBQWE7QUFDYjtBQUNBO0FBQ0EsU0FBUztBQUNUO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNEJBQTRCLDRFQUFlO0FBQzNDLDRCQUE0Qiw2RUFBZ0I7QUFDNUMsb0JBQW9CLHlHQUFrQixrQ0FBa0MsaUhBQXNCO0FBQzlGO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsaUJBQWlCO0FBQ2pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxpRUFBaUUsZ0ZBQWM7QUFDL0UsK0RBQStELHlDQUF5QztBQUN4RztBQUNBO0FBQ0E7QUFDQTtBQUNBLG9DQUFvQyxRQUFRLEVBQUUsTUFBTTtBQUNwRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLHFCQUFxQjtBQUNyQjtBQUNBLGtCQUFrQjtBQUNsQix1Q0FBdUMsUUFBUSxFQUFFLFFBQVE7QUFDekQ7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0EsK0NBQStDLG9CQUFvQjtBQUNuRTtBQUNBLHlCQUF5Qiw2RUFBYztBQUN2QztBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0NBQXdDLHNGQUF5QjtBQUNqRTtBQUNBLG9DQUFvQyw0RUFBc0I7QUFDMUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxzSkFBc0osb0VBQWM7QUFDcEssMElBQTBJLG9FQUFjO0FBQ3hKO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyw2RUFBZTtBQUNyRDtBQUNBO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esc0JBQXNCO0FBQ3RCO0FBQ0EsOEJBQThCLDZFQUFZO0FBQzFDO0FBQ0E7QUFDQSxrQkFBa0I7QUFDbEI7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw4Q0FBOEMsMkZBQW1CO0FBQ2pFO0FBQ0E7QUFDQSw2QkFBNkI7QUFDN0IseUJBQXlCO0FBQ3pCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSwyQkFBMkIsa0VBQVM7QUFDcEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQSxxSUFBcUksNkVBQWU7QUFDcEo7QUFDQSwyR0FBMkcsaUhBQWlIO0FBQzVOO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLGlCQUFpQiw2RUFBYztBQUMvQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSw0QkFBNEIsd0ZBQTJCO0FBQ3ZELGtCQUFrQiw2RUFBYztBQUNoQywrQkFBK0IsNEVBQXNCO0FBQ3JEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkNBQTZDLDBGQUFxQjtBQUNsRTtBQUNBLGtCQUFrQiw2RUFBWTtBQUM5QjtBQUNBO0FBQ0EsYUFBYTtBQUNiO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFVBQVU7QUFDViw2RUFBNkUsZ0ZBQWM7QUFDM0YsaUNBQWlDLFFBQVEsRUFBRSxRQUFRO0FBQ25ELDBCQUEwQix1RUFBUTtBQUNsQztBQUNBO0FBQ0E7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQjtBQUNBLE1BQU07QUFDTjtBQUNBLDRDQUE0Qyw2RkFBZTtBQUMzRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLGtDQUFrQywyRkFBbUI7QUFDckQ7QUFDQTtBQUNBLGlCQUFpQjtBQUNqQixhQUFhO0FBQ2I7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLGNBQWMsNkVBQVk7QUFDMUI7QUFDQSxTQUFTO0FBQ1Q7QUFDQTtBQUNBOztBQUVBIiwic291cmNlcyI6WyIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQXBwUm91dGVSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3JvdXRlLW1vZHVsZXMvYXBwLXJvdXRlL21vZHVsZS5jb21waWxlZFwiO1xuaW1wb3J0IHsgUm91dGVLaW5kIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0IHsgZ2V0UmVxdWVzdE1ldGEgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yZXF1ZXN0LW1ldGFcIjtcbmltcG9ydCB7IGdldFRyYWNlciwgU3BhbktpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9saWIvdHJhY2UvdHJhY2VyXCI7XG5pbXBvcnQgeyBub3JtYWxpemVBcHBQYXRoIH0gZnJvbSBcIm5leHQvZGlzdC9zaGFyZWQvbGliL3JvdXRlci91dGlscy9hcHAtcGF0aHNcIjtcbmltcG9ydCB7IE5vZGVOZXh0UmVxdWVzdCwgTm9kZU5leHRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Jhc2UtaHR0cC9ub2RlXCI7XG5pbXBvcnQgeyBOZXh0UmVxdWVzdEFkYXB0ZXIsIHNpZ25hbEZyb21Ob2RlUmVzcG9uc2UgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci93ZWIvc3BlYy1leHRlbnNpb24vYWRhcHRlcnMvbmV4dC1yZXF1ZXN0XCI7XG5pbXBvcnQgeyBCYXNlU2VydmVyU3BhbiB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi90cmFjZS9jb25zdGFudHNcIjtcbmltcG9ydCB7IGdldFJldmFsaWRhdGVSZWFzb24gfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9pbnN0cnVtZW50YXRpb24vdXRpbHNcIjtcbmltcG9ydCB7IHNlbmRSZXNwb25zZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3NlbmQtcmVzcG9uc2VcIjtcbmltcG9ydCB7IGZyb21Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycywgdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3dlYi91dGlsc1wiO1xuaW1wb3J0IHsgZ2V0Q2FjaGVDb250cm9sSGVhZGVyIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvbGliL2NhY2hlLWNvbnRyb2xcIjtcbmltcG9ydCB7IElORklOSVRFX0NBQ0hFLCBORVhUX0NBQ0hFX1RBR1NfSEVBREVSIH0gZnJvbSBcIm5leHQvZGlzdC9saWIvY29uc3RhbnRzXCI7XG5pbXBvcnQgeyBOb0ZhbGxiYWNrRXJyb3IgfSBmcm9tIFwibmV4dC9kaXN0L3NoYXJlZC9saWIvbm8tZmFsbGJhY2stZXJyb3IuZXh0ZXJuYWxcIjtcbmltcG9ydCB7IENhY2hlZFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL3Jlc3BvbnNlLWNhY2hlXCI7XG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiL1VzZXJzL3dpbGxyb2NoZS9EZXNrdG9wL0hvcEhhY2tzMjAyNS9hcHAvYXBpL2FnZW50L3JvdXRlLnRzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hZ2VudC9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2FnZW50XCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9hZ2VudC9yb3V0ZVwiXG4gICAgfSxcbiAgICBkaXN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfRElTVF9ESVIgfHwgJycsXG4gICAgcmVsYXRpdmVQcm9qZWN0RGlyOiBwcm9jZXNzLmVudi5fX05FWFRfUkVMQVRJVkVfUFJPSkVDVF9ESVIgfHwgJycsXG4gICAgcmVzb2x2ZWRQYWdlUGF0aDogXCIvVXNlcnMvd2lsbHJvY2hlL0Rlc2t0b3AvSG9wSGFja3MyMDI1L2FwcC9hcGkvYWdlbnQvcm91dGUudHNcIixcbiAgICBuZXh0Q29uZmlnT3V0cHV0LFxuICAgIHVzZXJsYW5kXG59KTtcbi8vIFB1bGwgb3V0IHRoZSBleHBvcnRzIHRoYXQgd2UgbmVlZCB0byBleHBvc2UgZnJvbSB0aGUgbW9kdWxlLiBUaGlzIHNob3VsZFxuLy8gYmUgZWxpbWluYXRlZCB3aGVuIHdlJ3ZlIG1vdmVkIHRoZSBvdGhlciByb3V0ZXMgdG8gdGhlIG5ldyBmb3JtYXQuIFRoZXNlXG4vLyBhcmUgdXNlZCB0byBob29rIGludG8gdGhlIHJvdXRlLlxuY29uc3QgeyB3b3JrQXN5bmNTdG9yYWdlLCB3b3JrVW5pdEFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICB3b3JrQXN5bmNTdG9yYWdlLFxuICAgICAgICB3b3JrVW5pdEFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHdvcmtBc3luY1N0b3JhZ2UsIHdvcmtVbml0QXN5bmNTdG9yYWdlLCBzZXJ2ZXJIb29rcywgcGF0Y2hGZXRjaCwgIH07XG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcywgY3R4KSB7XG4gICAgdmFyIF9uZXh0Q29uZmlnX2V4cGVyaW1lbnRhbDtcbiAgICBsZXQgc3JjUGFnZSA9IFwiL2FwaS9hZ2VudC9yb3V0ZVwiO1xuICAgIC8vIHR1cmJvcGFjayBkb2Vzbid0IG5vcm1hbGl6ZSBgL2luZGV4YCBpbiB0aGUgcGFnZSBuYW1lXG4gICAgLy8gc28gd2UgbmVlZCB0byB0byBwcm9jZXNzIGR5bmFtaWMgcm91dGVzIHByb3Blcmx5XG4gICAgLy8gVE9ETzogZml4IHR1cmJvcGFjayBwcm92aWRpbmcgZGlmZmVyaW5nIHZhbHVlIGZyb20gd2VicGFja1xuICAgIGlmIChwcm9jZXNzLmVudi5UVVJCT1BBQ0spIHtcbiAgICAgICAgc3JjUGFnZSA9IHNyY1BhZ2UucmVwbGFjZSgvXFwvaW5kZXgkLywgJycpIHx8ICcvJztcbiAgICB9IGVsc2UgaWYgKHNyY1BhZ2UgPT09ICcvaW5kZXgnKSB7XG4gICAgICAgIC8vIHdlIGFsd2F5cyBub3JtYWxpemUgL2luZGV4IHNwZWNpZmljYWxseVxuICAgICAgICBzcmNQYWdlID0gJy8nO1xuICAgIH1cbiAgICBjb25zdCBtdWx0aVpvbmVEcmFmdE1vZGUgPSBwcm9jZXNzLmVudi5fX05FWFRfTVVMVElfWk9ORV9EUkFGVF9NT0RFO1xuICAgIGNvbnN0IHByZXBhcmVSZXN1bHQgPSBhd2FpdCByb3V0ZU1vZHVsZS5wcmVwYXJlKHJlcSwgcmVzLCB7XG4gICAgICAgIHNyY1BhZ2UsXG4gICAgICAgIG11bHRpWm9uZURyYWZ0TW9kZVxuICAgIH0pO1xuICAgIGlmICghcHJlcGFyZVJlc3VsdCkge1xuICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwMDtcbiAgICAgICAgcmVzLmVuZCgnQmFkIFJlcXVlc3QnKTtcbiAgICAgICAgY3R4LndhaXRVbnRpbCA9PSBudWxsID8gdm9pZCAwIDogY3R4LndhaXRVbnRpbC5jYWxsKGN0eCwgUHJvbWlzZS5yZXNvbHZlKCkpO1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgY29uc3QgeyBidWlsZElkLCBwYXJhbXMsIG5leHRDb25maWcsIGlzRHJhZnRNb2RlLCBwcmVyZW5kZXJNYW5pZmVzdCwgcm91dGVyU2VydmVyQ29udGV4dCwgaXNPbkRlbWFuZFJldmFsaWRhdGUsIHJldmFsaWRhdGVPbmx5R2VuZXJhdGVkLCByZXNvbHZlZFBhdGhuYW1lIH0gPSBwcmVwYXJlUmVzdWx0O1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRTcmNQYWdlID0gbm9ybWFsaXplQXBwUGF0aChzcmNQYWdlKTtcbiAgICBsZXQgaXNJc3IgPSBCb29sZWFuKHByZXJlbmRlck1hbmlmZXN0LmR5bmFtaWNSb3V0ZXNbbm9ybWFsaXplZFNyY1BhZ2VdIHx8IHByZXJlbmRlck1hbmlmZXN0LnJvdXRlc1tyZXNvbHZlZFBhdGhuYW1lXSk7XG4gICAgaWYgKGlzSXNyICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjb25zdCBpc1ByZXJlbmRlcmVkID0gQm9vbGVhbihwcmVyZW5kZXJNYW5pZmVzdC5yb3V0ZXNbcmVzb2x2ZWRQYXRobmFtZV0pO1xuICAgICAgICBjb25zdCBwcmVyZW5kZXJJbmZvID0gcHJlcmVuZGVyTWFuaWZlc3QuZHluYW1pY1JvdXRlc1tub3JtYWxpemVkU3JjUGFnZV07XG4gICAgICAgIGlmIChwcmVyZW5kZXJJbmZvKSB7XG4gICAgICAgICAgICBpZiAocHJlcmVuZGVySW5mby5mYWxsYmFjayA9PT0gZmFsc2UgJiYgIWlzUHJlcmVuZGVyZWQpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgTm9GYWxsYmFja0Vycm9yKCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG4gICAgbGV0IGNhY2hlS2V5ID0gbnVsbDtcbiAgICBpZiAoaXNJc3IgJiYgIXJvdXRlTW9kdWxlLmlzRGV2ICYmICFpc0RyYWZ0TW9kZSkge1xuICAgICAgICBjYWNoZUtleSA9IHJlc29sdmVkUGF0aG5hbWU7XG4gICAgICAgIC8vIGVuc3VyZSAvaW5kZXggYW5kIC8gaXMgbm9ybWFsaXplZCB0byBvbmUga2V5XG4gICAgICAgIGNhY2hlS2V5ID0gY2FjaGVLZXkgPT09ICcvaW5kZXgnID8gJy8nIDogY2FjaGVLZXk7XG4gICAgfVxuICAgIGNvbnN0IHN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlID0gLy8gSWYgd2UncmUgaW4gZGV2ZWxvcG1lbnQsIHdlIGFsd2F5cyBzdXBwb3J0IGR5bmFtaWMgSFRNTFxuICAgIHJvdXRlTW9kdWxlLmlzRGV2ID09PSB0cnVlIHx8IC8vIElmIHRoaXMgaXMgbm90IFNTRyBvciBkb2VzIG5vdCBoYXZlIHN0YXRpYyBwYXRocywgdGhlbiBpdCBzdXBwb3J0c1xuICAgIC8vIGR5bmFtaWMgSFRNTC5cbiAgICAhaXNJc3I7XG4gICAgLy8gVGhpcyBpcyBhIHJldmFsaWRhdGlvbiByZXF1ZXN0IGlmIHRoZSByZXF1ZXN0IGlzIGZvciBhIHN0YXRpY1xuICAgIC8vIHBhZ2UgYW5kIGl0IGlzIG5vdCBiZWluZyByZXN1bWVkIGZyb20gYSBwb3N0cG9uZWQgcmVuZGVyIGFuZFxuICAgIC8vIGl0IGlzIG5vdCBhIGR5bmFtaWMgUlNDIHJlcXVlc3QgdGhlbiBpdCBpcyBhIHJldmFsaWRhdGlvblxuICAgIC8vIHJlcXVlc3QuXG4gICAgY29uc3QgaXNSZXZhbGlkYXRlID0gaXNJc3IgJiYgIXN1cHBvcnRzRHluYW1pY1Jlc3BvbnNlO1xuICAgIGNvbnN0IG1ldGhvZCA9IHJlcS5tZXRob2QgfHwgJ0dFVCc7XG4gICAgY29uc3QgdHJhY2VyID0gZ2V0VHJhY2VyKCk7XG4gICAgY29uc3QgYWN0aXZlU3BhbiA9IHRyYWNlci5nZXRBY3RpdmVTY29wZVNwYW4oKTtcbiAgICBjb25zdCBjb250ZXh0ID0ge1xuICAgICAgICBwYXJhbXMsXG4gICAgICAgIHByZXJlbmRlck1hbmlmZXN0LFxuICAgICAgICByZW5kZXJPcHRzOiB7XG4gICAgICAgICAgICBleHBlcmltZW50YWw6IHtcbiAgICAgICAgICAgICAgICBjYWNoZUNvbXBvbmVudHM6IEJvb2xlYW4obmV4dENvbmZpZy5leHBlcmltZW50YWwuY2FjaGVDb21wb25lbnRzKSxcbiAgICAgICAgICAgICAgICBhdXRoSW50ZXJydXB0czogQm9vbGVhbihuZXh0Q29uZmlnLmV4cGVyaW1lbnRhbC5hdXRoSW50ZXJydXB0cylcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgICBzdXBwb3J0c0R5bmFtaWNSZXNwb25zZSxcbiAgICAgICAgICAgIGluY3JlbWVudGFsQ2FjaGU6IGdldFJlcXVlc3RNZXRhKHJlcSwgJ2luY3JlbWVudGFsQ2FjaGUnKSxcbiAgICAgICAgICAgIGNhY2hlTGlmZVByb2ZpbGVzOiAoX25leHRDb25maWdfZXhwZXJpbWVudGFsID0gbmV4dENvbmZpZy5leHBlcmltZW50YWwpID09IG51bGwgPyB2b2lkIDAgOiBfbmV4dENvbmZpZ19leHBlcmltZW50YWwuY2FjaGVMaWZlLFxuICAgICAgICAgICAgaXNSZXZhbGlkYXRlLFxuICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsLFxuICAgICAgICAgICAgb25DbG9zZTogKGNiKT0+e1xuICAgICAgICAgICAgICAgIHJlcy5vbignY2xvc2UnLCBjYik7XG4gICAgICAgICAgICB9LFxuICAgICAgICAgICAgb25BZnRlclRhc2tFcnJvcjogdW5kZWZpbmVkLFxuICAgICAgICAgICAgb25JbnN0cnVtZW50YXRpb25SZXF1ZXN0RXJyb3I6IChlcnJvciwgX3JlcXVlc3QsIGVycm9yQ29udGV4dCk9PnJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyb3IsIGVycm9yQ29udGV4dCwgcm91dGVyU2VydmVyQ29udGV4dClcbiAgICAgICAgfSxcbiAgICAgICAgc2hhcmVkQ29udGV4dDoge1xuICAgICAgICAgICAgYnVpbGRJZFxuICAgICAgICB9XG4gICAgfTtcbiAgICBjb25zdCBub2RlTmV4dFJlcSA9IG5ldyBOb2RlTmV4dFJlcXVlc3QocmVxKTtcbiAgICBjb25zdCBub2RlTmV4dFJlcyA9IG5ldyBOb2RlTmV4dFJlc3BvbnNlKHJlcyk7XG4gICAgY29uc3QgbmV4dFJlcSA9IE5leHRSZXF1ZXN0QWRhcHRlci5mcm9tTm9kZU5leHRSZXF1ZXN0KG5vZGVOZXh0UmVxLCBzaWduYWxGcm9tTm9kZVJlc3BvbnNlKHJlcykpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGludm9rZVJvdXRlTW9kdWxlID0gYXN5bmMgKHNwYW4pPT57XG4gICAgICAgICAgICByZXR1cm4gcm91dGVNb2R1bGUuaGFuZGxlKG5leHRSZXEsIGNvbnRleHQpLmZpbmFsbHkoKCk9PntcbiAgICAgICAgICAgICAgICBpZiAoIXNwYW4pIHJldHVybjtcbiAgICAgICAgICAgICAgICBzcGFuLnNldEF0dHJpYnV0ZXMoe1xuICAgICAgICAgICAgICAgICAgICAnaHR0cC5zdGF0dXNfY29kZSc6IHJlcy5zdGF0dXNDb2RlLFxuICAgICAgICAgICAgICAgICAgICAnbmV4dC5yc2MnOiBmYWxzZVxuICAgICAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgICAgIGNvbnN0IHJvb3RTcGFuQXR0cmlidXRlcyA9IHRyYWNlci5nZXRSb290U3BhbkF0dHJpYnV0ZXMoKTtcbiAgICAgICAgICAgICAgICAvLyBXZSB3ZXJlIHVuYWJsZSB0byBnZXQgYXR0cmlidXRlcywgcHJvYmFibHkgT1RFTCBpcyBub3QgZW5hYmxlZFxuICAgICAgICAgICAgICAgIGlmICghcm9vdFNwYW5BdHRyaWJ1dGVzKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKHJvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJykgIT09IEJhc2VTZXJ2ZXJTcGFuLmhhbmRsZVJlcXVlc3QpIHtcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKGBVbmV4cGVjdGVkIHJvb3Qgc3BhbiB0eXBlICcke3Jvb3RTcGFuQXR0cmlidXRlcy5nZXQoJ25leHQuc3Bhbl90eXBlJyl9Jy4gUGxlYXNlIHJlcG9ydCB0aGlzIE5leHQuanMgaXNzdWUgaHR0cHM6Ly9naXRodWIuY29tL3ZlcmNlbC9uZXh0LmpzYCk7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29uc3Qgcm91dGUgPSByb290U3BhbkF0dHJpYnV0ZXMuZ2V0KCduZXh0LnJvdXRlJyk7XG4gICAgICAgICAgICAgICAgaWYgKHJvdXRlKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IG5hbWUgPSBgJHttZXRob2R9ICR7cm91dGV9YDtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi5zZXRBdHRyaWJ1dGVzKHtcbiAgICAgICAgICAgICAgICAgICAgICAgICduZXh0LnJvdXRlJzogcm91dGUsXG4gICAgICAgICAgICAgICAgICAgICAgICAnaHR0cC5yb3V0ZSc6IHJvdXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgJ25leHQuc3Bhbl9uYW1lJzogbmFtZVxuICAgICAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICAgICAgc3Bhbi51cGRhdGVOYW1lKG5hbWUpO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW4udXBkYXRlTmFtZShgJHttZXRob2R9ICR7cmVxLnVybH1gKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICAgICAgY29uc3QgaGFuZGxlUmVzcG9uc2UgPSBhc3luYyAoY3VycmVudFNwYW4pPT57XG4gICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWU7XG4gICAgICAgICAgICBjb25zdCByZXNwb25zZUdlbmVyYXRvciA9IGFzeW5jICh7IHByZXZpb3VzQ2FjaGVFbnRyeSB9KT0+e1xuICAgICAgICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICAgICAgICAgIGlmICghZ2V0UmVxdWVzdE1ldGEocmVxLCAnbWluaW1hbE1vZGUnKSAmJiBpc09uRGVtYW5kUmV2YWxpZGF0ZSAmJiByZXZhbGlkYXRlT25seUdlbmVyYXRlZCAmJiAhcHJldmlvdXNDYWNoZUVudHJ5KSB7XG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc3RhdHVzQ29kZSA9IDQwNDtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIG9uLWRlbWFuZCByZXZhbGlkYXRlIGFsd2F5cyBzZXRzIHRoaXMgaGVhZGVyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsICdSRVZBTElEQVRFRCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmVzLmVuZCgnVGhpcyBwYWdlIGNvdWxkIG5vdCBiZSBmb3VuZCcpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBpbnZva2VSb3V0ZU1vZHVsZShjdXJyZW50U3Bhbik7XG4gICAgICAgICAgICAgICAgICAgIHJlcS5mZXRjaE1ldHJpY3MgPSBjb250ZXh0LnJlbmRlck9wdHMuZmV0Y2hNZXRyaWNzO1xuICAgICAgICAgICAgICAgICAgICBsZXQgcGVuZGluZ1dhaXRVbnRpbCA9IGNvbnRleHQucmVuZGVyT3B0cy5wZW5kaW5nV2FpdFVudGlsO1xuICAgICAgICAgICAgICAgICAgICAvLyBBdHRlbXB0IHVzaW5nIHByb3ZpZGVkIHdhaXRVbnRpbCBpZiBhdmFpbGFibGVcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgaXQncyBub3Qgd2UgZmFsbGJhY2sgdG8gc2VuZFJlc3BvbnNlJ3MgaGFuZGxpbmdcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBlbmRpbmdXYWl0VW50aWwpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjdHgud2FpdFVudGlsKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY3R4LndhaXRVbnRpbChwZW5kaW5nV2FpdFVudGlsKTtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBwZW5kaW5nV2FpdFVudGlsID0gdW5kZWZpbmVkO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlVGFncyA9IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRUYWdzO1xuICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGUgcmVxdWVzdCBpcyBmb3IgYSBzdGF0aWMgcmVzcG9uc2UsIHdlIGNhbiBjYWNoZSBpdCBzbyBsb25nXG4gICAgICAgICAgICAgICAgICAgIC8vIGFzIGl0J3Mgbm90IGVkZ2UuXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc0lzcikge1xuICAgICAgICAgICAgICAgICAgICAgICAgY29uc3QgYmxvYiA9IGF3YWl0IHJlc3BvbnNlLmJsb2IoKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENvcHkgdGhlIGhlYWRlcnMgZnJvbSB0aGUgcmVzcG9uc2UuXG4gICAgICAgICAgICAgICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gdG9Ob2RlT3V0Z29pbmdIdHRwSGVhZGVycyhyZXNwb25zZS5oZWFkZXJzKTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChjYWNoZVRhZ3MpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzW05FWFRfQ0FDSEVfVEFHU19IRUFERVJdID0gY2FjaGVUYWdzO1xuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCFoZWFkZXJzWydjb250ZW50LXR5cGUnXSAmJiBibG9iLnR5cGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBoZWFkZXJzWydjb250ZW50LXR5cGUnXSA9IGJsb2IudHlwZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IHJldmFsaWRhdGUgPSB0eXBlb2YgY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZFJldmFsaWRhdGUgPT09ICd1bmRlZmluZWQnIHx8IGNvbnRleHQucmVuZGVyT3B0cy5jb2xsZWN0ZWRSZXZhbGlkYXRlID49IElORklOSVRFX0NBQ0hFID8gZmFsc2UgOiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkUmV2YWxpZGF0ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGV4cGlyZSA9IHR5cGVvZiBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID09PSAndW5kZWZpbmVkJyB8fCBjb250ZXh0LnJlbmRlck9wdHMuY29sbGVjdGVkRXhwaXJlID49IElORklOSVRFX0NBQ0hFID8gdW5kZWZpbmVkIDogY29udGV4dC5yZW5kZXJPcHRzLmNvbGxlY3RlZEV4cGlyZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgY2FjaGUgZW50cnkgZm9yIHRoZSByZXNwb25zZS5cbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnN0IGNhY2hlRW50cnkgPSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAga2luZDogQ2FjaGVkUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgc3RhdHVzOiByZXNwb25zZS5zdGF0dXMsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJvZHk6IEJ1ZmZlci5mcm9tKGF3YWl0IGJsb2IuYXJyYXlCdWZmZXIoKSksXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGhlYWRlcnNcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNhY2hlQ29udHJvbDoge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXZhbGlkYXRlLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBleHBpcmVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGNhY2hlRW50cnk7XG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBzZW5kIHJlc3BvbnNlIHdpdGhvdXQgY2FjaGluZyBpZiBub3QgSVNSXG4gICAgICAgICAgICAgICAgICAgICAgICBhd2FpdCBzZW5kUmVzcG9uc2Uobm9kZU5leHRSZXEsIG5vZGVOZXh0UmVzLCByZXNwb25zZSwgY29udGV4dC5yZW5kZXJPcHRzLnBlbmRpbmdXYWl0VW50aWwpO1xuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgdGhpcyBpcyBhIGJhY2tncm91bmQgcmV2YWxpZGF0ZSB3ZSBuZWVkIHRvIHJlcG9ydFxuICAgICAgICAgICAgICAgICAgICAvLyB0aGUgcmVxdWVzdCBlcnJvciBoZXJlIGFzIGl0IHdvbid0IGJlIGJ1YmJsZWRcbiAgICAgICAgICAgICAgICAgICAgaWYgKHByZXZpb3VzQ2FjaGVFbnRyeSA9PSBudWxsID8gdm9pZCAwIDogcHJldmlvdXNDYWNoZUVudHJ5LmlzU3RhbGUpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGF3YWl0IHJvdXRlTW9kdWxlLm9uUmVxdWVzdEVycm9yKHJlcSwgZXJyLCB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcm91dGVyS2luZDogJ0FwcCBSb3V0ZXInLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJvdXRlUGF0aDogc3JjUGFnZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgICAgICAgICAgICAgfSwgcm91dGVyU2VydmVyQ29udGV4dCk7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgdGhyb3cgZXJyO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICBjb25zdCBjYWNoZUVudHJ5ID0gYXdhaXQgcm91dGVNb2R1bGUuaGFuZGxlUmVzcG9uc2Uoe1xuICAgICAgICAgICAgICAgIHJlcSxcbiAgICAgICAgICAgICAgICBuZXh0Q29uZmlnLFxuICAgICAgICAgICAgICAgIGNhY2hlS2V5LFxuICAgICAgICAgICAgICAgIHJvdXRlS2luZDogUm91dGVLaW5kLkFQUF9ST1VURSxcbiAgICAgICAgICAgICAgICBpc0ZhbGxiYWNrOiBmYWxzZSxcbiAgICAgICAgICAgICAgICBwcmVyZW5kZXJNYW5pZmVzdCxcbiAgICAgICAgICAgICAgICBpc1JvdXRlUFBSRW5hYmxlZDogZmFsc2UsXG4gICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGUsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZU9ubHlHZW5lcmF0ZWQsXG4gICAgICAgICAgICAgICAgcmVzcG9uc2VHZW5lcmF0b3IsXG4gICAgICAgICAgICAgICAgd2FpdFVudGlsOiBjdHgud2FpdFVudGlsXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIC8vIHdlIGRvbid0IGNyZWF0ZSBhIGNhY2hlRW50cnkgZm9yIElTUlxuICAgICAgICAgICAgaWYgKCFpc0lzcikge1xuICAgICAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKChjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUgPSBjYWNoZUVudHJ5LnZhbHVlKSA9PSBudWxsID8gdm9pZCAwIDogX2NhY2hlRW50cnlfdmFsdWUua2luZCkgIT09IENhY2hlZFJvdXRlS2luZC5BUFBfUk9VVEUpIHtcbiAgICAgICAgICAgICAgICB2YXIgX2NhY2hlRW50cnlfdmFsdWUxO1xuICAgICAgICAgICAgICAgIHRocm93IE9iamVjdC5kZWZpbmVQcm9wZXJ0eShuZXcgRXJyb3IoYEludmFyaWFudDogYXBwLXJvdXRlIHJlY2VpdmVkIGludmFsaWQgY2FjaGUgZW50cnkgJHtjYWNoZUVudHJ5ID09IG51bGwgPyB2b2lkIDAgOiAoX2NhY2hlRW50cnlfdmFsdWUxID0gY2FjaGVFbnRyeS52YWx1ZSkgPT0gbnVsbCA/IHZvaWQgMCA6IF9jYWNoZUVudHJ5X3ZhbHVlMS5raW5kfWApLCBcIl9fTkVYVF9FUlJPUl9DT0RFXCIsIHtcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IFwiRTcwMVwiLFxuICAgICAgICAgICAgICAgICAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgY29uZmlndXJhYmxlOiB0cnVlXG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAoIWdldFJlcXVlc3RNZXRhKHJlcSwgJ21pbmltYWxNb2RlJykpIHtcbiAgICAgICAgICAgICAgICByZXMuc2V0SGVhZGVyKCd4LW5leHRqcy1jYWNoZScsIGlzT25EZW1hbmRSZXZhbGlkYXRlID8gJ1JFVkFMSURBVEVEJyA6IGNhY2hlRW50cnkuaXNNaXNzID8gJ01JU1MnIDogY2FjaGVFbnRyeS5pc1N0YWxlID8gJ1NUQUxFJyA6ICdISVQnKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIERyYWZ0IG1vZGUgc2hvdWxkIG5ldmVyIGJlIGNhY2hlZFxuICAgICAgICAgICAgaWYgKGlzRHJhZnRNb2RlKSB7XG4gICAgICAgICAgICAgICAgcmVzLnNldEhlYWRlcignQ2FjaGUtQ29udHJvbCcsICdwcml2YXRlLCBuby1jYWNoZSwgbm8tc3RvcmUsIG1heC1hZ2U9MCwgbXVzdC1yZXZhbGlkYXRlJyk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBjb25zdCBoZWFkZXJzID0gZnJvbU5vZGVPdXRnb2luZ0h0dHBIZWFkZXJzKGNhY2hlRW50cnkudmFsdWUuaGVhZGVycyk7XG4gICAgICAgICAgICBpZiAoIShnZXRSZXF1ZXN0TWV0YShyZXEsICdtaW5pbWFsTW9kZScpICYmIGlzSXNyKSkge1xuICAgICAgICAgICAgICAgIGhlYWRlcnMuZGVsZXRlKE5FWFRfQ0FDSEVfVEFHU19IRUFERVIpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gSWYgY2FjaGUgY29udHJvbCBpcyBhbHJlYWR5IHNldCBvbiB0aGUgcmVzcG9uc2Ugd2UgZG9uJ3RcbiAgICAgICAgICAgIC8vIG92ZXJyaWRlIGl0IHRvIGFsbG93IHVzZXJzIHRvIGN1c3RvbWl6ZSBpdCB2aWEgbmV4dC5jb25maWdcbiAgICAgICAgICAgIGlmIChjYWNoZUVudHJ5LmNhY2hlQ29udHJvbCAmJiAhcmVzLmdldEhlYWRlcignQ2FjaGUtQ29udHJvbCcpICYmICFoZWFkZXJzLmdldCgnQ2FjaGUtQ29udHJvbCcpKSB7XG4gICAgICAgICAgICAgICAgaGVhZGVycy5zZXQoJ0NhY2hlLUNvbnRyb2wnLCBnZXRDYWNoZUNvbnRyb2xIZWFkZXIoY2FjaGVFbnRyeS5jYWNoZUNvbnRyb2wpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShjYWNoZUVudHJ5LnZhbHVlLmJvZHksIHtcbiAgICAgICAgICAgICAgICBoZWFkZXJzLFxuICAgICAgICAgICAgICAgIHN0YXR1czogY2FjaGVFbnRyeS52YWx1ZS5zdGF0dXMgfHwgMjAwXG4gICAgICAgICAgICB9KSk7XG4gICAgICAgICAgICByZXR1cm4gbnVsbDtcbiAgICAgICAgfTtcbiAgICAgICAgLy8gVE9ETzogYWN0aXZlU3BhbiBjb2RlIHBhdGggaXMgZm9yIHdoZW4gd3JhcHBlZCBieVxuICAgICAgICAvLyBuZXh0LXNlcnZlciBjYW4gYmUgcmVtb3ZlZCB3aGVuIHRoaXMgaXMgbm8gbG9uZ2VyIHVzZWRcbiAgICAgICAgaWYgKGFjdGl2ZVNwYW4pIHtcbiAgICAgICAgICAgIGF3YWl0IGhhbmRsZVJlc3BvbnNlKGFjdGl2ZVNwYW4pO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgYXdhaXQgdHJhY2VyLndpdGhQcm9wYWdhdGVkQ29udGV4dChyZXEuaGVhZGVycywgKCk9PnRyYWNlci50cmFjZShCYXNlU2VydmVyU3Bhbi5oYW5kbGVSZXF1ZXN0LCB7XG4gICAgICAgICAgICAgICAgICAgIHNwYW5OYW1lOiBgJHttZXRob2R9ICR7cmVxLnVybH1gLFxuICAgICAgICAgICAgICAgICAgICBraW5kOiBTcGFuS2luZC5TRVJWRVIsXG4gICAgICAgICAgICAgICAgICAgIGF0dHJpYnV0ZXM6IHtcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLm1ldGhvZCc6IG1ldGhvZCxcbiAgICAgICAgICAgICAgICAgICAgICAgICdodHRwLnRhcmdldCc6IHJlcS51cmxcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH0sIGhhbmRsZVJlc3BvbnNlKSk7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlcnIpIHtcbiAgICAgICAgLy8gaWYgd2UgYXJlbid0IHdyYXBwZWQgYnkgYmFzZS1zZXJ2ZXIgaGFuZGxlIGhlcmVcbiAgICAgICAgaWYgKCFhY3RpdmVTcGFuICYmICEoZXJyIGluc3RhbmNlb2YgTm9GYWxsYmFja0Vycm9yKSkge1xuICAgICAgICAgICAgYXdhaXQgcm91dGVNb2R1bGUub25SZXF1ZXN0RXJyb3IocmVxLCBlcnIsIHtcbiAgICAgICAgICAgICAgICByb3V0ZXJLaW5kOiAnQXBwIFJvdXRlcicsXG4gICAgICAgICAgICAgICAgcm91dGVQYXRoOiBub3JtYWxpemVkU3JjUGFnZSxcbiAgICAgICAgICAgICAgICByb3V0ZVR5cGU6ICdyb3V0ZScsXG4gICAgICAgICAgICAgICAgcmV2YWxpZGF0ZVJlYXNvbjogZ2V0UmV2YWxpZGF0ZVJlYXNvbih7XG4gICAgICAgICAgICAgICAgICAgIGlzUmV2YWxpZGF0ZSxcbiAgICAgICAgICAgICAgICAgICAgaXNPbkRlbWFuZFJldmFsaWRhdGVcbiAgICAgICAgICAgICAgICB9KVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gcmV0aHJvdyBzbyB0aGF0IHdlIGNhbiBoYW5kbGUgc2VydmluZyBlcnJvciBwYWdlXG4gICAgICAgIC8vIElmIHRoaXMgaXMgZHVyaW5nIHN0YXRpYyBnZW5lcmF0aW9uLCB0aHJvdyB0aGUgZXJyb3IgYWdhaW4uXG4gICAgICAgIGlmIChpc0lzcikgdGhyb3cgZXJyO1xuICAgICAgICAvLyBPdGhlcndpc2UsIHNlbmQgYSA1MDAgcmVzcG9uc2UuXG4gICAgICAgIGF3YWl0IHNlbmRSZXNwb25zZShub2RlTmV4dFJlcSwgbm9kZU5leHRSZXMsIG5ldyBSZXNwb25zZShudWxsLCB7XG4gICAgICAgICAgICBzdGF0dXM6IDUwMFxuICAgICAgICB9KSk7XG4gICAgICAgIHJldHVybiBudWxsO1xuICAgIH1cbn1cblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcFxuIl0sIm5hbWVzIjpbXSwiaWdub3JlTGlzdCI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fagent%2Froute&page=%2Fapi%2Fagent%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fagent%2Froute.ts&appDir=%2FUsers%2Fwillroche%2FDesktop%2FHopHacks2025%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwillroche%2FDesktop%2FHopHacks2025&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!\n");

/***/ }),

/***/ "(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "(ssr)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true!":
/*!*********************************************************************************************************************************************************************************!*\
  !*** ./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-flight-client-entry-loader.js?server=true! ***!
  \*********************************************************************************************************************************************************************************/
/***/ (() => {



/***/ }),

/***/ "../app-render/action-async-storage.external":
/*!*******************************************************************************!*\
  !*** external "next/dist/server/app-render/action-async-storage.external.js" ***!
  \*******************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/action-async-storage.external.js");

/***/ }),

/***/ "../app-render/after-task-async-storage.external":
/*!***********************************************************************************!*\
  !*** external "next/dist/server/app-render/after-task-async-storage.external.js" ***!
  \***********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/after-task-async-storage.external.js");

/***/ }),

/***/ "./work-async-storage.external":
/*!*****************************************************************************!*\
  !*** external "next/dist/server/app-render/work-async-storage.external.js" ***!
  \*****************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-async-storage.external.js");

/***/ }),

/***/ "./work-unit-async-storage.external":
/*!**********************************************************************************!*\
  !*** external "next/dist/server/app-render/work-unit-async-storage.external.js" ***!
  \**********************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/server/app-render/work-unit-async-storage.external.js");

/***/ }),

/***/ "http":
/*!***********************!*\
  !*** external "http" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("http");

/***/ }),

/***/ "https":
/*!************************!*\
  !*** external "https" ***!
  \************************/
/***/ ((module) => {

"use strict";
module.exports = require("https");

/***/ }),

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "next/dist/shared/lib/no-fallback-error.external":
/*!******************************************************************!*\
  !*** external "next/dist/shared/lib/no-fallback-error.external" ***!
  \******************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/no-fallback-error.external");

/***/ }),

/***/ "next/dist/shared/lib/router/utils/app-paths":
/*!**************************************************************!*\
  !*** external "next/dist/shared/lib/router/utils/app-paths" ***!
  \**************************************************************/
/***/ ((module) => {

"use strict";
module.exports = require("next/dist/shared/lib/router/utils/app-paths");

/***/ }),

/***/ "punycode":
/*!***************************!*\
  !*** external "punycode" ***!
  \***************************/
/***/ ((module) => {

"use strict";
module.exports = require("punycode");

/***/ }),

/***/ "stream":
/*!*************************!*\
  !*** external "stream" ***!
  \*************************/
/***/ ((module) => {

"use strict";
module.exports = require("stream");

/***/ }),

/***/ "url":
/*!**********************!*\
  !*** external "url" ***!
  \**********************/
/***/ ((module) => {

"use strict";
module.exports = require("url");

/***/ }),

/***/ "zlib":
/*!***********************!*\
  !*** external "zlib" ***!
  \***********************/
/***/ ((module) => {

"use strict";
module.exports = require("zlib");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1","vendor-chunks/tr46@0.0.3","vendor-chunks/@supabase+auth-js@2.71.1","vendor-chunks/@supabase+realtime-js@2.15.5","vendor-chunks/@supabase+postgrest-js@1.21.4","vendor-chunks/@supabase+node-fetch@2.6.15","vendor-chunks/@supabase+storage-js@2.12.1","vendor-chunks/whatwg-url@5.0.0","vendor-chunks/@supabase+supabase-js@2.57.4","vendor-chunks/@supabase+functions-js@2.4.6","vendor-chunks/webidl-conversions@3.0.1"], () => (__webpack_exec__("(rsc)/./node_modules/.pnpm/next@15.5.3_react-dom@19.1.1_react@19.1.1__react@19.1.1/node_modules/next/dist/build/webpack/loaders/next-app-loader/index.js?name=app%2Fapi%2Fagent%2Froute&page=%2Fapi%2Fagent%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fagent%2Froute.ts&appDir=%2FUsers%2Fwillroche%2FDesktop%2FHopHacks2025%2Fapp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=%2FUsers%2Fwillroche%2FDesktop%2FHopHacks2025&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D&isGlobalNotFoundEnabled=!")));
module.exports = __webpack_exports__;

})();